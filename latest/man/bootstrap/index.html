
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="PhyloNetworks is a Julia package for the manipulation, visualization and inference of phylogenetic networks.">
      
      
      
        <meta name="author" content="Claudia Sol&iacute;s-Lemus">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.5">
    
    
      
        <title>Bootstrap - PhyloNetworks.jl</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-769c285a91.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/Documenter.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="PhyloNetworks.jl" class="md-logo md-header-nav__button">
            <img src="../../snaq_small.png" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Manual
                </span>
              
            
            Bootstrap
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/crsl4/PhyloNetworks.jl" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../snaq_small.png">
      </i>
    
    PhyloNetworks.jl
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/crsl4/PhyloNetworks.jl" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inputdata/" title="Input Data for SNaQ" class="md-nav__link">
      Input Data for SNaQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ticr_howtogetQuartetCFs/" title="TICR pipeline" class="md-nav__link">
      TICR pipeline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../snaq_plot/" title="Network estimation and display" class="md-nav__link">
      Network estimation and display
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dist_reroot/" title="Network comparison and manipulation" class="md-nav__link">
      Network comparison and manipulation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fixednetworkoptim/" title="Candidate Networks" class="md-nav__link">
      Candidate Networks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../expectedCFs/" title="Extract Expected CFs" class="md-nav__link">
      Extract Expected CFs
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Bootstrap
      </label>
    
    <a href="./" title="Bootstrap" class="md-nav__link md-nav__link--active">
      Bootstrap
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-a-bootstrap-analysis" title="Running a bootstrap analysis" class="md-nav__link">
    Running a bootstrap analysis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-for-tree-edges" title="support for tree edges" class="md-nav__link">
    support for tree edges
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-for-hybrid-edges-and-hybrid-nodes" title="support for hybrid edges and hybrid nodes" class="md-nav__link">
    support for hybrid edges and hybrid nodes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#who-are-the-hybrids-in-bootstrap-networks" title="Who are the hybrids in bootstrap networks?" class="md-nav__link">
    Who are the hybrids in bootstrap networks?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where-is-the-origin-of-gene-flow" title="Where is the origin of gene flow?" class="md-nav__link">
    Where is the origin of gene flow?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../multiplealleles/" title="Multiple Alleles" class="md-nav__link">
      Multiple Alleles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../trait_tree/" title="Continuous Trait Evolution" class="md-nav__link">
      Continuous Trait Evolution
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Library
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Library
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lib/public/" title="Public" class="md-nav__link">
      Public
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lib/internals/" title="Internals" class="md-nav__link">
      Internals
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-a-bootstrap-analysis" title="Running a bootstrap analysis" class="md-nav__link">
    Running a bootstrap analysis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-for-tree-edges" title="support for tree edges" class="md-nav__link">
    support for tree edges
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-for-hybrid-edges-and-hybrid-nodes" title="support for hybrid edges and hybrid nodes" class="md-nav__link">
    support for hybrid edges and hybrid nodes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#who-are-the-hybrids-in-bootstrap-networks" title="Who are the hybrids in bootstrap networks?" class="md-nav__link">
    Who are the hybrids in bootstrap networks?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where-is-the-origin-of-gene-flow" title="Where is the origin of gene flow?" class="md-nav__link">
    Where is the origin of gene flow?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/crsl4/PhyloNetworks.jl/edit/master/docs/man/bootstrap.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <p><a id='Bootstrap-1'></a></p>
<h1 id="bootstrap">Bootstrap</h1>
<p><a id='Running-a-bootstrap-analysis-1'></a></p>
<h2 id="running-a-bootstrap-analysis">Running a bootstrap analysis</h2>
<p>There are two ways to do a bootstrap analysis.</p>
<ul>
<li>From quartet CFs with credibility intervals, such as if we used BUCKy. The <a href="../ticr_howtogetQuartetCFs/#TICR-pipeline-1">TICR pipeline</a> outpus a CF table with extra columns for credibility intervals. We could then read that table and get bootstrap networks like this, and tweak options as needed:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="n">DataFrames</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">readtable</span><span class="p">(</span><span class="s">&quot;tableCF_withCI.csv&quot;</span><span class="p">)</span>
<span class="n">bootnet</span> <span class="o">=</span> <span class="n">bootsnaq</span><span class="p">(</span><span class="n">startnetwork</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">hmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&quot;bootstrap&quot;</span><span class="p">)</span>
</pre></div>


<ul>
<li>Alternatively, we can use bootstrap gene trees: one file of bootstrap trees per gene. Here, the input is a text file that lists all the bootstrap files (one per gene). We demonstrate this option here.</li>
</ul>
<p>The names of all our bootstrap files are listed in "BSlistfiles". (ASTRAL can use the same file to do its own bootstrap, see the <a href="https://github.com/crsl4/PhyloNetworks.jl/wiki/Gene-Trees:-RAxML">wiki</a> for more details). The function <code>readBootstrapTrees</code> can read this list of file names, then read each bootstrap file to get the bootstrap sample for each gene. We can use them to sample input gene trees at random, one per gene, and estimate a network from them. We ask the <code>bootsnaq</code> function to repeat this resampling of bootstrap gene trees several times.</p>
<div class="codehilite"><pre><span></span><span class="n">bootTrees</span> <span class="o">=</span> <span class="n">readBootstrapTrees</span><span class="p">(</span><span class="s">&quot;BSlistfiles&quot;</span><span class="p">);</span>
<span class="n">bootnet</span> <span class="o">=</span> <span class="n">bootsnaq</span><span class="p">(</span><span class="n">net0</span><span class="p">,</span> <span class="n">bootTrees</span><span class="p">,</span> <span class="n">hmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrep</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">runs</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&quot;bootsnaq&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">4321</span><span class="p">)</span>
</pre></div>


<p>The bootstrap networks are saved in the <code>boostrap.out</code> file, so they can be read in a new session with <code>bootnet = readMultiTopology("bootsnap.out")</code>. To save the bootstrap networks to a different file (perhaps after having re-rooted them with an outgroup), we could do this: <code>writeMultiTopology(bootnet, "bootstrapNets.tre")</code>.</p>
<p>The example above asks for 10 bootstrap replicates, which is definitely too few, to make the example run faster. We might also increase the number of optimization runs (<code>runs</code>) done for each bootstrap replicate. This bootstrap was run with the default 10 runs per replicate, and 100 bootstrap replicates, and the 100 bootstrap networks come with the package:</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">bootnet</span> <span class="o">=</span> <span class="n">readMultiTopology</span><span class="p">(</span><span class="n">Pkg</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="s">&quot;PhyloNetworks&quot;</span><span class="p">,</span><span class="s">&quot;examples&quot;</span><span class="p">,</span><span class="s">&quot;bootsnaq.out&quot;</span><span class="p">));</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">length</span><span class="p">(</span><span class="n">bootnet</span><span class="p">)</span>
<span class="mi">100</span>
</pre></div>


<p>If we used a specified list of quartets on the original data, we should use that same list for the bootstrap analysis through the option <code>quartetfile</code>.</p>
<p><a id='support-for-tree-edges-1'></a></p>
<h2 id="support-for-tree-edges">support for tree edges</h2>
<p>Now that we have 100 bootstrap networks, we need to summarize what they have in common (highly supported features) and what they don't (areas of uncertainty).</p>
<p>Before summarizing these bootstrap networks on the best network, it is best to re-read this network to get a reproducible internal numbering of its nodes and edges, used later for mapping bootstrap support to edges.</p>
<div class="codehilite"><pre><span></span><span class="n">net1</span> <span class="o">=</span> <span class="n">readTopology</span><span class="p">(</span><span class="n">joinpath</span><span class="p">(</span><span class="n">Pkg</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="s">&quot;PhyloNetworks&quot;</span><span class="p">),</span><span class="s">&quot;examples&quot;</span><span class="p">,</span><span class="s">&quot;net1.out&quot;</span><span class="p">))</span>
</pre></div>


<p>It turns out that the direction of gene flow is quite uncertain in this example (see below) with a wrong direction inferred sometimes, so we re-root our best network net1 to the base of O,E, for the figures to be less confusing later.</p>
<div class="codehilite"><pre><span></span><span class="k">using</span> <span class="n">DataFrames</span>
<span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">showEdgeNumber</span><span class="o">=</span><span class="kc">true</span><span class="p">)</span> <span class="c"># edge 7 leads to O+E</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-794a40be&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-794a40be-1"> <g clip-path="url(#img-794a40be-2)">   <g id="img-794a40be-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-794a40be-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-794a40be-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-794a40be-6">       <path fill="none" d="M-152.28,5 L -152.28 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M293.7,5 L 293.7 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-112.46,5 L -112.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-104.49,5 L -104.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-96.53,5 L -96.53 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-80.6,5 L -80.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-72.64,5 L -72.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-64.67,5 L -64.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.75,5 L -48.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-40.78,5 L -40.78 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-32.82,5 L -32.82 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-16.89,5 L -16.89 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-8.93,5 L -8.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-0.96,5 L -0.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M14.96,5 L 14.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M22.93,5 L 22.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M30.89,5 L 30.89 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M46.82,5 L 46.82 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M54.78,5 L 54.78 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.75,5 L 62.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M78.67,5 L 78.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M86.64,5 L 86.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M94.6,5 L 94.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M110.53,5 L 110.53 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M118.49,5 L 118.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M126.46,5 L 126.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.39,5 L 142.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M150.35,5 L 150.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M158.31,5 L 158.31 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M174.24,5 L 174.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M182.2,5 L 182.2 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M190.17,5 L 190.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.1,5 L 206.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M214.06,5 L 214.06 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M222.02,5 L 222.02 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M237.95,5 L 237.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M245.92,5 L 245.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.88,5 L 253.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-152.28,5 L -152.28 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M325.55,5 L 325.55 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-112.46,5 L -112.46 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-104.49,5 L -104.49 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-96.53,5 L -96.53 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-80.6,5 L -80.6 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-72.64,5 L -72.64 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-64.67,5 L -64.67 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-48.75,5 L -48.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-40.78,5 L -40.78 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-32.82,5 L -32.82 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-16.89,5 L -16.89 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-8.93,5 L -8.93 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-0.96,5 L -0.96 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M14.96,5 L 14.96 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M22.93,5 L 22.93 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M30.89,5 L 30.89 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M46.82,5 L 46.82 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M54.78,5 L 54.78 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M62.75,5 L 62.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M78.67,5 L 78.67 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M86.64,5 L 86.64 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M94.6,5 L 94.6 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M110.53,5 L 110.53 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M118.49,5 L 118.49 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M126.46,5 L 126.46 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M142.39,5 L 142.39 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M150.35,5 L 150.35 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M158.31,5 L 158.31 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M174.24,5 L 174.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M182.2,5 L 182.2 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M190.17,5 L 190.17 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M206.1,5 L 206.1 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M214.06,5 L 214.06 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M222.02,5 L 222.02 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M237.95,5 L 237.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M245.92,5 L 245.92 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M253.88,5 L 253.88 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-794a40be-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-794a40be-8">         <text x="64.58" y="30.84" text-anchor="middle" dy="0.35em" visibility="visible">1</text>         <text x="64.58" y="41.59" text-anchor="middle" dy="0.35em" visibility="visible">2</text>         <text x="80.51" y="52.34" text-anchor="middle" dy="0.35em" visibility="visible">3</text>         <text x="88.48" y="63.09" text-anchor="middle" dy="0.35em" visibility="visible">4</text>         <text x="80.51" y="73.84" text-anchor="middle" dy="0.35em" visibility="visible">5</text>         <text x="64.58" y="63.09" text-anchor="middle" dy="0.35em" visibility="visible">6</text>         <text x="48.66" y="57.71" text-anchor="middle" dy="0.35em" visibility="visible">7</text>         <text x="88.48" y="73.84" text-anchor="middle" dy="0.35em" visibility="visible">8</text>         <text x="96.44" y="84.59" text-anchor="middle" dy="0.35em" visibility="visible">9</text>         <text x="81.35" y="84.59" text-anchor="middle" dy="0.35em" visibility="visible">10</text>         <text x="57.46" y="79.21" text-anchor="middle" dy="0.35em" visibility="visible">11</text>         <text x="33.56" y="68.46" text-anchor="middle" dy="0.35em" visibility="visible">12</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-794a40be-9">         <text x="104.57" y="28.5" dy="0.35em">C</text>         <text x="104.57" y="39.25" dy="0.35em">D</text>         <text x="104.57" y="50" dy="0.35em">O</text>         <text x="104.57" y="60.75" dy="0.35em">E</text>         <text x="104.57" y="71.5" dy="0.35em">B</text>         <text x="104.57" y="82.25" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-794a40be-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-794a40be-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-794a40be-12">             <use xlink:href="#img-794a40be-13" x="110.53" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-794a40be-14">             <use xlink:href="#img-794a40be-15" x="14.96" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-16">         <path fill="none" d="M22.93,66.12 L 22.93 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-17">         <path fill="none" d="M38.86,76.88 L 38.86 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-18">         <path fill="none" d="M70.71,82.25 L 70.71 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-19">         <path fill="none" d="M86.64,82.25 L 86.64 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-20">         <path fill="none" d="M54.78,60.75 L 54.78 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-21">         <path fill="none" d="M70.71,60.75 L 70.71 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-22">         <path fill="none" d="M22.93,66.12 L 38.86 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-23">         <path fill="none" d="M38.86,76.88 L 70.71 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-794a40be-24">         <path fill="none" d="M70.71,82.25 L 86.64 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-25">         <path fill="none" d="M86.64,82.25 L 102.57 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-26">         <path fill="none" d="M70.71,71.5 L 102.57 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-27">         <path fill="none" d="M38.86,55.38 L 54.78 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-28">         <path fill="none" d="M54.78,60.75 L 70.71 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-794a40be-29">         <path fill="none" d="M70.71,60.75 L 86.64 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-30">         <path fill="none" d="M70.71,60.75 L 102.57 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-31">         <path fill="none" d="M54.78,50 L 102.57 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-32">         <path fill="none" d="M22.93,39.25 L 102.57 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-794a40be-33">         <path fill="none" d="M22.93,28.5 L 102.57 28.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-794a40be-34">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-794a40be-35">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-794a40be-36">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-794a40be-37">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-794a40be-38">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-794a40be-39">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-794a40be-40">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-794a40be-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-794a40be-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-794a40be-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-794a40be"); fig.select("#img-794a40be-3")    .init_gadfly(); fig.select("#img-794a40be-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-794a40be-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-794a40be-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-794a40be-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-794a40be-35")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-794a40be-35")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-794a40be-35")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-794a40be-37")    .data("max_pos", 120.42) ; fig.select("#img-794a40be-37")    .data("min_pos", 103.42) ; fig.select("#img-794a40be-37")    .click(Gadfly.zoomslider_track_click); fig.select("#img-794a40be-38")    .data("max_pos", 120.42) ; fig.select("#img-794a40be-38")    .data("min_pos", 103.42) ; fig.select("#img-794a40be-38")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-794a40be-38")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-794a40be-38")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-794a40be-39")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-794a40be-39")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-794a40be-39")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_net1_rotate1_1.png" /></p>
<div class="codehilite"><pre><span></span><span class="n">rootonedge!</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="c"># makes (O,E) outgroup clade</span>
<span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">showNodeNumber</span><span class="o">=</span><span class="kc">true</span><span class="p">)</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-c61fdcc8&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-c61fdcc8-1"> <g clip-path="url(#img-c61fdcc8-2)">   <g id="img-c61fdcc8-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-c61fdcc8-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-c61fdcc8-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-c61fdcc8-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-c61fdcc8-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-c61fdcc8-8">         <text x="115.02" y="73.84" text-anchor="middle" dy="0.35em" visibility="visible">1</text>         <text x="115.02" y="84.59" text-anchor="middle" dy="0.35em" visibility="visible">2</text>         <text x="115.02" y="30.84" text-anchor="middle" dy="0.35em" visibility="visible">3</text>         <text x="115.02" y="41.59" text-anchor="middle" dy="0.35em" visibility="visible">4</text>         <text x="73.1" y="41.59" text-anchor="middle" dy="0.35em" visibility="visible">-5</text>         <text x="51.87" y="36.21" text-anchor="middle" dy="0.35em" visibility="visible">-4</text>         <text x="115.02" y="52.34" text-anchor="middle" dy="0.35em" visibility="visible">6</text>         <text x="115.02" y="63.09" text-anchor="middle" dy="0.35em" visibility="visible">7</text>         <text x="93.78" y="63.09" text-anchor="middle" dy="0.35em" visibility="visible">5</text>         <text x="73.1" y="57.71" text-anchor="middle" dy="0.35em" visibility="visible">-6</text>         <text x="51.87" y="68.46" text-anchor="middle" dy="0.35em" visibility="visible">-3</text>         <text x="94.34" y="79.21" text-anchor="middle" dy="0.35em" visibility="visible">-2</text>         <text x="30.07" y="52.34" text-anchor="middle" dy="0.35em" visibility="visible">8</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-c61fdcc8-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="50" dy="0.35em">B</text>         <text x="115.18" y="60.75" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-c61fdcc8-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-c61fdcc8-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-c61fdcc8-12">             <use xlink:href="#img-c61fdcc8-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-c61fdcc8-14">             <use xlink:href="#img-c61fdcc8-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-20">         <path fill="none" d="M91.95,60.75 L 91.95 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-c61fdcc8-26">         <path fill="none" d="M70.71,60.75 L 91.95 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-27">         <path fill="none" d="M91.95,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-28">         <path fill="none" d="M70.71,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-c61fdcc8-31">         <path fill="none" d="M70.71,39.25 L 91.95 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-c61fdcc8-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-c61fdcc8-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-c61fdcc8-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-c61fdcc8-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-c61fdcc8-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-c61fdcc8-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-c61fdcc8-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-c61fdcc8-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-c61fdcc8-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-c61fdcc8-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-c61fdcc8-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-c61fdcc8"); fig.select("#img-c61fdcc8-3")    .init_gadfly(); fig.select("#img-c61fdcc8-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-c61fdcc8-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-c61fdcc8-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-c61fdcc8-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-c61fdcc8-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-c61fdcc8-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-c61fdcc8-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-c61fdcc8-39")    .data("max_pos", 120.42) ; fig.select("#img-c61fdcc8-39")    .data("min_pos", 103.42) ; fig.select("#img-c61fdcc8-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-c61fdcc8-40")    .data("max_pos", 120.42) ; fig.select("#img-c61fdcc8-40")    .data("min_pos", 103.42) ; fig.select("#img-c61fdcc8-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-c61fdcc8-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-c61fdcc8-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-c61fdcc8-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-c61fdcc8-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-c61fdcc8-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_net1_rotate1_2.png" /></p>
<p>edges cross: but rotating at node -6 should remove this crossing of edges</p>
<div class="codehilite"><pre><span></span><span class="n">rotate!</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">showGamma</span><span class="o">=</span><span class="kc">true</span><span class="p">)</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-910949ef&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-910949ef-1"> <g clip-path="url(#img-910949ef-2)">   <g id="img-910949ef-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-910949ef-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-910949ef-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-910949ef-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-910949ef-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#00688B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-910949ef-8">         <text x="81.33" y="52" text-anchor="middle" dy="0.6em">0.804</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#00BFFF" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-910949ef-9">         <text x="81.33" y="46.62" text-anchor="middle" dy="0.6em">0.196</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-910949ef-10">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-910949ef-11">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-910949ef-12">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-910949ef-13">             <use xlink:href="#img-910949ef-14" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-910949ef-15">             <use xlink:href="#img-910949ef-16" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-17">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-18">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-19">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-20">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-21">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-22">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-23">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-24">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-25">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-26">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-910949ef-27">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-28">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-29">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-30">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-31">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-910949ef-32">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-33">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-34">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-35">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-910949ef-36">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-910949ef-37">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-910949ef-38">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-910949ef-39">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-910949ef-40">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-910949ef-41">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-910949ef-42">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-910949ef-43">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-910949ef-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-910949ef-14">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-910949ef-16">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-910949ef"); fig.select("#img-910949ef-3")    .init_gadfly(); fig.select("#img-910949ef-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-910949ef-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-910949ef-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-910949ef-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-910949ef-38")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-910949ef-38")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-910949ef-38")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-910949ef-40")    .data("max_pos", 120.42) ; fig.select("#img-910949ef-40")    .data("min_pos", 103.42) ; fig.select("#img-910949ef-40")    .click(Gadfly.zoomslider_track_click); fig.select("#img-910949ef-41")    .data("max_pos", 120.42) ; fig.select("#img-910949ef-41")    .data("min_pos", 103.42) ; fig.select("#img-910949ef-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-910949ef-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-910949ef-41")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-910949ef-42")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-910949ef-42")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-910949ef-42")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_net1_rotate2_1.png" /></p>
<p>We can now summarize our bootstrap networks. The functions <code>treeEdgesBootstrap</code> and <code>hybridBootstrapSupport</code> read all bootstrap networks and map the edges / nodes onto a reference network: here net1.</p>
<div class="codehilite"><pre><span></span><span class="n">BSe_tree</span><span class="p">,</span> <span class="n">tree1</span> <span class="o">=</span> <span class="n">treeEdgesBootstrap</span><span class="p">(</span><span class="n">bootnet</span><span class="p">,</span><span class="n">net1</span><span class="p">)</span>
</pre></div>


<p>This calculates the major tree <code>tree1</code> displayed in <code>net1</code>, that is, the tree obtained by following the major parent (&gt;0.5) of each hybrid node. This tree can be visualized like this, with edge numbers shown for later use.</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">tree1</span><span class="p">,</span> <span class="n">showEdgeNumber</span><span class="o">=</span><span class="kc">true</span><span class="p">)</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-7b742d99&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-7b742d99-1"> <g clip-path="url(#img-7b742d99-2)">   <g id="img-7b742d99-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-7b742d99-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-7b742d99-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-7b742d99-6">       <path fill="none" d="M-145.91,5 L -145.91 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M287.33,5 L 287.33 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-115.32,5 L -115.32 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-110.23,5 L -110.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-105.13,5 L -105.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-100.03,5 L -100.03 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-89.84,5 L -89.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-84.74,5 L -84.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-79.65,5 L -79.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-74.55,5 L -74.55 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-64.36,5 L -64.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-59.26,5 L -59.26 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-54.16,5 L -54.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-49.07,5 L -49.07 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-38.87,5 L -38.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-33.77,5 L -33.77 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-28.68,5 L -28.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-23.58,5 L -23.58 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-13.39,5 L -13.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-8.29,5 L -8.29 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-3.19,5 L -3.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M1.9,5 L 1.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M12.1,5 L 12.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M17.19,5 L 17.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M22.29,5 L 22.29 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M27.39,5 L 27.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M37.58,5 L 37.58 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M42.68,5 L 42.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M47.77,5 L 47.77 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M52.87,5 L 52.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M63.07,5 L 63.07 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M68.16,5 L 68.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M73.26,5 L 73.26 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M78.36,5 L 78.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M88.55,5 L 88.55 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M93.65,5 L 93.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M98.74,5 L 98.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M103.84,5 L 103.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M114.03,5 L 114.03 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M119.13,5 L 119.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M124.23,5 L 124.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M129.32,5 L 129.32 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M139.52,5 L 139.52 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M144.62,5 L 144.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M149.71,5 L 149.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M154.81,5 L 154.81 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M165,5 L 165 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M170.1,5 L 170.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M175.2,5 L 175.2 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M180.29,5 L 180.29 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M190.49,5 L 190.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M195.58,5 L 195.58 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M200.68,5 L 200.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M205.78,5 L 205.78 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.97,5 L 215.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M221.07,5 L 221.07 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M226.16,5 L 226.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M231.26,5 L 231.26 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M241.46,5 L 241.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M246.55,5 L 246.55 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M251.65,5 L 251.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M256.75,5 L 256.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-7b742d99-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-7b742d99-8">         <text x="98.03" y="73.84" text-anchor="middle" dy="0.35em" visibility="visible">1</text>         <text x="98.03" y="84.59" text-anchor="middle" dy="0.35em" visibility="visible">2</text>         <text x="98.03" y="30.84" text-anchor="middle" dy="0.35em" visibility="visible">3</text>         <text x="98.03" y="41.59" text-anchor="middle" dy="0.35em" visibility="visible">4</text>         <text x="59.81" y="36.21" text-anchor="middle" dy="0.35em" visibility="visible">7</text>         <text x="98.03" y="52.34" text-anchor="middle" dy="0.35em" visibility="visible">8</text>         <text x="98.03" y="63.09" text-anchor="middle" dy="0.35em" visibility="visible">9</text>         <text x="73.38" y="57.71" text-anchor="middle" dy="0.35em" visibility="visible">11</text>         <text x="73.38" y="79.21" text-anchor="middle" dy="0.35em" visibility="visible">12</text>         <text x="47.9" y="68.46" text-anchor="middle" dy="0.35em" visibility="visible">13</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-7b742d99-9">         <text x="110.94" y="71.5" dy="0.35em">C</text>         <text x="110.94" y="82.25" dy="0.35em">D</text>         <text x="110.94" y="28.5" dy="0.35em">O</text>         <text x="110.94" y="39.25" dy="0.35em">E</text>         <text x="110.94" y="50" dy="0.35em">B</text>         <text x="110.94" y="60.75" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-7b742d99-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-7b742d99-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-7b742d99-12">             <use xlink:href="#img-7b742d99-13" x="116.58" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-7b742d99-14">             <use xlink:href="#img-7b742d99-15" x="24.84" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-16">         <path fill="none" d="M32.48,66.12 L 32.48 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-17">         <path fill="none" d="M83.45,82.25 L 83.45 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-18">         <path fill="none" d="M57.97,76.88 L 57.97 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-19">         <path fill="none" d="M83.45,60.75 L 83.45 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-20">         <path fill="none" d="M83.45,39.25 L 83.45 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-21">         <path fill="none" d="M32.48,66.12 L 57.97 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-22">         <path fill="none" d="M57.97,76.88 L 83.45 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-23">         <path fill="none" d="M57.97,55.38 L 83.45 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-24">         <path fill="none" d="M83.45,60.75 L 108.94 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-25">         <path fill="none" d="M83.45,50 L 108.94 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-26">         <path fill="none" d="M32.48,33.88 L 83.45 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-27">         <path fill="none" d="M83.45,39.25 L 108.94 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-28">         <path fill="none" d="M83.45,28.5 L 108.94 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-29">         <path fill="none" d="M83.45,82.25 L 108.94 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-7b742d99-30">         <path fill="none" d="M83.45,71.5 L 108.94 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-7b742d99-31">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-7b742d99-32">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-7b742d99-33">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-7b742d99-34">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-7b742d99-35">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-7b742d99-36">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-7b742d99-37">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-7b742d99-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-7b742d99-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-7b742d99-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-7b742d99"); fig.select("#img-7b742d99-3")    .init_gadfly(); fig.select("#img-7b742d99-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-7b742d99-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-7b742d99-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-7b742d99-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-7b742d99-32")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-7b742d99-32")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-7b742d99-32")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-7b742d99-34")    .data("max_pos", 120.42) ; fig.select("#img-7b742d99-34")    .data("min_pos", 103.42) ; fig.select("#img-7b742d99-34")    .click(Gadfly.zoomslider_track_click); fig.select("#img-7b742d99-35")    .data("max_pos", 120.42) ; fig.select("#img-7b742d99-35")    .data("min_pos", 103.42) ; fig.select("#img-7b742d99-35")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-7b742d99-35")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-7b742d99-35")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-7b742d99-36")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-7b742d99-36")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-7b742d99-36")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_major_tree_1.png" /></p>
<p>Next, we can look at bootstrap table <code>BSe_tree</code>, which has one row for each tree edge in <code>net1</code>. One column contains the edge number (same as shown in the plot) and another column contains the edge bootstrap support: the proportion of bootstrap replicates in which this edge was found in the major tree of the inferred network. We can see the full bootstrap table and see which tree edges have bootstrap support lower than 100% (none here) with</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">showall</span><span class="p">(</span><span class="n">BSe_tree</span><span class="p">)</span>
<span class="mi">3</span><span class="n">2</span> <span class="n">DataFrames</span><span class="o">.</span><span class="n">DataFrame</span>
<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">edgeNumber</span> <span class="n"></span> <span class="n">proportion</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="mi">13</span>         <span class="n"></span> <span class="mf">100.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="mi">11</span>         <span class="n"></span> <span class="mf">100.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="mi">12</span>         <span class="n"></span> <span class="mf">100.0</span>      <span class="n"></span>
<span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSe_tree</span><span class="p">[</span><span class="n">BSe_tree</span><span class="p">[</span><span class="o">:</span><span class="n">proportion</span><span class="p">]</span> <span class="o">.&lt;</span> <span class="mf">100.0</span><span class="p">,</span> <span class="o">:</span><span class="p">]</span>
<span class="mi">0</span><span class="n">2</span> <span class="n">DataFrames</span><span class="o">.</span><span class="n">DataFrame</span>
</pre></div>


<p>Finally, we can map the bootstrap proportions onto the network or its main tree by passing the bootstrap table to the <code>edgeLabel</code> option of <code>plot</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">tree1</span><span class="p">,</span> <span class="n">edgeLabel</span><span class="o">=</span><span class="n">BSe_tree</span><span class="p">)</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-b12b6300&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-b12b6300-1"> <g clip-path="url(#img-b12b6300-2)">   <g id="img-b12b6300-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-b12b6300-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-b12b6300-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-b12b6300-6">       <path fill="none" d="M-145.91,5 L -145.91 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M287.33,5 L 287.33 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-115.32,5 L -115.32 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-110.23,5 L -110.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-105.13,5 L -105.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-100.03,5 L -100.03 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-89.84,5 L -89.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-84.74,5 L -84.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-79.65,5 L -79.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-74.55,5 L -74.55 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-64.36,5 L -64.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-59.26,5 L -59.26 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-54.16,5 L -54.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-49.07,5 L -49.07 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-38.87,5 L -38.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-33.77,5 L -33.77 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-28.68,5 L -28.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-23.58,5 L -23.58 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-13.39,5 L -13.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-8.29,5 L -8.29 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-3.19,5 L -3.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M1.9,5 L 1.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M12.1,5 L 12.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M17.19,5 L 17.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M22.29,5 L 22.29 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M27.39,5 L 27.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M37.58,5 L 37.58 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M42.68,5 L 42.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M47.77,5 L 47.77 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M52.87,5 L 52.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M63.07,5 L 63.07 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M68.16,5 L 68.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M73.26,5 L 73.26 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M78.36,5 L 78.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M88.55,5 L 88.55 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M93.65,5 L 93.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M98.74,5 L 98.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M103.84,5 L 103.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M114.03,5 L 114.03 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M119.13,5 L 119.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M124.23,5 L 124.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M129.32,5 L 129.32 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M139.52,5 L 139.52 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M144.62,5 L 144.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M149.71,5 L 149.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M154.81,5 L 154.81 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M165,5 L 165 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M170.1,5 L 170.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M175.2,5 L 175.2 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M180.29,5 L 180.29 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M190.49,5 L 190.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M195.58,5 L 195.58 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M200.68,5 L 200.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M205.78,5 L 205.78 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.97,5 L 215.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M221.07,5 L 221.07 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M226.16,5 L 226.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M231.26,5 L 231.26 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M241.46,5 L 241.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M246.55,5 L 246.55 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M251.65,5 L 251.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M256.75,5 L 256.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-b12b6300-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-b12b6300-8">         <text x="96.19" y="69.5" text-anchor="middle"></text>         <text x="96.19" y="80.25" text-anchor="middle"></text>         <text x="96.19" y="26.5" text-anchor="middle"></text>         <text x="96.19" y="37.25" text-anchor="middle"></text>         <text x="57.97" y="31.88" text-anchor="middle"></text>         <text x="96.19" y="48" text-anchor="middle"></text>         <text x="96.19" y="58.75" text-anchor="middle"></text>         <text x="70.71" y="53.38" text-anchor="middle">100</text>         <text x="70.71" y="74.88" text-anchor="middle">100</text>         <text x="45.23" y="64.12" text-anchor="middle">100</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-b12b6300-9">         <text x="110.94" y="71.5" dy="0.35em">C</text>         <text x="110.94" y="82.25" dy="0.35em">D</text>         <text x="110.94" y="28.5" dy="0.35em">O</text>         <text x="110.94" y="39.25" dy="0.35em">E</text>         <text x="110.94" y="50" dy="0.35em">B</text>         <text x="110.94" y="60.75" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-b12b6300-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-b12b6300-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-b12b6300-12">             <use xlink:href="#img-b12b6300-13" x="116.58" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-b12b6300-14">             <use xlink:href="#img-b12b6300-15" x="24.84" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-16">         <path fill="none" d="M32.48,66.12 L 32.48 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-17">         <path fill="none" d="M83.45,82.25 L 83.45 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-18">         <path fill="none" d="M57.97,76.88 L 57.97 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-19">         <path fill="none" d="M83.45,60.75 L 83.45 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-20">         <path fill="none" d="M83.45,39.25 L 83.45 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-21">         <path fill="none" d="M32.48,66.12 L 57.97 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-22">         <path fill="none" d="M57.97,76.88 L 83.45 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-23">         <path fill="none" d="M57.97,55.38 L 83.45 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-24">         <path fill="none" d="M83.45,60.75 L 108.94 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-25">         <path fill="none" d="M83.45,50 L 108.94 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-26">         <path fill="none" d="M32.48,33.88 L 83.45 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-27">         <path fill="none" d="M83.45,39.25 L 108.94 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-28">         <path fill="none" d="M83.45,28.5 L 108.94 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-29">         <path fill="none" d="M83.45,82.25 L 108.94 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b12b6300-30">         <path fill="none" d="M83.45,71.5 L 108.94 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-b12b6300-31">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-b12b6300-32">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-b12b6300-33">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-b12b6300-34">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-b12b6300-35">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-b12b6300-36">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-b12b6300-37">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-b12b6300-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-b12b6300-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-b12b6300-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-b12b6300"); fig.select("#img-b12b6300-3")    .init_gadfly(); fig.select("#img-b12b6300-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-b12b6300-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-b12b6300-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-b12b6300-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-b12b6300-32")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-b12b6300-32")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-b12b6300-32")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-b12b6300-34")    .data("max_pos", 120.42) ; fig.select("#img-b12b6300-34")    .data("min_pos", 103.42) ; fig.select("#img-b12b6300-34")    .click(Gadfly.zoomslider_track_click); fig.select("#img-b12b6300-35")    .data("max_pos", 120.42) ; fig.select("#img-b12b6300-35")    .data("min_pos", 103.42) ; fig.select("#img-b12b6300-35")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-b12b6300-35")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-b12b6300-35")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-b12b6300-36")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-b12b6300-36")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-b12b6300-36")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_tree_net_1.png" /></p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span>  <span class="n">edgeLabel</span><span class="o">=</span><span class="n">BSe_tree</span><span class="p">)</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-b762778e&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-b762778e-1"> <g clip-path="url(#img-b762778e-2)">   <g id="img-b762778e-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-b762778e-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-b762778e-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-b762778e-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-b762778e-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-b762778e-8">         <text x="102.57" y="69.5" text-anchor="middle"></text>         <text x="102.57" y="80.25" text-anchor="middle"></text>         <text x="81.33" y="26.5" text-anchor="middle"></text>         <text x="91.95" y="37.25" text-anchor="middle"></text>         <text x="81.33" y="42.62" text-anchor="middle"></text>         <text x="60.09" y="37.25" text-anchor="middle"></text>         <text x="38.86" y="31.88" text-anchor="middle"></text>         <text x="91.95" y="58.75" text-anchor="middle"></text>         <text x="102.57" y="48" text-anchor="middle"></text>         <text x="81.33" y="48" text-anchor="middle"></text>         <text x="60.09" y="53.38" text-anchor="middle">100</text>         <text x="70.71" y="74.88" text-anchor="middle">100</text>         <text x="38.86" y="64.12" text-anchor="middle">100</text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-b762778e-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-b762778e-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-b762778e-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-b762778e-12">             <use xlink:href="#img-b762778e-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-b762778e-14">             <use xlink:href="#img-b762778e-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-b762778e-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-b762778e-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-b762778e-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-b762778e-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-b762778e-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-b762778e-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-b762778e-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-b762778e-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-b762778e-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-b762778e-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-b762778e-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-b762778e-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-b762778e-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-b762778e"); fig.select("#img-b762778e-3")    .init_gadfly(); fig.select("#img-b762778e-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-b762778e-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-b762778e-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-b762778e-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-b762778e-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-b762778e-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-b762778e-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-b762778e-39")    .data("max_pos", 120.42) ; fig.select("#img-b762778e-39")    .data("min_pos", 103.42) ; fig.select("#img-b762778e-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-b762778e-40")    .data("max_pos", 120.42) ; fig.select("#img-b762778e-40")    .data("min_pos", 103.42) ; fig.select("#img-b762778e-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-b762778e-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-b762778e-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-b762778e-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-b762778e-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-b762778e-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_tree_net_2.png" /></p>
<p>(Here, it is important that the numbers assigned to edges when building the boostrap table those in <code>net1</code> at the time correspond to the current edge numbers in <code>tree1</code> and <code>net1</code>. That was the purpose of reading the network from the output file of <code>snaq!</code> earlier, for consistency across different Julia sessions.)</p>
<p>If we wanted to plot only certain bootstrap values, like those below 100% (1.0), we could do this:</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">edgeLabel</span><span class="o">=</span><span class="n">BSe_tree</span><span class="p">[</span><span class="n">BSe_tree</span><span class="p">[</span><span class="o">:</span><span class="n">proportion</span><span class="p">]</span> <span class="o">.&lt;</span> <span class="mf">100.0</span><span class="p">,</span> <span class="o">:</span><span class="p">])</span>
</pre></div>


<p><a id='support-for-hybrid-edges-and-hybrid-nodes-1'></a></p>
<h2 id="support-for-hybrid-edges-and-hybrid-nodes">support for hybrid edges and hybrid nodes</h2>
<p>Summarizing the placement of reticulations is not standard. The function <code>hybridBootstrapSupport</code> attempts to do so. The descendants of a given hybrid node form the "recipient" or "hybrid" clade, and is obtained after removing all other reticulations. If reticulation is due to gene flow or introgression, the minor hybrid edge (with &lt;0.5) represents this event. The descendants of the lineage from which gene flow originated is then a second "sister" of the hybrid clade. Because of the reticulation event, the hybrid clade has 2 sister clades, not 1: the major sister (through the major hybrid edge with &gt;0.5) and the minor sister (through the minor hybrid edge with &lt;0.5). Note that the network says <em>nothing</em> about the process: its shows the <em>relationships</em> only. We can calculate the frequency that each clade is a hybrid clade, or a major or minor sister for some other hybrid, in the bootstrap networks:</p>
<div class="codehilite"><pre><span></span><span class="n">BSn</span><span class="p">,</span> <span class="n">BSe</span><span class="p">,</span> <span class="n">BSc</span><span class="p">,</span> <span class="n">BSgam</span><span class="p">,</span> <span class="n">BSedgenum</span> <span class="o">=</span> <span class="n">hybridBootstrapSupport</span><span class="p">(</span><span class="n">bootnet</span><span class="p">,</span> <span class="n">net1</span><span class="p">);</span>
</pre></div>


<p>Let's look at the results. We can list all the clades and the percentage of bootstrap networks (bootstrap support) in which each clade is a hybrid or sister to a hybrid:</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSn</span>
<span class="mi">7</span><span class="n">9</span> <span class="n">DataFrames</span><span class="o">.</span><span class="n">DataFrame</span>
<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">clade</span>      <span class="n"></span> <span class="n">node</span> <span class="n"></span> <span class="n">hybridnode</span> <span class="n"></span> <span class="n">edge</span> <span class="n"></span> <span class="n">BS_hybrid</span> <span class="n"></span> <span class="n">BS_sister</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="s">&quot;H7&quot;</span>       <span class="n"></span> <span class="mi">7</span>    <span class="n"></span> <span class="mi">5</span>          <span class="n"></span> <span class="mi">9</span>    <span class="n"></span> <span class="mf">33.0</span>      <span class="n"></span> <span class="mf">51.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="s">&quot;c_minus2&quot;</span> <span class="n"></span> <span class="o">-</span><span class="mi">2</span>   <span class="n"></span> <span class="o">-</span><span class="mi">2</span>         <span class="n"></span> <span class="mi">12</span>   <span class="n"></span> <span class="mf">0.0</span>       <span class="n"></span> <span class="mf">55.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="s">&quot;E&quot;</span>        <span class="n"></span> <span class="mi">4</span>    <span class="n"></span> <span class="mi">4</span>          <span class="n"></span> <span class="mi">4</span>    <span class="n"></span> <span class="mf">12.0</span>      <span class="n"></span> <span class="mf">41.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">4</span>   <span class="n"></span> <span class="s">&quot;c_minus4&quot;</span> <span class="n"></span> <span class="o">-</span><span class="mi">4</span>   <span class="n"></span> <span class="o">-</span><span class="mi">4</span>         <span class="n"></span> <span class="mi">7</span>    <span class="n"></span> <span class="mf">44.0</span>      <span class="n"></span> <span class="mf">0.0</span>       <span class="n"></span>
<span class="n"></span> <span class="mi">5</span>   <span class="n"></span> <span class="s">&quot;B&quot;</span>        <span class="n"></span> <span class="mi">6</span>    <span class="n"></span> <span class="mi">6</span>          <span class="n"></span> <span class="mi">8</span>    <span class="n"></span> <span class="mf">2.0</span>       <span class="n"></span> <span class="mf">33.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">6</span>   <span class="n"></span> <span class="s">&quot;c_minus6&quot;</span> <span class="n"></span> <span class="o">-</span><span class="mi">6</span>   <span class="n"></span> <span class="o">-</span><span class="mi">6</span>         <span class="n"></span> <span class="mi">11</span>   <span class="n"></span> <span class="mf">9.0</span>       <span class="n"></span> <span class="mf">7.0</span>       <span class="n"></span>
<span class="n"></span> <span class="mi">7</span>   <span class="n"></span> <span class="s">&quot;O&quot;</span>        <span class="n"></span> <span class="mi">3</span>    <span class="n"></span> <span class="mi">3</span>          <span class="n"></span> <span class="mi">3</span>    <span class="n"></span> <span class="mf">0.0</span>       <span class="n"></span> <span class="mf">13.0</span>      <span class="n"></span>

<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">BS_major_sister</span> <span class="n"></span> <span class="n">BS_minor_sister</span> <span class="n"></span> <span class="n">BS_hybrid_samesisters</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="mf">2.0</span>             <span class="n"></span> <span class="mf">49.0</span>            <span class="n"></span> <span class="mf">32.0</span>                  <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="mf">53.0</span>            <span class="n"></span> <span class="mf">2.0</span>             <span class="n"></span> <span class="n">NA</span>                    <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="mf">0.0</span>             <span class="n"></span> <span class="mf">41.0</span>            <span class="n"></span> <span class="n">NA</span>                    <span class="n"></span>
<span class="n"></span> <span class="mi">4</span>   <span class="n"></span> <span class="mf">0.0</span>             <span class="n"></span> <span class="mf">0.0</span>             <span class="n"></span> <span class="n">NA</span>                    <span class="n"></span>
<span class="n"></span> <span class="mi">5</span>   <span class="n"></span> <span class="mf">33.0</span>            <span class="n"></span> <span class="mf">0.0</span>             <span class="n"></span> <span class="n">NA</span>                    <span class="n"></span>
<span class="n"></span> <span class="mi">6</span>   <span class="n"></span> <span class="mf">0.0</span>             <span class="n"></span> <span class="mf">7.0</span>             <span class="n"></span> <span class="n">NA</span>                    <span class="n"></span>
<span class="n"></span> <span class="mi">7</span>   <span class="n"></span> <span class="mf">12.0</span>            <span class="n"></span> <span class="mf">1.0</span>             <span class="n"></span> <span class="n">NA</span>                    <span class="n"></span>
</pre></div>


<p>If a clade contains a single taxon, it is listed with its taxon name. The clade found in the best network is listed with its tag, starting with H (e.g. "H7"). The name of other clades start with "c_" followed by their number in the best network, if they do appear in the best network. The node numbers, as used internally in the best network, are listed in a separate column. They can be used later to display the bootstrap support values onto the network. Various columns give the bootstrap support that each clade is a hybrid, or a (major/minor) sister to a hybrid. The last column gives the bootstrap support for the full relationship in the best network: same hybrid with same two sisters. These bootstrap values are associated with nodes (or possibly, their parent edges).</p>
<p>To see what is the clade named "H7", for instance:</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSc</span> <span class="c"># this might be too big</span>
<span class="mi">6</span><span class="n">8</span> <span class="n">DataFrames</span><span class="o">.</span><span class="n">DataFrame</span>
<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">taxa</span> <span class="n"></span> <span class="n">O</span>     <span class="n"></span> <span class="n">E</span>     <span class="n"></span> <span class="n">c_minus4</span> <span class="n"></span> <span class="n">B</span>     <span class="n"></span> <span class="n">H7</span>    <span class="n"></span> <span class="n">c_minus6</span> <span class="n"></span> <span class="n">c_minus2</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="s">&quot;C&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">true</span>     <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="s">&quot;D&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">true</span>     <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="s">&quot;O&quot;</span>  <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n"></span> <span class="mi">4</span>   <span class="n"></span> <span class="s">&quot;E&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n"></span> <span class="mi">5</span>   <span class="n"></span> <span class="s">&quot;B&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n"></span> <span class="mi">6</span>   <span class="n"></span> <span class="s">&quot;A&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">showall</span><span class="p">(</span><span class="n">BSc</span><span class="p">)</span>
<span class="mi">6</span><span class="n">8</span> <span class="n">DataFrames</span><span class="o">.</span><span class="n">DataFrame</span>
<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">taxa</span> <span class="n"></span> <span class="n">O</span>     <span class="n"></span> <span class="n">E</span>     <span class="n"></span> <span class="n">c_minus4</span> <span class="n"></span> <span class="n">B</span>     <span class="n"></span> <span class="n">H7</span>    <span class="n"></span> <span class="n">c_minus6</span> <span class="n"></span> <span class="n">c_minus2</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="s">&quot;C&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">true</span>     <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="s">&quot;D&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">true</span>     <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="s">&quot;O&quot;</span>  <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n"></span> <span class="mi">4</span>   <span class="n"></span> <span class="s">&quot;E&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n"></span> <span class="mi">5</span>   <span class="n"></span> <span class="s">&quot;B&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n"></span> <span class="mi">6</span>   <span class="n"></span> <span class="s">&quot;A&quot;</span>  <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">false</span>    <span class="n"></span> <span class="kc">false</span> <span class="n"></span> <span class="kc">true</span>  <span class="n"></span> <span class="kc">true</span>     <span class="n"></span> <span class="kc">false</span>    <span class="n"></span>
<span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSc</span><span class="p">[</span><span class="o">:</span><span class="n">taxa</span><span class="p">][</span><span class="n">BSc</span><span class="p">[</span><span class="o">:</span><span class="n">H7</span><span class="p">]]</span>
<span class="mi">1</span><span class="o">-</span><span class="n">element</span> <span class="n">DataArrays</span><span class="o">.</span><span class="n">DataArray</span><span class="p">{</span><span class="n">String</span><span class="p">,</span><span class="mi">1</span><span class="p">}</span><span class="o">:</span>
 <span class="s">&quot;A&quot;</span>
</pre></div>


<p>We can also get bootstrap values associated with edges, to describe the support that a given hybrid clade has a given sister clade.</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSe</span>
<span class="mi">12</span><span class="n">8</span> <span class="n">DataFrames</span><span class="o">.</span><span class="n">DataFrame</span>
<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">edge</span> <span class="n"></span> <span class="n">hybrid_clade</span> <span class="n"></span> <span class="n">hybrid</span> <span class="n"></span> <span class="n">sister_clade</span> <span class="n"></span> <span class="n">sister</span> <span class="n"></span> <span class="n">BS_hybrid_edge</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="mi">10</span>   <span class="n"></span> <span class="s">&quot;H7&quot;</span>         <span class="n"></span> <span class="mi">5</span>      <span class="n"></span> <span class="s">&quot;B&quot;</span>          <span class="n"></span> <span class="mi">6</span>      <span class="n"></span> <span class="mf">33.0</span>           <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="mi">5</span>    <span class="n"></span> <span class="s">&quot;H7&quot;</span>         <span class="n"></span> <span class="mi">5</span>      <span class="n"></span> <span class="s">&quot;E&quot;</span>          <span class="n"></span> <span class="mi">4</span>      <span class="n"></span> <span class="mf">32.0</span>           <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;c_minus4&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">4</span>     <span class="n"></span> <span class="s">&quot;c_minus2&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">2</span>     <span class="n"></span> <span class="mf">44.0</span>           <span class="n"></span>
<span class="n"></span> <span class="mi">4</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;c_minus4&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">4</span>     <span class="n"></span> <span class="s">&quot;H7&quot;</span>         <span class="n"></span> <span class="mi">7</span>      <span class="n"></span> <span class="mf">44.0</span>           <span class="n"></span>
<span class="n"></span> <span class="mi">5</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;E&quot;</span>          <span class="n"></span> <span class="mi">4</span>      <span class="n"></span> <span class="s">&quot;O&quot;</span>          <span class="n"></span> <span class="mi">3</span>      <span class="n"></span> <span class="mf">12.0</span>           <span class="n"></span>
<span class="n"></span> <span class="mi">6</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;c_minus6&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">6</span>     <span class="n"></span> <span class="s">&quot;c_minus2&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">2</span>     <span class="n"></span> <span class="mf">9.0</span>            <span class="n"></span>
<span class="n"></span> <span class="mi">7</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;c_minus6&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">6</span>     <span class="n"></span> <span class="s">&quot;E&quot;</span>          <span class="n"></span> <span class="mi">4</span>      <span class="n"></span> <span class="mf">9.0</span>            <span class="n"></span>
<span class="n"></span> <span class="mi">8</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;E&quot;</span>          <span class="n"></span> <span class="mi">4</span>      <span class="n"></span> <span class="s">&quot;c_minus6&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">6</span>     <span class="n"></span> <span class="mf">7.0</span>            <span class="n"></span>
<span class="n"></span> <span class="mi">9</span>   <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;E&quot;</span>          <span class="n"></span> <span class="mi">4</span>      <span class="n"></span> <span class="s">&quot;H7&quot;</span>         <span class="n"></span> <span class="mi">7</span>      <span class="n"></span> <span class="mf">5.0</span>            <span class="n"></span>
<span class="n"></span> <span class="mi">10</span>  <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;B&quot;</span>          <span class="n"></span> <span class="mi">6</span>      <span class="n"></span> <span class="s">&quot;H7&quot;</span>         <span class="n"></span> <span class="mi">7</span>      <span class="n"></span> <span class="mf">2.0</span>            <span class="n"></span>
<span class="n"></span> <span class="mi">11</span>  <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;B&quot;</span>          <span class="n"></span> <span class="mi">6</span>      <span class="n"></span> <span class="s">&quot;c_minus2&quot;</span>   <span class="n"></span> <span class="o">-</span><span class="mi">2</span>     <span class="n"></span> <span class="mf">2.0</span>            <span class="n"></span>
<span class="n"></span> <span class="mi">12</span>  <span class="n"></span> <span class="n">NA</span>   <span class="n"></span> <span class="s">&quot;H7&quot;</span>         <span class="n"></span> <span class="mi">5</span>      <span class="n"></span> <span class="s">&quot;O&quot;</span>          <span class="n"></span> <span class="mi">3</span>      <span class="n"></span> <span class="mf">1.0</span>            <span class="n"></span>

<span class="n"></span> <span class="n">Row</span> <span class="n"></span> <span class="n">BS_major</span> <span class="n"></span> <span class="n">BS_minor</span> <span class="n"></span>
<span class="n"></span>
<span class="n"></span> <span class="mi">1</span>   <span class="n"></span> <span class="mf">33.0</span>     <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">2</span>   <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">32.0</span>     <span class="n"></span>
<span class="n"></span> <span class="mi">3</span>   <span class="n"></span> <span class="mf">44.0</span>     <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">4</span>   <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">44.0</span>     <span class="n"></span>
<span class="n"></span> <span class="mi">5</span>   <span class="n"></span> <span class="mf">12.0</span>     <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">6</span>   <span class="n"></span> <span class="mf">9.0</span>      <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">7</span>   <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">9.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">8</span>   <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">7.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">9</span>   <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">5.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">10</span>  <span class="n"></span> <span class="mf">2.0</span>      <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">11</span>  <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">2.0</span>      <span class="n"></span>
<span class="n"></span> <span class="mi">12</span>  <span class="n"></span> <span class="mf">0.0</span>      <span class="n"></span> <span class="mf">1.0</span>      <span class="n"></span>
</pre></div>


<p>Here, each row describes a pair of 2 clades: one being the hybrid, the other being its sister, connected by a hybrid edge. The first rows corresponds to hybrid edges in the best network. Other rows correspond to edges seen in bootstrap networks but not in the reference network.</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSedgenum</span>
<span class="mi">2</span><span class="o">-</span><span class="n">element</span> <span class="kt">Array</span><span class="p">{</span><span class="kt">Int64</span><span class="p">,</span><span class="mi">1</span><span class="p">}</span><span class="o">:</span>
 <span class="mi">10</span>
  <span class="mi">5</span>
</pre></div>


<p>lists all the hybrid edges in the best network, two for each hybrid node: the major parent edge and then the minor parent edge. In our case, there is only one reticulation, so only 2 hybrid edges.</p>
<p>We can plot the bootstrap values of the 2 hybrid edges in the best network:</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">edgeLabel</span><span class="o">=</span><span class="n">BSe</span><span class="p">[[</span><span class="o">:</span><span class="n">edge</span><span class="p">,</span><span class="o">:</span><span class="n">BS_hybrid_edge</span><span class="p">]])</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-1ca431a4&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-1ca431a4-1"> <g clip-path="url(#img-1ca431a4-2)">   <g id="img-1ca431a4-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-1ca431a4-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-1ca431a4-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-1ca431a4-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-1ca431a4-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-1ca431a4-8">         <text x="102.57" y="69.5" text-anchor="middle"></text>         <text x="102.57" y="80.25" text-anchor="middle"></text>         <text x="81.33" y="26.5" text-anchor="middle"></text>         <text x="91.95" y="37.25" text-anchor="middle"></text>         <text x="81.33" y="42.62" text-anchor="middle">32</text>         <text x="60.09" y="37.25" text-anchor="middle"></text>         <text x="38.86" y="31.88" text-anchor="middle"></text>         <text x="91.95" y="58.75" text-anchor="middle"></text>         <text x="102.57" y="48" text-anchor="middle"></text>         <text x="81.33" y="48" text-anchor="middle">33</text>         <text x="60.09" y="53.38" text-anchor="middle"></text>         <text x="70.71" y="74.88" text-anchor="middle"></text>         <text x="38.86" y="64.12" text-anchor="middle"></text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-1ca431a4-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-1ca431a4-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-1ca431a4-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-1ca431a4-12">             <use xlink:href="#img-1ca431a4-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-1ca431a4-14">             <use xlink:href="#img-1ca431a4-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-1ca431a4-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-1ca431a4-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-1ca431a4-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-1ca431a4-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-1ca431a4-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-1ca431a4-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-1ca431a4-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-1ca431a4-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-1ca431a4-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-1ca431a4-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-1ca431a4-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-1ca431a4-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-1ca431a4-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-1ca431a4"); fig.select("#img-1ca431a4-3")    .init_gadfly(); fig.select("#img-1ca431a4-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-1ca431a4-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-1ca431a4-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-1ca431a4-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-1ca431a4-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-1ca431a4-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-1ca431a4-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-1ca431a4-39")    .data("max_pos", 120.42) ; fig.select("#img-1ca431a4-39")    .data("min_pos", 103.42) ; fig.select("#img-1ca431a4-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-1ca431a4-40")    .data("max_pos", 120.42) ; fig.select("#img-1ca431a4-40")    .data("min_pos", 103.42) ; fig.select("#img-1ca431a4-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-1ca431a4-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-1ca431a4-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-1ca431a4-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-1ca431a4-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-1ca431a4-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_net_net_1.png" /></p>
<p>This is showing the bootstrap support each hybrid edge: percentage of bootstrap trees with an edge from the same sister clade to the same hybrid clade. Alternatively, we could show the bootstrap support for the full reticulation relationships in the network, one at each hybrid node (support for same hybrid with same sister clades). Here, we find that A received gene flow from E (and is sister to B otherwise) in just 32% of bootstrap networks. In another 1% bootstrap, A received gene flow from another source.</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">nodeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[[</span><span class="o">:</span><span class="n">hybridnode</span><span class="p">,</span><span class="o">:</span><span class="n">BS_hybrid_samesisters</span><span class="p">]])</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-0327cac3&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-0327cac3-1"> <g clip-path="url(#img-0327cac3-2)">   <g id="img-0327cac3-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-0327cac3-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-0327cac3-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-0327cac3-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-0327cac3-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-0327cac3-8">         <text x="111.18" y="71.5" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="82.25" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="28.5" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="39.25" text-anchor="end" dy="0.35em"></text>         <text x="68.71" y="39.25" text-anchor="end" dy="0.35em"></text>         <text x="47.47" y="33.88" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="60.75" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="50" text-anchor="end" dy="0.35em"></text>         <text x="89.95" y="50" text-anchor="end" dy="0.35em">32</text>         <text x="68.71" y="55.38" text-anchor="end" dy="0.35em"></text>         <text x="47.47" y="66.12" text-anchor="end" dy="0.35em"></text>         <text x="89.95" y="76.88" text-anchor="end" dy="0.35em"></text>         <text x="26.24" y="50" text-anchor="end" dy="0.35em"></text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-0327cac3-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-0327cac3-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-0327cac3-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-0327cac3-12">             <use xlink:href="#img-0327cac3-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-0327cac3-14">             <use xlink:href="#img-0327cac3-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-0327cac3-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-0327cac3-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-0327cac3-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-0327cac3-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-0327cac3-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-0327cac3-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-0327cac3-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-0327cac3-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-0327cac3-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-0327cac3-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-0327cac3-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-0327cac3-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-0327cac3-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-0327cac3"); fig.select("#img-0327cac3-3")    .init_gadfly(); fig.select("#img-0327cac3-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-0327cac3-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-0327cac3-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-0327cac3-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-0327cac3-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-0327cac3-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-0327cac3-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-0327cac3-39")    .data("max_pos", 120.42) ; fig.select("#img-0327cac3-39")    .data("min_pos", 103.42) ; fig.select("#img-0327cac3-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-0327cac3-40")    .data("max_pos", 120.42) ; fig.select("#img-0327cac3-40")    .data("min_pos", 103.42) ; fig.select("#img-0327cac3-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-0327cac3-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-0327cac3-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-0327cac3-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-0327cac3-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-0327cac3-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_net_ret_1.png" /></p>
<p>Below is example code to place tree edge support and hybrid edge support on the same plot.</p>
<div class="codehilite"><pre><span></span><span class="n">tmp</span> <span class="o">=</span> <span class="n">BSe</span><span class="p">[</span><span class="o">!</span><span class="n">isna</span><span class="p">(</span><span class="n">BSe</span><span class="p">[</span><span class="o">:</span><span class="n">edge</span><span class="p">]),[</span><span class="o">:</span><span class="n">edge</span><span class="p">,</span><span class="o">:</span><span class="n">BS_hybrid_edge</span><span class="p">]]</span>
<span class="n">rename!</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="o">:</span><span class="n">BS_hybrid_edge</span><span class="p">,</span> <span class="o">:</span><span class="n">proportion</span><span class="p">)</span>
<span class="n">rename!</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="o">:</span><span class="n">edge</span><span class="p">,</span> <span class="o">:</span><span class="n">edgeNumber</span><span class="p">)</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">vcat</span><span class="p">(</span><span class="n">BSe_tree</span><span class="p">,</span> <span class="n">tmp</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">edgeLabel</span><span class="o">=</span><span class="n">tmp</span><span class="p">,</span> <span class="n">nodeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[[</span><span class="o">:</span><span class="n">hybridnode</span><span class="p">,</span><span class="o">:</span><span class="n">BS_hybrid_samesisters</span><span class="p">]])</span>
</pre></div>


<p><a id='Who-are-the-hybrids-in-bootstrap-networks?-1'></a></p>
<h3 id="who-are-the-hybrids-in-bootstrap-networks">Who are the hybrids in bootstrap networks?</h3>
<p>On a different plot, we can show the bootstrap support for hybrid clades, first mapped to each node with positive hybrid support, and then mapped on the parent edge of these nodes. A is estimated as a hybrid in only 33% of our bootstrap networks. In another 44%, it is the lineage to (E,O) that is estimated as being of hybrid origin.</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">nodeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[</span><span class="n">BSn</span><span class="p">[</span><span class="o">:</span><span class="n">BS_hybrid</span><span class="p">]</span><span class="o">.&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="o">:</span><span class="n">hybridnode</span><span class="p">,</span><span class="o">:</span><span class="n">BS_hybrid</span><span class="p">]])</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-93cdb455&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-93cdb455-1"> <g clip-path="url(#img-93cdb455-2)">   <g id="img-93cdb455-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-93cdb455-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-93cdb455-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-93cdb455-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-93cdb455-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-93cdb455-8">         <text x="111.18" y="71.5" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="82.25" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="28.5" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="39.25" text-anchor="end" dy="0.35em">12</text>         <text x="68.71" y="39.25" text-anchor="end" dy="0.35em"></text>         <text x="47.47" y="33.88" text-anchor="end" dy="0.35em">44</text>         <text x="111.18" y="60.75" text-anchor="end" dy="0.35em">2</text>         <text x="111.18" y="50" text-anchor="end" dy="0.35em"></text>         <text x="89.95" y="50" text-anchor="end" dy="0.35em">33</text>         <text x="68.71" y="55.38" text-anchor="end" dy="0.35em">9</text>         <text x="47.47" y="66.12" text-anchor="end" dy="0.35em"></text>         <text x="89.95" y="76.88" text-anchor="end" dy="0.35em"></text>         <text x="26.24" y="50" text-anchor="end" dy="0.35em"></text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-93cdb455-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-93cdb455-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-93cdb455-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-93cdb455-12">             <use xlink:href="#img-93cdb455-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-93cdb455-14">             <use xlink:href="#img-93cdb455-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-93cdb455-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-93cdb455-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-93cdb455-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-93cdb455-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-93cdb455-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-93cdb455-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-93cdb455-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-93cdb455-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-93cdb455-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-93cdb455-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-93cdb455-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-93cdb455-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-93cdb455-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-93cdb455"); fig.select("#img-93cdb455-3")    .init_gadfly(); fig.select("#img-93cdb455-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-93cdb455-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-93cdb455-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-93cdb455-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-93cdb455-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-93cdb455-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-93cdb455-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-93cdb455-39")    .data("max_pos", 120.42) ; fig.select("#img-93cdb455-39")    .data("min_pos", 103.42) ; fig.select("#img-93cdb455-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-93cdb455-40")    .data("max_pos", 120.42) ; fig.select("#img-93cdb455-40")    .data("min_pos", 103.42) ; fig.select("#img-93cdb455-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-93cdb455-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-93cdb455-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-93cdb455-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-93cdb455-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-93cdb455-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_net_hyb_1.png" /></p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">edgeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[</span><span class="n">BSn</span><span class="p">[</span><span class="o">:</span><span class="n">BS_hybrid</span><span class="p">]</span><span class="o">.&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="o">:</span><span class="n">edge</span><span class="p">,</span><span class="o">:</span><span class="n">BS_hybrid</span><span class="p">]])</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-5541d7f4&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-5541d7f4-1"> <g clip-path="url(#img-5541d7f4-2)">   <g id="img-5541d7f4-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-5541d7f4-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-5541d7f4-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-5541d7f4-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-5541d7f4-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-5541d7f4-8">         <text x="102.57" y="69.5" text-anchor="middle"></text>         <text x="102.57" y="80.25" text-anchor="middle"></text>         <text x="81.33" y="26.5" text-anchor="middle"></text>         <text x="91.95" y="37.25" text-anchor="middle">12</text>         <text x="81.33" y="42.62" text-anchor="middle"></text>         <text x="60.09" y="37.25" text-anchor="middle"></text>         <text x="38.86" y="31.88" text-anchor="middle">44</text>         <text x="91.95" y="58.75" text-anchor="middle">2</text>         <text x="102.57" y="48" text-anchor="middle">33</text>         <text x="81.33" y="48" text-anchor="middle"></text>         <text x="60.09" y="53.38" text-anchor="middle">9</text>         <text x="70.71" y="74.88" text-anchor="middle"></text>         <text x="38.86" y="64.12" text-anchor="middle"></text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-5541d7f4-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-5541d7f4-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-5541d7f4-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-5541d7f4-12">             <use xlink:href="#img-5541d7f4-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-5541d7f4-14">             <use xlink:href="#img-5541d7f4-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-5541d7f4-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-5541d7f4-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-5541d7f4-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-5541d7f4-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-5541d7f4-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-5541d7f4-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-5541d7f4-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-5541d7f4-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-5541d7f4-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-5541d7f4-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-5541d7f4-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-5541d7f4-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-5541d7f4-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-5541d7f4"); fig.select("#img-5541d7f4-3")    .init_gadfly(); fig.select("#img-5541d7f4-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-5541d7f4-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-5541d7f4-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-5541d7f4-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-5541d7f4-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-5541d7f4-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-5541d7f4-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-5541d7f4-39")    .data("max_pos", 120.42) ; fig.select("#img-5541d7f4-39")    .data("min_pos", 103.42) ; fig.select("#img-5541d7f4-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-5541d7f4-40")    .data("max_pos", 120.42) ; fig.select("#img-5541d7f4-40")    .data("min_pos", 103.42) ; fig.select("#img-5541d7f4-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-5541d7f4-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-5541d7f4-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-5541d7f4-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-5541d7f4-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-5541d7f4-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_net_hyb_2.png" /></p>
<p><a id='Where-is-the-origin-of-gene-flow?-1'></a></p>
<h3 id="where-is-the-origin-of-gene-flow">Where is the origin of gene flow?</h3>
<p>We can plot the support for the various placements of the gene flow origin (minor sister clade), first mapped to each node with positive support for being the origin of gene flow, and then mapped along the parent edge of these nodes. We filtered clades to show those with sister support &gt; 5%:</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">nodeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[</span><span class="n">BSn</span><span class="p">[</span><span class="o">:</span><span class="n">BS_minor_sister</span><span class="p">]</span><span class="o">.&gt;</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="o">:</span><span class="n">node</span><span class="p">,</span><span class="o">:</span><span class="n">BS_minor_sister</span><span class="p">]])</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-046dac5b&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-046dac5b-1"> <g clip-path="url(#img-046dac5b-2)">   <g id="img-046dac5b-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-046dac5b-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-046dac5b-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-046dac5b-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-046dac5b-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-046dac5b-8">         <text x="111.18" y="71.5" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="82.25" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="28.5" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="39.25" text-anchor="end" dy="0.35em">41</text>         <text x="68.71" y="39.25" text-anchor="end" dy="0.35em"></text>         <text x="47.47" y="33.88" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="60.75" text-anchor="end" dy="0.35em"></text>         <text x="111.18" y="50" text-anchor="end" dy="0.35em">49</text>         <text x="89.95" y="50" text-anchor="end" dy="0.35em"></text>         <text x="68.71" y="55.38" text-anchor="end" dy="0.35em">7</text>         <text x="47.47" y="66.12" text-anchor="end" dy="0.35em"></text>         <text x="89.95" y="76.88" text-anchor="end" dy="0.35em"></text>         <text x="26.24" y="50" text-anchor="end" dy="0.35em"></text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-046dac5b-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-046dac5b-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-046dac5b-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-046dac5b-12">             <use xlink:href="#img-046dac5b-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-046dac5b-14">             <use xlink:href="#img-046dac5b-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-046dac5b-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-046dac5b-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-046dac5b-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-046dac5b-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-046dac5b-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-046dac5b-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-046dac5b-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-046dac5b-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-046dac5b-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-046dac5b-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-046dac5b-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-046dac5b-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-046dac5b-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-046dac5b"); fig.select("#img-046dac5b-3")    .init_gadfly(); fig.select("#img-046dac5b-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-046dac5b-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-046dac5b-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-046dac5b-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-046dac5b-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-046dac5b-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-046dac5b-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-046dac5b-39")    .data("max_pos", 120.42) ; fig.select("#img-046dac5b-39")    .data("min_pos", 103.42) ; fig.select("#img-046dac5b-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-046dac5b-40")    .data("max_pos", 120.42) ; fig.select("#img-046dac5b-40")    .data("min_pos", 103.42) ; fig.select("#img-046dac5b-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-046dac5b-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-046dac5b-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-046dac5b-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-046dac5b-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-046dac5b-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_net_clade_1.png" /></p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">edgeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[</span><span class="n">BSn</span><span class="p">[</span><span class="o">:</span><span class="n">BS_minor_sister</span><span class="p">]</span><span class="o">.&gt;</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="o">:</span><span class="n">edge</span><span class="p">,</span><span class="o">:</span><span class="n">BS_minor_sister</span><span class="p">]])</span>
</pre></div>


<?xml version="1.0" encoding="UTF-8"?> <svg xmlns="http://www.w3.org/2000/svg"      xmlns:xlink="http://www.w3.org/1999/xlink"      xmlns:gadfly="http://www.gadflyjl.org/ns"      version="1.2"      width="141.42mm" height="100mm" viewBox="0 0 141.42 100"      stroke="none"      fill="#000000"      stroke-width="0.3"      font-size="3.88"

<div class="codehilite"><pre><span></span> id=&quot;img-6a5ef53d&quot;&gt;
</pre></div>


<p><g class="plotroot xscalable yscalable" id="img-6a5ef53d-1"> <g clip-path="url(#img-6a5ef53d-2)">   <g id="img-6a5ef53d-3">     <g pointer-events="visible" opacity="1" fill="#000000" fill-opacity="0.000" stroke="#000000" stroke-opacity="0.000" class="guide background" id="img-6a5ef53d-4">       <rect x="5" y="5" width="131.42" height="90"/>     </g>     <g class="guide ygridlines xfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-6a5ef53d-5">       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,-100.5 L 136.42 -100.5" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M5,200.5 L 136.42 200.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,-122 L 136.42 -122" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M5,179 L 136.42 179" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,173.62 L 136.42 173.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,168.25 L 136.42 168.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,162.88 L 136.42 162.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,157.5 L 136.42 157.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,152.12 L 136.42 152.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,146.75 L 136.42 146.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,141.38 L 136.42 141.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,136 L 136.42 136" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,130.62 L 136.42 130.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,125.25 L 136.42 125.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,119.87 L 136.42 119.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,114.5 L 136.42 114.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,109.12 L 136.42 109.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,103.75 L 136.42 103.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,98.37 L 136.42 98.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,93 L 136.42 93" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,87.62 L 136.42 87.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,82.25 L 136.42 82.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,76.88 L 136.42 76.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,71.5 L 136.42 71.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,66.12 L 136.42 66.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,60.75 L 136.42 60.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,55.38 L 136.42 55.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,50 L 136.42 50" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,44.62 L 136.42 44.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,39.25 L 136.42 39.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,33.88 L 136.42 33.88" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,28.5 L 136.42 28.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,23.13 L 136.42 23.13" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,17.75 L 136.42 17.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,12.38 L 136.42 12.38" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,7 L 136.42 7" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,1.63 L 136.42 1.63" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-3.75 L 136.42 -3.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-9.12 L 136.42 -9.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-14.5 L 136.42 -14.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-19.87 L 136.42 -19.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-25.25 L 136.42 -25.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-30.62 L 136.42 -30.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-36 L 136.42 -36" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-41.37 L 136.42 -41.37" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-46.75 L 136.42 -46.75" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-52.12 L 136.42 -52.12" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-57.5 L 136.42 -57.5" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-62.87 L 136.42 -62.87" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-68.25 L 136.42 -68.25" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-73.62 L 136.42 -73.62" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M5,-79 L 136.42 -79" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="guide xgridlines yfixed" stroke-dasharray="0.5,0.5" stroke-width="0" stroke="#FFFFFF" id="img-6a5ef53d-6">       <path fill="none" d="M-141.66,5 L -141.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="visible" gadfly:scale="1.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M283.08,5 L 283.08 95" visibility="hidden" gadfly:scale="1.0"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-116.17,5 L -116.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-111.93,5 L -111.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-107.68,5 L -107.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-103.43,5 L -103.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-94.94,5 L -94.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-90.69,5 L -90.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-86.44,5 L -86.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-82.19,5 L -82.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-73.7,5 L -73.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-69.45,5 L -69.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-65.21,5 L -65.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-60.96,5 L -60.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-52.46,5 L -52.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-48.22,5 L -48.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-43.97,5 L -43.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-39.72,5 L -39.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-31.23,5 L -31.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-26.98,5 L -26.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-22.73,5 L -22.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-18.48,5 L -18.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-9.99,5 L -9.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-5.74,5 L -5.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-1.49,5 L -1.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M2.75,5 L 2.75 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M11.25,5 L 11.25 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M15.49,5 L 15.49 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M19.74,5 L 19.74 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M23.99,5 L 23.99 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M32.48,5 L 32.48 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M36.73,5 L 36.73 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M40.98,5 L 40.98 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M45.23,5 L 45.23 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M53.72,5 L 53.72 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M57.97,5 L 57.97 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M62.22,5 L 62.22 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M66.46,5 L 66.46 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M74.96,5 L 74.96 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M79.21,5 L 79.21 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M83.45,5 L 83.45 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M87.7,5 L 87.7 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M96.19,5 L 96.19 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M100.44,5 L 100.44 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M104.69,5 L 104.69 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M108.94,5 L 108.94 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M117.43,5 L 117.43 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M121.68,5 L 121.68 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M125.93,5 L 125.93 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M130.17,5 L 130.17 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M138.67,5 L 138.67 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M142.92,5 L 142.92 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M147.16,5 L 147.16 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M151.41,5 L 151.41 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M159.91,5 L 159.91 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M164.15,5 L 164.15 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M168.4,5 L 168.4 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M172.65,5 L 172.65 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M181.14,5 L 181.14 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M185.39,5 L 185.39 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M189.64,5 L 189.64 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M193.88,5 L 193.88 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M202.38,5 L 202.38 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M206.63,5 L 206.63 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M210.87,5 L 210.87 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M215.12,5 L 215.12 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M223.62,5 L 223.62 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M227.86,5 L 227.86 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M232.11,5 L 232.11 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M236.36,5 L 236.36 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M244.85,5 L 244.85 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M249.1,5 L 249.1 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M253.35,5 L 253.35 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M257.6,5 L 257.6 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="10.0"/>       <path fill="none" d="M-205.37,5 L -205.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M431.74,5 L 431.74 95" visibility="hidden" gadfly:scale="0.5"/>       <path fill="none" d="M-120.42,5 L -120.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-109.8,5 L -109.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-99.18,5 L -99.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-88.57,5 L -88.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-77.95,5 L -77.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-67.33,5 L -67.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-56.71,5 L -56.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-46.09,5 L -46.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-35.47,5 L -35.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-24.86,5 L -24.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-14.24,5 L -14.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M-3.62,5 L -3.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M7,5 L 7 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M17.62,5 L 17.62 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M28.24,5 L 28.24 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M38.86,5 L 38.86 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M49.47,5 L 49.47 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M60.09,5 L 60.09 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M70.71,5 L 70.71 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M81.33,5 L 81.33 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M91.95,5 L 91.95 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M102.57,5 L 102.57 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M113.18,5 L 113.18 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M123.8,5 L 123.8 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M134.42,5 L 134.42 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M145.04,5 L 145.04 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M155.66,5 L 155.66 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M166.28,5 L 166.28 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M176.9,5 L 176.9 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M187.51,5 L 187.51 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M198.13,5 L 198.13 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M208.75,5 L 208.75 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M219.37,5 L 219.37 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M229.99,5 L 229.99 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M240.61,5 L 240.61 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M251.22,5 L 251.22 95" visibility="hidden" gadfly:scale="5.0"/>       <path fill="none" d="M261.84,5 L 261.84 95" visibility="hidden" gadfly:scale="5.0"/>     </g>     <g class="plotpanel" id="img-6a5ef53d-7">       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-6a5ef53d-8">         <text x="102.57" y="69.5" text-anchor="middle"></text>         <text x="102.57" y="80.25" text-anchor="middle"></text>         <text x="81.33" y="26.5" text-anchor="middle"></text>         <text x="91.95" y="37.25" text-anchor="middle">41</text>         <text x="81.33" y="42.62" text-anchor="middle"></text>         <text x="60.09" y="37.25" text-anchor="middle"></text>         <text x="38.86" y="31.88" text-anchor="middle"></text>         <text x="91.95" y="58.75" text-anchor="middle"></text>         <text x="102.57" y="48" text-anchor="middle">49</text>         <text x="81.33" y="48" text-anchor="middle"></text>         <text x="60.09" y="53.38" text-anchor="middle">7</text>         <text x="70.71" y="74.88" text-anchor="middle"></text>         <text x="38.86" y="64.12" text-anchor="middle"></text>       </g>       <g class="geometry" stroke="#000000" stroke-opacity="0.000" fill="#4C404B" font-size="2.82" font-family="'PT Sans Caption','Helvetica Neue','Helvetica',sans-serif" id="img-6a5ef53d-9">         <text x="115.18" y="71.5" dy="0.35em">C</text>         <text x="115.18" y="82.25" dy="0.35em">D</text>         <text x="115.18" y="28.5" dy="0.35em">O</text>         <text x="115.18" y="39.25" dy="0.35em">E</text>         <text x="115.18" y="60.75" dy="0.35em">B</text>         <text x="115.18" y="50" dy="0.35em">A</text>       </g>       <g class="geometry" id="img-6a5ef53d-10">         <g class="color_RGBA{Float32}(1.0f0,1.0f0,1.0f0,1.0f0)" stroke-width="0.3" id="img-6a5ef53d-11">           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-6a5ef53d-12">             <use xlink:href="#img-6a5ef53d-13" x="121.68" y="23.13"/>           </g>           <g stroke="#FFFFFF" fill="#FFFFFF" id="img-6a5ef53d-14">             <use xlink:href="#img-6a5ef53d-15" x="19.74" y="87.62"/>           </g>         </g>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-16">         <path fill="none" d="M28.24,66.12 L 28.24 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-17">         <path fill="none" d="M91.95,82.25 L 91.95 71.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-18">         <path fill="none" d="M49.47,76.88 L 49.47 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-19">         <path fill="none" d="M70.71,60.75 L 70.71 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-20">         <path fill="none" d="M91.95,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-21">         <path fill="none" d="M49.47,39.25 L 49.47 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-22">         <path fill="none" d="M70.71,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-23">         <path fill="none" d="M28.24,66.12 L 49.47 66.12"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-24">         <path fill="none" d="M49.47,76.88 L 91.95 76.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-25">         <path fill="none" d="M49.47,55.38 L 70.71 55.38"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00688B" id="img-6a5ef53d-26">         <path fill="none" d="M70.71,50 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-27">         <path fill="none" d="M91.95,50 L 113.18 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-28">         <path fill="none" d="M70.71,60.75 L 113.18 60.75"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-29">         <path fill="none" d="M28.24,33.88 L 49.47 33.88"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-30">         <path fill="none" d="M49.47,39.25 L 70.71 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#00BFFF" id="img-6a5ef53d-31">         <path fill="none" d="M70.71,39.25 L 91.95 50"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-32">         <path fill="none" d="M70.71,39.25 L 113.18 39.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-33">         <path fill="none" d="M49.47,28.5 L 113.18 28.5"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-34">         <path fill="none" d="M91.95,82.25 L 113.18 82.25"/>       </g>       <g stroke-width="0.3" fill="#000000" fill-opacity="0.000" class="geometry" stroke-dasharray="none" stroke="#000000" id="img-6a5ef53d-35">         <path fill="none" d="M91.95,71.5 L 113.18 71.5"/>       </g>     </g>     <g opacity="0" class="guide zoomslider" stroke="#000000" stroke-opacity="0.000" id="img-6a5ef53d-36">       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-6a5ef53d-37">         <rect x="129.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-6a5ef53d-38">           <path d="M130.22,9.6 L 131.02 9.6 131.02 8.8 131.82 8.8 131.82 9.6 132.62 9.6 132.62 10.4 131.82 10.4 131.82 11.2 131.02 11.2 131.02 10.4 130.22 10.4 z"/>         </g>       </g>       <g fill="#EAEAEA" id="img-6a5ef53d-39">         <rect x="109.92" y="8" width="19" height="4"/>       </g>       <g class="zoomslider_thumb" fill="#6A6A6A" id="img-6a5ef53d-40">         <rect x="118.42" y="8" width="2" height="4"/>       </g>       <g fill="#EAEAEA" stroke-width="0.3" stroke-opacity="0" stroke="#6A6A6A" id="img-6a5ef53d-41">         <rect x="105.42" y="8" width="4" height="4"/>         <g class="button_logo" fill="#6A6A6A" id="img-6a5ef53d-42">           <path d="M106.22,9.6 L 108.62 9.6 108.62 10.4 106.22 10.4 z"/>         </g>       </g>     </g>   </g> </g> </g> <defs>   <clipPath id="img-6a5ef53d-2">   <path d="M5,5 L 136.42 5 136.42 95 5 95" /> </clipPath>   <g id="img-6a5ef53d-13">     <circle cx="0" cy="0" r="0.9"/>   </g>   <g id="img-6a5ef53d-15">     <circle cx="0" cy="0" r="0.9"/>   </g> </defs> <script> &lt;![CDATA[ (function(N){var k=/[.\/]/,L=/\s<em>,\s</em>/,C=function(a,d){return a-d},a,v,y={n:{}},M=function(){for(var a=0,d=this.length;a<d;a++)if("undefined"!=typeof this[a])return this[a]},A=function(){for(var a=this.length;a;)if("undefined"!=typeof this[a])return this[a]},w=function(k,d){k=String(k);var f=v,n=Array.prototype.slice.call(arguments,2),u=w.listeners(k),p=0,b,q=[],e={},l=[],r=a;l.firstDefined=M;l.lastDefined=A;a=k;for(var s=v=0,x=u.length;s<x;s++)"zIndex"in u[s]&&(q.push(u[s].zIndex),0>u[s].zIndex&amp;&amp; (e[u[s].zIndex]=u[s]));for(q.sort(C);0&gt;q[p];)if(b=e[q[p++] ],l.push(b.apply(d,n)),v)return v=f,l;for(s=0;s<x;s++)if(b=u[s],"zIndex"in b)if(b.zIndex==q[p]){l.push(b.apply(d,n));if(v)break;do if(p++,(b=e[q[p] ])&&l.push(b.apply(d,n)),v)break;while(b)}else e[b.zIndex]=b;else if(l.push(b.apply(d,n)),v)break;v=f;a=r;return l};w._events=y;w.listeners=function(a){a=a.split(k);var d=y,f,n,u,p,b,q,e,l=[d],r=[];u=0;for(p=a.length;u<p;u++){e=[];b=0;for(q=l.length;b<q;b++)for(d=l[b].n,f=[d[a[u] ],d["*"] ],n=2;n;)if(d= f[n])e.push(d),r=r.concat(d.f||[]);l=e}return r};w.on=function(a,d){a=String(a);if("function"!=typeof d)return function(){};for(var f=a.split(L),n=0,u=f.length;n<u;n++)(function(a){a=a.split(k);for(var b=y,f,e=0,l=a.length;e<l;e++)b=b.n,b=b.hasOwnProperty(a[e])&&b[a[e] ]||(b[a[e] ]={n:{}});b.f=b.f||[];e=0;for(l=b.f.length;e<l;e++)if(b.f[e]==d){f=!0;break}!f&&b.f.push(d)})(f[n]);return function(a){+a==+a&&(d.zIndex=+a)}};w.f=function(a){var d=[].slice.call(arguments,1);return function(){w.apply(null, [a,null].concat(d).concat([].slice.call(arguments,0)))}};w.stop=function(){v=1};w.nt=function(k){return k?(new RegExp("(?:\.|\/|^)"+k+"(?:\.|\/|$)")).test(a):a};w.nts=function(){return a.split(k)};w.off=w.unbind=function(a,d){if(a){var f=a.split(L);if(1<f.length)for(var n=0,u=f.length;n<u;n++)w.off(f[n],d);else{for(var f=a.split(k),p,b,q,e,l=[y],n=0,u=f.length;n<u;n++)for(e=0;e<l.length;e+=q.length-2){q=[e,1];p=l[e].n;if("*"!=f[n])p[f[n] ]&&q.push(p[f[n] ]);else for(b in p)p.hasOwnProperty(b)&& q.push(p[b]);l.splice.apply(l,q)}n=0;for(u=l.length;n<u;n++)for(p=l[n];p.n;){if(d){if(p.f){e=0;for(f=p.f.length;e<f;e++)if(p.f[e]==d){p.f.splice(e,1);break}!p.f.length&&delete p.f}for(b in p.n)if(p.n.hasOwnProperty(b)&&p.n[b].f){q=p.n[b].f;e=0;for(f=q.length;e<f;e++)if(q[e]==d){q.splice(e,1);break}!q.length&&delete p.n[b].f}}else for(b in delete p.f,p.n)p.n.hasOwnProperty(b)&&p.n[b].f&&delete p.n[b].f;p=p.n}}}else w._events=y={n:{}}};w.once=function(a,d){var f=function(){w.unbind(a,f);return d.apply(this, arguments)};return w.on(a,f)};w.version="0.4.2";w.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=w:"function"===typeof define&&define.amd?define("eve",[],function(){return w}):N.eve=w})(this); (function(N,k){"function"===typeof define&&define.amd?define("Snap.svg",["eve"],function(L){return k(N,L)}):k(N,N.eve)})(this,function(N,k){var L=function(a){var k={},y=N.requestAnimationFrame||N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||N.oRequestAnimationFrame||N.msRequestAnimationFrame||function(a){setTimeout(a,16)},M=Array.isArray||function(a){return a instanceof Array||"[object Array]"==Object.prototype.toString.call(a)},A=0,w="M"+(+new Date).toString(36),z=function(a){if(null== a)return this.s;var b=this.s-a;this.b+=this.dur*b;this.B+=this.dur*b;this.s=a},d=function(a){if(null==a)return this.spd;this.spd=a},f=function(a){if(null==a)return this.dur;this.s=this.s*a/this.dur;this.dur=a},n=function(){delete k[this.id];this.update();a("mina.stop."+this.id,this)},u=function(){this.pdif||(delete k[this.id],this.update(),this.pdif=this.get()-this.b)},p=function(){this.pdif&&(this.b=this.get()-this.pdif,delete this.pdif,k[this.id]=this)},b=function(){var a;if(M(this.start)){a=[]; for(var b=0,e=this.start.length;b<e;b++)a[b]=+this.start[b]+(this.end[b]-this.start[b])*this.easing(this.s)}else a=+this.start+(this.end-this.start)*this.easing(this.s);this.set(a)},q=function(){var l=0,b;for(b in k)if(k.hasOwnProperty(b)){var e=k[b],f=e.get();l++;e.s=(f-e.b)/(e.dur/e.spd);1<=e.s&&(delete k[b],e.s=1,l,function(b){setTimeout(function(){a("mina.finish."+b.id,b)})}(e));e.update()}l&&y(q)},e=function(a,r,s,x,G,h,J){a={id:w+(A++).toString(36),start:a,end:r,b:s,s:0,dur:x-s,spd:1,get:G, set:h,easing:J||e.linear,status:z,speed:d,duration:f,stop:n,pause:u,resume:p,update:b};k[a.id]=a;r=0;for(var K in k)if(k.hasOwnProperty(K)&&(r++,2==r))break;1==r&&y(q);return a};e.time=Date.now||function(){return+new Date};e.getById=function(a){return k[a]||null};e.linear=function(a){return a};e.easeout=function(a){return Math.pow(a,1.7)};e.easein=function(a){return Math.pow(a,0.48)};e.easeinout=function(a){if(1==a)return 1;if(0==a)return 0;var b=0.48-a/1.04,e=Math.sqrt(0.1734+b*b);a=e-b;a=Math.pow(Math.abs(a), 1/3)*(0>a?-1:1);b=-e-b;b=Math.pow(Math.abs(b),1/3)<em>(0&gt;b?-1:1);a=a+b+0.5;return 3</em>(1-a)<em>a</em>a+a<em>a</em>a};e.backin=function(a){return 1==a?1:a<em>a</em>(2.70158<em>a-1.70158)};e.backout=function(a){if(0==a)return 0;a-=1;return a</em>a<em>(2.70158</em>a+1.70158)+1};e.elastic=function(a){return a==!!a?a:Math.pow(2,-10<em>a)</em>Math.sin(2<em>(a-0.075)</em>Math.PI/0.3)+1};e.bounce=function(a){a&lt;1/2.75?a<em>=7.5625</em>a:a&lt;2/2.75?(a-=1.5/2.75,a=7.5625<em>a</em>a+0.75):a&lt;2.5/2.75?(a-=2.25/2.75,a=7.5625<em>a</em>a+0.9375):(a-=2.625/2.75,a=7.5625<em>a</em>a+0.984375);return a}; return N.mina=e}("undefined"==typeof k?function(){}:k),C=function(){function a(c,t){if(c){if(c.tagName)return x(c);if(y(c,"array")&amp;&amp;a.set)return a.set.apply(a,c);if(c instanceof e)return c;if(null==t)return c=G.doc.querySelector(c),x(c)}return new s(null==c?"100%":c,null==t?"100%":t)}function v(c,a){if(a){"#text"==c&amp;&amp;(c=G.doc.createTextNode(a.text||""));"string"==typeof c&amp;&amp;(c=v(c));if("string"==typeof a)return"xlink:"==a.substring(0,6)?c.getAttributeNS(m,a.substring(6)):"xml:"==a.substring(0,4)?c.getAttributeNS(la, a.substring(4)):c.getAttribute(a);for(var da in a)if(a<a href="../da">h</a>){var b=J(a[da]);b?"xlink:"==da.substring(0,6)?c.setAttributeNS(m,da.substring(6),b):"xml:"==da.substring(0,4)?c.setAttributeNS(la,da.substring(4),b):c.setAttribute(da,b):c.removeAttribute(da)}}else c=G.doc.createElementNS(la,c);return c}function y(c,a){a=J.prototype.toLowerCase.call(a);return"finite"==a?isFinite(c):"array"==a&amp;&amp;(c instanceof Array||Array.isArray&amp;&amp;Array.isArray(c))?!0:"null"==a&amp;&amp;null===c||a==typeof c&amp;&amp;null!==c||"object"== a&amp;&amp;c===Object(c)||$.call(c).slice(8,-1).toLowerCase()==a}function M(c){if("function"==typeof c||Object(c)!==c)return c;var a=new c.constructor,b;for(b in c)c<a href="../b">h</a>&amp;&amp;(a[b]=M(c[b]));return a}function A(c,a,b){function m(){var e=Array.prototype.slice.call(arguments,0),f=e.join("\u2400"),d=m.cache=m.cache||{},l=m.count=m.count||[];if(d<a href="../f">h</a>){a:for(var e=l,l=f,B=0,H=e.length;B<H;B++)if(e[B]===l){e.push(e.splice(B,1)[0]);break a}return b?b(d[f]):d[f]}1E3<=l.length&&delete d[l.shift()];l.push(f);d[f]=c.apply(a, e);return b?b(d[f]):d[f]}return m}function w(c,a,b,m,e,f){return null==e?(c-=b,a-=m,c||a?(180*I.atan2(-a,-c)/C+540)%360:0):w(c,a,e,f)-w(b,m,e,f)}function z(c){return c%360*C/180}function d(c){var a=[];c=c.replace(/(?:^|\s)(\w+)(([^)]+))/g,function(c,b,m){m=m.split(/\s*,\s*|\s+/);"rotate"==b&&1==m.length&&m.push(0,0);"scale"==b&&(2<m.length?m=m.slice(0,2):2==m.length&&m.push(0,0),1==m.length&&m.push(m[0],0,0));"skewX"==b?a.push(["m",1,0,I.tan(z(m[0])),1,0,0]):"skewY"==b?a.push(["m",1,I.tan(z(m[0])), 0,1,0,0]):a.push([b.charAt(0)].concat(m));return c});return a}function f(c,t){var b=O(c),m=new a.Matrix;if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e],d=h.length,B=J(h[0]).toLowerCase(),H=h[0]!=B,l=H?m.invert():0,E;"t"==B&&2==d?m.translate(h[1],0):"t"==B&&3==d?H?(d=l.x(0,0),B=l.y(0,0),H=l.x(h[1],h[2]),l=l.y(h[1],h[2]),m.translate(H-d,l-B)):m.translate(h[1],h[2]):"r"==B?2==d?(E=E||t,m.rotate(h[1],E.x+E.width/2,E.y+E.height/2)):4==d&&(H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.rotate(h[1],H,l)):m.rotate(h[1], h[2],h[3])):"s"==B?2==d||3==d?(E=E||t,m.scale(h[1],h[d-1],E.x+E.width/2,E.y+E.height/2)):4==d?H?(H=l.x(h[2],h[3]),l=l.y(h[2],h[3]),m.scale(h[1],h[1],H,l)):m.scale(h[1],h[1],h[2],h[3]):5==d&&(H?(H=l.x(h[3],h[4]),l=l.y(h[3],h[4]),m.scale(h[1],h[2],H,l)):m.scale(h[1],h[2],h[3],h[4])):"m"==B&&7==d&&m.add(h[1],h[2],h[3],h[4],h[5],h[6])}return m}function n(c,t){if(null==t){var m=!0;t="linearGradient"==c.type||"radialGradient"==c.type?c.node.getAttribute("gradientTransform"):"pattern"==c.type?c.node.getAttribute("patternTransform"): c.node.getAttribute("transform");if(!t)return new a.Matrix;t=d(t)}else t=a._.rgTransform.test(t)?J(t).replace(/.{3}|\u2026/g,c._.transform||aa):d(t),y(t,"array")&&(t=a.path?a.path.toString.call(t):J(t)),c._.transform=t;var b=f(t,c.getBBox(1));if(m)return b;c.matrix=b}function u(c){c=c.node.ownerSVGElement&&x(c.node.ownerSVGElement)||c.node.parentNode&&x(c.node.parentNode)||a.select("svg")||a(0,0);var t=c.select("defs"),t=null==t?!1:t.node;t||(t=r("defs",c.node).node);return t}function p(c){return c.node.ownerSVGElement&& x(c.node.ownerSVGElement)||a.select("svg")}function b(c,a,m){function b(c){if(null==c)return aa;if(c==+c)return c;v(B,{width:c});try{return B.getBBox().width}catch(a){return 0}}function h(c){if(null==c)return aa;if(c==+c)return c;v(B,{height:c});try{return B.getBBox().height}catch(a){return 0}}function e(b,B){null==a?d[b]=B(c.attr(b)||0):b==a&&(d=B(null==m?c.attr(b)||0:m))}var f=p(c).node,d={},B=f.querySelector(".svg-mgr");B||(B=v("rect"),v(B,{x:-9E9,y:-9E9,width:10,height:10,"class":"svg-mgr", fill:"none"}),f.appendChild(B));switch(c.type){case "rect":e("rx",b),e("ry",h);case "image":e("width",b),e("height",h);case "text":e("x",b);e("y",h);break;case "circle":e("cx",b);e("cy",h);e("r",b);break;case "ellipse":e("cx",b);e("cy",h);e("rx",b);e("ry",h);break;case "line":e("x1",b);e("x2",b);e("y1",h);e("y2",h);break;case "marker":e("refX",b);e("markerWidth",b);e("refY",h);e("markerHeight",h);break;case "radialGradient":e("fx",b);e("fy",h);break;case "tspan":e("dx",b);e("dy",h);break;default:e(a, b)}f.removeChild(B);return d}function q(c){y(c,"array")||(c=Array.prototype.slice.call(arguments,0));for(var a=0,b=0,m=this.node;this[a];)delete this[a++];for(a=0;a<c.length;a++)"set"==c[a].type?c[a].forEach(function(c){m.appendChild(c.node)}):m.appendChild(c[a].node);for(var h=m.childNodes,a=0;a<h.length;a++)this[b++]=x(h[a]);return this}function e(c){if(c.snap in E)return E[c.snap];var a=this.id=V(),b;try{b=c.ownerSVGElement}catch(m){}this.node=c;b&&(this.paper=new s(b));this.type=c.tagName;this.anims= {};this._={transform:[]};c.snap=a;E[a]=this;"g"==this.type&&(this.add=q);if(this.type in{g:1,mask:1,pattern:1})for(var e in s.prototype)s.prototype<a href="e">h</a>&&(this[e]=s.prototype[e])}function l(c){this.node=c}function r(c,a){var b=v(c);a.appendChild(b);return x(b)}function s(c,a){var b,m,f,d=s.prototype;if(c&&"svg"==c.tagName){if(c.snap in E)return E[c.snap];var l=c.ownerDocument;b=new e(c);m=c.getElementsByTagName("desc")[0];f=c.getElementsByTagName("defs")[0];m||(m=v("desc"),m.appendChild(l.createTextNode("Created with Snap")), b.node.appendChild(m));f||(f=v("defs"),b.node.appendChild(f));b.defs=f;for(var ca in d)d<a href="ca">h</a>&&(b[ca]=d[ca]);b.paper=b.root=b}else b=r("svg",G.doc.body),v(b.node,{height:a,version:1.1,width:c,xmlns:la});return b}function x(c){return!c||c instanceof e||c instanceof l?c:c.tagName&&"svg"==c.tagName.toLowerCase()?new s(c):c.tagName&&"object"==c.tagName.toLowerCase()&&"image/svg+xml"==c.type?new s(c.contentDocument.getElementsByTagName("svg")[0]):new e(c)}a.version="0.3.0";a.toString=function(){return"Snap v"+ this.version};a._={};var G={win:N,doc:N.document};a._.glob=G;var h="hasOwnProperty",J=String,K=parseFloat,U=parseInt,I=Math,P=I.max,Q=I.min,Y=I.abs,C=I.PI,aa="",$=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?(\s*([\d.]+%?\s*,\s*[\d.]+%?\s*,\s*[\d.]+%?(?:\s*,\s*[\d.]+%?)?)\s*)|hsba?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*)|hsla?(\s*([\d.]+(?:deg|\xb0|%)?\s*,\s*[\d.]+%?\s*,\s*[\d.]+(?:%?\s*,\s*[\d.]+)?%?)\s*))\s*:/i;a._.separator= RegExp("[,\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]+");var S=RegExp("[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*"),X={hs:1,rg:1},W=RegExp("([a-z])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)", "ig"),ma=RegExp("([rstm])[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)","ig"),Z=RegExp("(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*", "ig"),na=0,ba="S"+(+new Date).toString(36),V=function(){return ba+(na++).toString(36)},m="http://www.w3.org/1999/xlink",la="http://www.w3.org/2000/svg",E={},ca=a.url=function(c){return"url('#"+c+"')"};a._.$=v;a._.id=V;a.format=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|()|[('|")(.+?)\2])(())?/g,b=function(c,b,m){var h=m;b.replace(a,function(c,a,b,m,t){a=a||m;h&&(a in h&&(h=h[a]),"function"==typeof h&&t&&(h=h()))});return h=(null==h||h==m?c:h)+""};return function(a,m){return J(a).replace(c, function(c,a){return b(c,a,m)})}}();a._.clone=M;a._.cacher=A;a.rad=z;a.deg=function(c){return 180*c/C%360};a.angle=w;a.is=y;a.snapTo=function(c,a,b){b=y(b,"finite")?b:10;if(y(c,"array"))for(var m=c.length;m;){if(Y(c[m]-a)<=b)return c[m]}else{c=+c;m=a%c;if(m<b)return a-m;if(m>c-b)return a-m+c}return a};a.getRGB=A(function(c){if(!c||(c=J(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:ka};!X<a href="../c.toLowerCase().substring(0, 2)">h</a>&amp;&amp;"#"!=c.charAt()&amp;&amp;(c=T(c));if(!c)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka};var b,m,e,f,d;if(c=c.match(F)){c[2]&amp;&amp;(e=U(c[2].substring(5),16),m=U(c[2].substring(3,5),16),b=U(c[2].substring(1,3),16));c[3]&amp;&amp;(e=U((d=c[3].charAt(3))+d,16),m=U((d=c[3].charAt(2))+d,16),b=U((d=c[3].charAt(1))+d,16));c[4]&amp;&amp;(d=c[4].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b<em>=2.55),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m</em>=2.55),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e<em>=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])), d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100));if(c[5])return d=c[5].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100),"deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsba"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsb2rgb(b,m,e,f);if(c[6])return d=c[6].split(S),b=K(d[0]),"%"==d[0].slice(-1)&amp;&amp;(b/=100),m=K(d[1]),"%"==d[1].slice(-1)&amp;&amp;(m/=100),e=K(d[2]),"%"==d[2].slice(-1)&amp;&amp;(e/=100), "deg"!=d[0].slice(-3)&amp;&amp;"\u00b0"!=d[0].slice(-1)||(b/=360),"hsla"==c[1].toLowerCase().slice(0,4)&amp;&amp;(f=K(d[3])),d[3]&amp;&amp;"%"==d[3].slice(-1)&amp;&amp;(f/=100),a.hsl2rgb(b,m,e,f);b=Q(I.round(b),255);m=Q(I.round(m),255);e=Q(I.round(e),255);f=Q(P(f,0),1);c={r:b,g:m,b:e,toString:ka};c.hex="#"+(16777216|e|m&lt;&lt;8|b&lt;&lt;16).toString(16).slice(1);c.opacity=y(f,"finite")?f:1;return c}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ka}},a);a.hsb=A(function(c,b,m){return a.hsb2rgb(c,b,m).hex});a.hsl=A(function(c,b,m){return a.hsl2rgb(c, b,m).hex});a.rgb=A(function(c,a,b,m){if(y(m,"finite")){var e=I.round;return"rgba("+[e(c),e(a),e(b),+m.toFixed(2)]+")"}return"#"+(16777216|b|a&lt;&lt;8|c&lt;&lt;16).toString(16).slice(1)});var T=function(c){var a=G.doc.getElementsByTagName("head")[0]||G.doc.getElementsByTagName("svg")[0];T=A(function(c){if("red"==c.toLowerCase())return"rgb(255, 0, 0)";a.style.color="rgb(255, 0, 0)";a.style.color=c;c=G.doc.defaultView.getComputedStyle(a,aa).getPropertyValue("color");return"rgb(255, 0, 0)"==c?null:c});return T(c)}, qa=function(){return"hsb("+[this.h,this.s,this.b]+")"},ra=function(){return"hsl("+[this.h,this.s,this.l]+")"},ka=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},D=function(c,b,m){null==b&amp;&amp;y(c,"object")&amp;&amp;"r"in c&amp;&amp;"g"in c&amp;&amp;"b"in c&amp;&amp;(m=c.b,b=c.g,c=c.r);null==b&amp;&amp;y(c,string)&amp;&amp;(m=a.getRGB(c),c=m.r,b=m.g,m=m.b);if(1<c||1<b||1<m)c/=255,b/=255,m/=255;return[c,b,m]},oa=function(c,b,m,e){c=I.round(255*c);b=I.round(255*b);m=I.round(255*m);c={r:c, g:b,b:m,opacity:y(e,"finite")?e:1,hex:a.rgb(c,b,m),toString:ka};y(e,"finite")&&(c.opacity=e);return c};a.color=function(c){var b;y(c,"object")&&"h"in c&&"s"in c&&"b"in c?(b=a.hsb2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):y(c,"object")&&"h"in c&&"s"in c&&"l"in c?(b=a.hsl2rgb(c),c.r=b.r,c.g=b.g,c.b=b.b,c.opacity=1,c.hex=b.hex):(y(c,"string")&&(c=a.getRGB(c)),y(c,"object")&&"r"in c&&"g"in c&&"b"in c&&!("error"in c)?(b=a.rgb2hsl(c),c.h=b.h,c.s=b.s,c.l=b.l,b=a.rgb2hsb(c),c.v=b.b):(c={hex:"none"}, c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1,c.error=1));c.toString=ka;return c};a.hsb2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(b=c.b,a=c.s,c=c.h,m=c.o);var e,h,d;c=360*c%360/60;d=b*a;a=d*(1-Y(c%2-1));b=e=h=b-d;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.hsl2rgb=function(c,a,b,m){y(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(b=c.l,a=c.s,c=c.h);if(1<c||1<a||1<b)c/=360,a/=100,b/=100;var e,h,d;c=360*c%360/60;d=2*a*(0.5>b?b:1-b);a=d</em>(1-Y(c%2-1));b=e= h=b-d/2;c=~~c;b+=[d,a,0,0,a,d][c];e+=[a,d,d,a,0,0][c];h+=[0,0,a,d,d,a][c];return oa(b,e,h,m)};a.rgb2hsb=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e;m=P(c,a,b);e=m-Q(c,a,b);c=((0==e?0:m==c?(a-b)/e:m==a?(b-c)/e+2:(c-a)/e+4)+360)%6<em>60/360;return{h:c,s:0==e?0:e/m,b:m,toString:qa}};a.rgb2hsl=function(c,a,b){b=D(c,a,b);c=b[0];a=b[1];b=b[2];var m,e,h;m=P(c,a,b);e=Q(c,a,b);h=m-e;c=((0==h?0:m==c?(a-b)/h:m==a?(b-c)/h+2:(c-a)/h+4)+360)%6</em>60/360;m=(m+e)/2;return{h:c,s:0==h?0:0.5&gt;m?h/(2<em>m):h/(2-2</em> m),l:m,toString:ra}};a.parsePathString=function(c){if(!c)return null;var b=a.path(c);if(b.arr)return a.path.clone(b.arr);var m={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(e=a.path.clone(c));e.length||J(c).replace(W,function(c,a,b){var h=[];c=a.toLowerCase();b.replace(Z,function(c,a){a&amp;&amp;h.push(+a)});"m"==c&amp;&amp;2<h.length&&(e.push([a].concat(h.splice(0,2))),c="l",a="m"==a?"l":"L");"o"==c&&1==h.length&&e.push([a,h[0] ]);if("r"==c)e.push([a].concat(h));else for(;h.length>= m[c]&amp;&amp;(e.push([a].concat(h.splice(0,m[c]))),m[c]););});e.toString=a.path.toString;b.arr=a.path.clone(e);return e};var O=a.parseTransformString=function(c){if(!c)return null;var b=[];y(c,"array")&amp;&amp;y(c[0],"array")&amp;&amp;(b=a.path.clone(c));b.length||J(c).replace(ma,function(c,a,m){var e=[];a.toLowerCase();m.replace(Z,function(c,a){a&amp;&amp;e.push(+a)});b.push([a].concat(e))});b.toString=a.path.toString;return b};a.<em>.svgTransform2string=d;a.</em>.rgTransform=RegExp("^[a-z][\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]<em>-?.?\d", "i");a.<em>.transform2matrix=f;a._unit2px=b;a.</em>.getSomeDefs=u;a._.getSomeSVG=p;a.select=function(c){return x(G.doc.querySelector(c))};a.selectAll=function(c){c=G.doc.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};setInterval(function(){for(var c in E)if(E<a href="c">h</a>){var a=E[c],b=a.node;("svg"!=a.type&&!b.ownerSVGElement||"svg"==a.type&&(!b.parentNode||"ownerSVGElement"in b.parentNode&&!b.ownerSVGElement))&&delete E[c]}},1E4);(function(c){function m(c){function a(c, b){var m=v(c.node,b);(m=(m=m&&m.match(d))&&m[2])&&"#"==m.charAt()&&(m=m.substring(1))&&(f[m]=(f[m]||[]).concat(function(a){var m={};m[b]=ca(a);v(c.node,m)}))}function b(c){var a=v(c.node,"xlink:href");a&&"#"==a.charAt()&&(a=a.substring(1))&&(f[a]=(f[a]||[]).concat(function(a){c.attr("xlink:href","#"+a)}))}var e=c.selectAll("*"),h,d=/^\s*url(("|'|)(.*)\1)\s*:/;c=[];for(var f={},l=0,E=e.length;l<E;l++){h=e[l];a(h,"fill");a(h,"stroke");a(h,"filter");a(h,"mask");a(h,"clip-path");b(h);var t=v(h.node, "id");t&&(v(h.node,{id:h.id}),c.push({old:t,id:h.id}))}l=0;for(E=c.length;l<E;l++)if(e=f[c[l].old])for(h=0,t=e.length;h<t;h++)e<a href="c[l].id">h</a>}function e(c,a,b){return function(m){m=m.slice(c,a);1==m.length&&(m=m[0]);return b?b(m):m}}function d(c){return function(){var a=c?"<"+this.type:"",b=this.node.attributes,m=this.node.childNodes;if(c)for(var e=0,h=b.length;e<h;e++)a+=" "+b[e].name+'="'+b[e].value.replace(/"/g,'\"')+'"';if(m.length){c&&(a+=">");e=0;for(h=m.length;e<h;e++)3==m[e].nodeType?a+=m[e].nodeValue: 1==m[e].nodeType&&(a+=x(m[e]).toString());c&&(a+="</"+this.type+">")}else c&amp;&amp;(a+="/&gt;");return a}}c.attr=function(c,a){if(!c)return this;if(y(c,"string"))if(1<arguments.length){var b={};b[c]=a;c=b}else return k("snap.util.getattr."+c,this).firstDefined();for(var m in c)c<a href="m">h</a>&&k("snap.util.attr."+m,this,c[m]);return this};c.getBBox=function(c){if(!a.Matrix||!a.path)return this.node.getBBox();var b=this,m=new a.Matrix;if(b.removed)return a._.box();for(;"use"==b.type;)if(c||(m=m.add(b.transform().localMatrix.translate(b.attr("x")|| 0,b.attr("y")||0))),b.original)b=b.original;else var e=b.attr("xlink:href"),b=b.original=b.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1));var e=b._,h=a.path.get[b.type]||a.path.get.deflt;try{if(c)return e.bboxwt=h?a.path.getBBox(b.realPath=h(b)):a._.box(b.node.getBBox()),a._.box(e.bboxwt);b.realPath=h(b);b.matrix=b.transform().localMatrix;e.bbox=a.path.getBBox(a.path.map(b.realPath,m.add(b.matrix)));return a._.box(e.bbox)}catch(d){return a._.box()}};var f=function(){return this.string}; c.transform=function(c){var b=this._;if(null==c){var m=this;c=new a.Matrix(this.node.getCTM());for(var e=n(this),h=[e],d=new a.Matrix,l=e.toTransformString(),b=J(e)==J(this.matrix)?J(b.transform):l;"svg"!=m.type&&(m=m.parent());)h.push(n(m));for(m=h.length;m;)d.add(h[m]);return{string:b,globalMatrix:c,totalMatrix:d,localMatrix:e,diffMatrix:c.clone().add(e.invert()),global:c.toTransformString(),total:d.toTransformString(),local:l,toString:f}}c instanceof a.Matrix?this.matrix=c:n(this,c);this.node&& ("linearGradient"==this.type||"radialGradient"==this.type?v(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?v(this.node,{patternTransform:this.matrix}):v(this.node,{transform:this.matrix}));return this};c.parent=function(){return x(this.node.parentNode)};c.append=c.add=function(c){if(c){if("set"==c.type){var a=this;c.forEach(function(c){a.add(c)});return this}c=x(c);this.node.appendChild(c.node);c.paper=this.paper}return this};c.appendTo=function(c){c&&(c=x(c),c.append(this));return this}; c.prepend=function(c){if(c){if("set"==c.type){var a=this,b;c.forEach(function(c){b?b.after(c):a.prepend(c);b=c});return this}c=x(c);var m=c.parent();this.node.insertBefore(c.node,this.node.firstChild);this.add&&this.add();c.paper=this.paper;this.parent()&&this.parent().add();m&&m.add()}return this};c.prependTo=function(c){c=x(c);c.prepend(this);return this};c.before=function(c){if("set"==c.type){var a=this;c.forEach(function(c){var b=c.parent();a.node.parentNode.insertBefore(c.node,a.node);b&&b.add()}); this.parent().add();return this}c=x(c);var b=c.parent();this.node.parentNode.insertBefore(c.node,this.node);this.parent()&&this.parent().add();b&&b.add();c.paper=this.paper;return this};c.after=function(c){c=x(c);var a=c.parent();this.node.nextSibling?this.node.parentNode.insertBefore(c.node,this.node.nextSibling):this.node.parentNode.appendChild(c.node);this.parent()&&this.parent().add();a&&a.add();c.paper=this.paper;return this};c.insertBefore=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node, c.node);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.insertAfter=function(c){c=x(c);var a=this.parent();c.node.parentNode.insertBefore(this.node,c.node.nextSibling);this.paper=c.paper;a&&a.add();c.parent()&&c.parent().add();return this};c.remove=function(){var c=this.parent();this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.paper;this.removed=!0;c&&c.add();return this};c.select=function(c){return x(this.node.querySelector(c))};c.selectAll= function(c){c=this.node.querySelectorAll(c);for(var b=(a.set||Array)(),m=0;m<c.length;m++)b.push(x(c[m]));return b};c.asPX=function(c,a){null==a&&(a=this.attr(c));return+b(this,c,a)};c.use=function(){var c,a=this.node.id;a||(a=this.id,v(this.node,{id:a}));c="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?r(this.type,this.node.parentNode):r("use",this.node.parentNode);v(c.node,{"xlink:href":"#"+a});c.original=this;return c};var l=/\S+/g;c.addClass=function(c){var a=(c|| "").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h,d;if(a.length){for(e=0;d=a[e++];)h=m.indexOf(d),~h||m.push(d);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.removeClass=function(c){var a=(c||"").match(l)||[];c=this.node;var b=c.className.baseVal,m=b.match(l)||[],e,h;if(m.length){for(e=0;h=a[e++];)h=m.indexOf(h),~h&&m.splice(h,1);a=m.join(" ");b!=a&&(c.className.baseVal=a)}return this};c.hasClass=function(c){return!!~(this.node.className.baseVal.match(l)||[]).indexOf(c)}; c.toggleClass=function(c,a){if(null!=a)return a?this.addClass(c):this.removeClass(c);var b=(c||"").match(l)||[],m=this.node,e=m.className.baseVal,h=e.match(l)||[],d,f,E;for(d=0;E=b[d++];)f=h.indexOf(E),~f?h.splice(f,1):h.push(E);b=h.join(" ");e!=b&&(m.className.baseVal=b);return this};c.clone=function(){var c=x(this.node.cloneNode(!0));v(c.node,"id")&&v(c.node,{id:c.id});m(c);c.insertAfter(this);return c};c.toDefs=function(){u(this).appendChild(this.node);return this};c.pattern=c.toPattern=function(c, a,b,m){var e=r("pattern",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,c=c.x);v(e.node,{x:c,y:a,width:b,height:m,patternUnits:"userSpaceOnUse",id:e.id,viewBox:[c,a,b,m].join(" ")});e.node.appendChild(this.node);return e};c.marker=function(c,a,b,m,e,h){var d=r("marker",u(this));null==c&&(c=this.getBBox());y(c,"object")&&"x"in c&&(a=c.y,b=c.width,m=c.height,e=c.refX||c.cx,h=c.refY||c.cy,c=c.x);v(d.node,{viewBox:[c,a,b,m].join(" "),markerWidth:b,markerHeight:m, orient:"auto",refX:e||0,refY:h||0,id:d.id});d.node.appendChild(this.node);return d};var E=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);this.attr=c;this.dur=a;b&&(this.easing=b);m&&(this.callback=m)};a._.Animation=E;a.animation=function(c,a,b,m){return new E(c,a,b,m)};c.inAnim=function(){var c=[],a;for(a in this.anims)this.anims<a href="a">h</a>&&function(a){c.push({anim:new E(a._attrs,a.dur,a.easing,a._callback),mina:a,curStatus:a.status(),status:function(c){return a.status(c)},stop:function(){a.stop()}})}(this.anims[a]); return c};a.animate=function(c,a,b,m,e,h){"function"!=typeof e||e.length||(h=e,e=L.linear);var d=L.time();c=L(c,a,d,d+m,L.time,b,e);h&&k.once("mina.finish."+c.id,h);return c};c.stop=function(){for(var c=this.inAnim(),a=0,b=c.length;a<b;a++)c[a].stop();return this};c.animate=function(c,a,b,m){"function"!=typeof b||b.length||(m=b,b=L.linear);c instanceof E&&(m=c.callback,b=c.easing,a=b.dur,c=c.attr);var d=[],f=[],l={},t,ca,n,T=this,q;for(q in c)if(c<a href="q">h</a>){T.equal?(n=T.equal(q,J(c[q])),t=n.from,ca= n.to,n=n.f):(t=+T.attr(q),ca=+c[q]);var la=y(t,"array")?t.length:1;l[q]=e(d.length,d.length+la,n);d=d.concat(t);f=f.concat(ca)}t=L.time();var p=L(d,f,t,t+a,L.time,function(c){var a={},b;for(b in l)l<a href="b">h</a>&&(a[b]=l<a href="c">b</a>);T.attr(a)},b);T.anims[p.id]=p;p._attrs=c;p._callback=m;k("snap.animcreated."+T.id,p);k.once("mina.finish."+p.id,function(){delete T.anims[p.id];m&&m.call(T)});k.once("mina.stop."+p.id,function(){delete T.anims[p.id]});return T};var T={};c.data=function(c,b){var m=T[this.id]=T[this.id]|| {};if(0==arguments.length)return k("snap.data.get."+this.id,this,m,null),m;if(1==arguments.length){if(a.is(c,"object")){for(var e in c)c<a href="e">h</a>&&this.data(e,c[e]);return this}k("snap.data.get."+this.id,this,m[c],c);return m[c]}m[c]=b;k("snap.data.set."+this.id,this,b,c);return this};c.removeData=function(c){null==c?T[this.id]={}:T[this.id]&&delete T[this.id][c];return this};c.outerSVG=c.toString=d(1);c.innerSVG=d()})(e.prototype);a.parse=function(c){var a=G.doc.createDocumentFragment(),b=!0,m=G.doc.createElement("div"); c=J(c);c.match(/^\s*<\s*svg(?:\s|>)/)||(c="<svg>"+c+"</svg>",b=!1);m.innerHTML=c;if(c=m.getElementsByTagName("svg")[0])if(b)a=c;else for(;c.firstChild;)a.appendChild(c.firstChild);m.innerHTML=aa;return new l(a)};l.prototype.select=e.prototype.select;l.prototype.selectAll=e.prototype.selectAll;a.fragment=function(){for(var c=Array.prototype.slice.call(arguments,0),b=G.doc.createDocumentFragment(),m=0,e=c.length;m<e;m++){var h=c[m];h.node&&h.node.nodeType&&b.appendChild(h.node);h.nodeType&&b.appendChild(h); "string"==typeof h&&b.appendChild(a.parse(h).node)}return new l(b)};a._.make=r;a._.wrap=x;s.prototype.el=function(c,a){var b=r(c,this.node);a&&b.attr(a);return b};k.on("snap.util.getattr",function(){var c=k.nt(),c=c.substring(c.lastIndexOf(".")+1),a=c.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});return pa<a href="a">h</a>?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(a):v(this.node,c)});var pa={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0, "clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0, "lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};k.on("snap.util.attr",function(c){var a=k.nt(),b={},a=a.substring(a.lastIndexOf(".")+ 1);b[a]=c;var m=a.replace(/-(\w)/gi,function(c,a){return a.toUpperCase()}),a=a.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase()});pa<a href="a">h</a>?this.node.style[m]=null==c?aa:c:v(this.node,b)});a.ajax=function(c,a,b,m){var e=new XMLHttpRequest,h=V();if(e){if(y(a,"function"))m=b,b=a,a=null;else if(y(a,"object")){var d=[],f;for(f in a)a.hasOwnProperty(f)&&d.push(encodeURIComponent(f)+"="+encodeURIComponent(a[f]));a=d.join("&")}e.open(a?"POST":"GET",c,!0);a&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"), e.setRequestHeader("Content-type","application/x-www-form-urlencoded"));b&&(k.once("snap.ajax."+h+".0",b),k.once("snap.ajax."+h+".200",b),k.once("snap.ajax."+h+".304",b));e.onreadystatechange=function(){4==e.readyState&&k("snap.ajax."+h+"."+e.status,m,e)};if(4==e.readyState)return e;e.send(a);return e}};a.load=function(c,b,m){a.ajax(c,function(c){c=a.parse(c.responseText);m?b.call(m,c):b(c)})};a.getElementByPoint=function(c,a){var b,m,e=G.doc.elementFromPoint(c,a);if(G.win.opera&&"svg"==e.tagName){b= e;m=b.getBoundingClientRect();b=b.ownerDocument;var h=b.body,d=b.documentElement;b=m.top+(g.win.pageYOffset||d.scrollTop||h.scrollTop)-(d.clientTop||h.clientTop||0);m=m.left+(g.win.pageXOffset||d.scrollLeft||h.scrollLeft)-(d.clientLeft||h.clientLeft||0);h=e.createSVGRect();h.x=c-m;h.y=a-b;h.width=h.height=1;b=e.getIntersectionList(h,null);b.length&&(e=b[b.length-1])}return e?x(e):null};a.plugin=function(c){c(a,e,s,G,l)};return G.win.Snap=a}();C.plugin(function(a,k,y,M,A){function w(a,d,f,b,q,e){null== d&&"[object SVGMatrix]"==z.call(a)?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.e=a.e,this.f=a.f):null!=a?(this.a=+a,this.b=+d,this.c=+f,this.d=+b,this.e=+q,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}var z=Object.prototype.toString,d=String,f=Math;(function(n){function k(a){return a[0]*a[0]+a[1]*a[1]}function p(a){var d=f.sqrt(k(a));a[0]&&(a[0]/=d);a[1]&&(a[1]/=d)}n.add=function(a,d,e,f,n,p){var k=[[],[],[] ],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1] ];d=[[a, e,n],[d,f,p],[0,0,1] ];a&&a instanceof w&&(d=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1] ]);for(a=0;3>a;a++)for(e=0;3&gt;e;e++){for(f=n=0;3&gt;f;f++)n+=u[a][f]</em>d[f][e];k[a][e]=n}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2];return this};n.invert=function(){var a=this.a<em>this.d-this.b</em>this.c;return new w(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c<em>this.f-this.d</em>this.e)/a,(this.b<em>this.e-this.a</em>this.f)/a)};n.clone=function(){return new w(this.a,this.b,this.c,this.d,this.e, this.f)};n.translate=function(a,d){return this.add(1,0,0,1,a,d)};n.scale=function(a,d,e,f){null==d&amp;&amp;(d=a);(e||f)&amp;&amp;this.add(1,0,0,1,e,f);this.add(a,0,0,d,0,0);(e||f)&amp;&amp;this.add(1,0,0,1,-e,-f);return this};n.rotate=function(b,d,e){b=a.rad(b);d=d||0;e=e||0;var l=+f.cos(b).toFixed(9);b=+f.sin(b).toFixed(9);this.add(l,b,-b,l,d,e);return this.add(1,0,0,1,-d,-e)};n.x=function(a,d){return a<em>this.a+d</em>this.c+this.e};n.y=function(a,d){return a<em>this.b+d</em>this.d+this.f};n.get=function(a){return+this[d.fromCharCode(97+ a)].toFixed(4)};n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};n.determinant=function(){return this.a<em>this.d-this.b</em>this.c};n.split=function(){var b={};b.dx=this.e;b.dy=this.f;var d=[[this.a,this.c],[this.b,this.d] ];b.scalex=f.sqrt(k(d[0]));p(d[0]);b.shear=d[0][0]<em>d[1][0]+d[0][1]</em>d[1][1];d[1]=[d[1][0]-d[0][0]<em>b.shear,d[1][1]-d[0][1]</em>b.shear];b.scaley=f.sqrt(k(d[1])); p(d[1]);b.shear/=b.scaley;0&gt;this.determinant()&amp;&amp;(b.scalex=-b.scalex);var e=-d[0][1],d=d[1][1];0&gt;d?(b.rotate=a.deg(f.acos(d)),0&gt;e&amp;&amp;(b.rotate=360-b.rotate)):b.rotate=a.deg(f.asin(e));b.isSimple=!+b.shear.toFixed(9)&amp;&amp;(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate);b.isSuperSimple=!+b.shear.toFixed(9)&amp;&amp;b.scalex.toFixed(9)==b.scaley.toFixed(9)&amp;&amp;!b.rotate;b.noRotation=!+b.shear.toFixed(9)&amp;&amp;!b.rotate;return b};n.toTransformString=function(a){a=a||this.split();if(+a.shear.toFixed(9))return"m"+[this.get(0), this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];a.scalex=+a.scalex.toFixed(4);a.scaley=+a.scaley.toFixed(4);a.rotate=+a.rotate.toFixed(4);return(a.dx||a.dy?"t"+[+a.dx.toFixed(4),+a.dy.toFixed(4)]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[+a.rotate.toFixed(4),0,0]:"")}})(w.prototype);a.Matrix=w;a.matrix=function(a,d,f,b,k,e){return new w(a,d,f,b,k,e)}});C.plugin(function(a,v,y,M,A){function w(h){return function(d){k.stop();d instanceof A&amp;&amp;1==d.node.childNodes.length&amp;&amp; ("radialGradient"==d.node.firstChild.tagName||"linearGradient"==d.node.firstChild.tagName||"pattern"==d.node.firstChild.tagName)&amp;&amp;(d=d.node.firstChild,b(this).appendChild(d),d=u(d));if(d instanceof v)if("radialGradient"==d.type||"linearGradient"==d.type||"pattern"==d.type){d.node.id||e(d.node,{id:d.id});var f=l(d.node.id)}else f=d.attr(h);else f=a.color(d),f.error?(f=a(b(this).ownerSVGElement).gradient(d))?(f.node.id||e(f.node,{id:f.id}),f=l(f.node.id)):f=d:f=r(f);d={};d[h]=f;e(this.node,d);this.node.style[h]= x}}function z(a){k.stop();a==+a&amp;&amp;(a+="px");this.node.style.fontSize=a}function d(a){var b=[];a=a.childNodes;for(var e=0,f=a.length;e<f;e++){var l=a[e];3==l.nodeType&&b.push(l.nodeValue);"tspan"==l.tagName&&(1==l.childNodes.length&&3==l.firstChild.nodeType?b.push(l.firstChild.nodeValue):b.push(d(l)))}return b}function f(){k.stop();return this.node.style.fontSize}var n=a._.make,u=a._.wrap,p=a.is,b=a._.getSomeDefs,q=/^url(#?([^)]+))$/,e=a._.$,l=a.url,r=String,s=a._.separator,x="";k.on("snap.util.attr.mask", function(a){if(a instanceof v||a instanceof A){k.stop();a instanceof A&&1==a.node.childNodes.length&&(a=a.node.firstChild,b(this).appendChild(a),a=u(a));if("mask"==a.type)var d=a;else d=n("mask",b(this)),d.node.appendChild(a.node);!d.node.id&&e(d.node,{id:d.id});e(this.node,{mask:l(d.id)})}});(function(a){k.on("snap.util.attr.clip",a);k.on("snap.util.attr.clip-path",a);k.on("snap.util.attr.clipPath",a)})(function(a){if(a instanceof v||a instanceof A){k.stop();if("clipPath"==a.type)var d=a;else d= n("clipPath",b(this)),d.node.appendChild(a.node),!d.node.id&&e(d.node,{id:d.id});e(this.node,{"clip-path":l(d.id)})}});k.on("snap.util.attr.fill",w("fill"));k.on("snap.util.attr.stroke",w("stroke"));var G=/^([lr])(?:(([^)]*)))?(.*)$/i;k.on("snap.util.grad.parse",function(a){a=r(a);var b=a.match(G);if(!b)return null;a=b[1];var e=b[2],b=b[3],e=e.split(/\s*,\s*/).map(function(a){return+a==a?+a:a});1==e.length&&0==e[0]&&(e=[]);b=b.split("-");b=b.map(function(a){a=a.split(":");var b={color:a[0]};a[1]&& (b.offset=parseFloat(a[1]));return b});return{type:a,params:e,stops:b}});k.on("snap.util.attr.d",function(b){k.stop();p(b,"array")&&p(b[0],"array")&&(b=a.path.toString.call(b));b=r(b);b.match(/[ruo]/i)&&(b=a.path.toAbsolute(b));e(this.node,{d:b})})(-1);k.on("snap.util.attr.#text",function(a){k.stop();a=r(a);for(a=M.doc.createTextNode(a);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(a)})(-1);k.on("snap.util.attr.path",function(a){k.stop();this.attr({d:a})})(-1); k.on("snap.util.attr.class",function(a){k.stop();this.node.className.baseVal=a})(-1);k.on("snap.util.attr.viewBox",function(a){a=p(a,"object")&&"x"in a?[a.x,a.y,a.width,a.height].join(" "):p(a,"array")?a.join(" "):a;e(this.node,{viewBox:a});k.stop()})(-1);k.on("snap.util.attr.transform",function(a){this.transform(a);k.stop()})(-1);k.on("snap.util.attr.r",function(a){"rect"==this.type&&(k.stop(),e(this.node,{rx:a,ry:a}))})(-1);k.on("snap.util.attr.textpath",function(a){k.stop();if("text"==this.type){var d, f;if(!a&&this.textPath){for(a=this.textPath;a.node.firstChild;)this.node.appendChild(a.node.firstChild);a.remove();delete this.textPath}else if(p(a,"string")?(d=b(this),a=u(d.parentNode).path(a),d.appendChild(a.node),d=a.id,a.attr({id:d})):(a=u(a),a instanceof v&&(d=a.attr("id"),d||(d=a.id,a.attr({id:d})))),d)if(a=this.textPath,f=this.node,a)a.attr({"xlink:href":"#"+d});else{for(a=e("textPath",{"xlink:href":"#"+d});f.firstChild;)a.appendChild(f.firstChild);f.appendChild(a);this.textPath=u(a)}}})(-1); k.on("snap.util.attr.text",function(a){if("text"==this.type){for(var b=this.node,d=function(a){var b=e("tspan");if(p(a,"array"))for(var f=0;f<a.length;f++)b.appendChild(d(a[f]));else b.appendChild(M.doc.createTextNode(a));b.normalize&&b.normalize();return b};b.firstChild;)b.removeChild(b.firstChild);for(a=d(a);a.firstChild;)b.appendChild(a.firstChild)}k.stop()})(-1);k.on("snap.util.attr.fontSize",z)(-1);k.on("snap.util.attr.font-size",z)(-1);k.on("snap.util.getattr.transform",function(){k.stop(); return this.transform()})(-1);k.on("snap.util.getattr.textpath",function(){k.stop();return this.textPath})(-1);(function(){function b(d){return function(){k.stop();var b=M.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+d);return"none"==b?b:a(M.doc.getElementById(b.match(q)[1]))}}function d(a){return function(b){k.stop();var d="marker"+a.charAt(0).toUpperCase()+a.substring(1);if(""==b||!b)this.node.style[d]="none";else if("marker"==b.type){var f=b.node.id;f||e(b.node,{id:b.id}); this.node.style[d]=l(f)}}}k.on("snap.util.getattr.marker-end",b("end"))(-1);k.on("snap.util.getattr.markerEnd",b("end"))(-1);k.on("snap.util.getattr.marker-start",b("start"))(-1);k.on("snap.util.getattr.markerStart",b("start"))(-1);k.on("snap.util.getattr.marker-mid",b("mid"))(-1);k.on("snap.util.getattr.markerMid",b("mid"))(-1);k.on("snap.util.attr.marker-end",d("end"))(-1);k.on("snap.util.attr.markerEnd",d("end"))(-1);k.on("snap.util.attr.marker-start",d("start"))(-1);k.on("snap.util.attr.markerStart", d("start"))(-1);k.on("snap.util.attr.marker-mid",d("mid"))(-1);k.on("snap.util.attr.markerMid",d("mid"))(-1)})();k.on("snap.util.getattr.r",function(){if("rect"==this.type&&e(this.node,"rx")==e(this.node,"ry"))return k.stop(),e(this.node,"rx")})(-1);k.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){k.stop();var a=d(this.node);return 1==a.length?a[0]:a}})(-1);k.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);k.on("snap.util.getattr.viewBox", function(){k.stop();var b=e(this.node,"viewBox");if(b)return b=b.split(s),a._.box(+b[0],+b[1],+b[2],+b[3])})(-1);k.on("snap.util.getattr.points",function(){var a=e(this.node,"points");k.stop();if(a)return a.split(s)})(-1);k.on("snap.util.getattr.path",function(){var a=e(this.node,"d");k.stop();return a})(-1);k.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);k.on("snap.util.getattr.fontSize",f)(-1);k.on("snap.util.getattr.font-size",f)(-1)});C.plugin(function(a,v,y, M,A){function w(a){return a}function z(a){return function(b){return+b.toFixed(3)+a}}var d={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"/":function(a,b){return a/b},"*":function(a,b){return a*b}},f=String,n=/[a-z]+$/i,u=/^\s*([+-\/*])\s*=\s*([\d.eE+-]+)\s*([^\d\s]+)?\s*$/;k.on("snap.util.attr",function(a){if(a=f(a).match(u)){var b=k.nt(),b=b.substring(b.lastIndexOf(".")+1),q=this.attr(b),e={};k.stop();var l=a[3]||"",r=q.match(n),s=d[a[1] ];r&&r==l?a=s(parseFloat(q),+a[2]):(q=this.asPX(b), a=s(this.asPX(b),this.asPX(b,a[2]+l)));isNaN(q)||isNaN(a)||(e[b]=a,this.attr(e))}})(-10);k.on("snap.util.equal",function(a,b){var q=f(this.attr(a)||""),e=f(b).match(u);if(e){k.stop();var l=e[3]||"",r=q.match(n),s=d[e[1] ];if(r&&r==l)return{from:parseFloat(q),to:s(parseFloat(q),+e[2]),f:z(r)};q=this.asPX(a);return{from:q,to:s(q,this.asPX(a,e[2]+l)),f:w}}})(-10)});C.plugin(function(a,v,y,M,A){var w=y.prototype,z=a.is;w.rect=function(a,d,k,p,b,q){var e;null==q&&(q=b);z(a,"object")&&"[object Object]"== a?e=a:null!=a&&(e={x:a,y:d,width:k,height:p},null!=b&&(e.rx=b,e.ry=q));return this.el("rect",e)};w.circle=function(a,d,k){var p;z(a,"object")&&"[object Object]"==a?p=a:null!=a&&(p={cx:a,cy:d,r:k});return this.el("circle",p)};var d=function(){function a(){this.parentNode.removeChild(this)}return function(d,k){var p=M.doc.createElement("img"),b=M.doc.body;p.style.cssText="position:absolute;left:-9999em;top:-9999em";p.onload=function(){k.call(p);p.onload=p.onerror=null;b.removeChild(p)};p.onerror=a; b.appendChild(p);p.src=d}}();w.image=function(f,n,k,p,b){var q=this.el("image");if(z(f,"object")&&"src"in f)q.attr(f);else if(null!=f){var e={"xlink:href":f,preserveAspectRatio:"none"};null!=n&&null!=k&&(e.x=n,e.y=k);null!=p&&null!=b?(e.width=p,e.height=b):d(f,function(){a._.$(q.node,{width:this.offsetWidth,height:this.offsetHeight})});a._.$(q.node,e)}return q};w.ellipse=function(a,d,k,p){var b;z(a,"object")&&"[object Object]"==a?b=a:null!=a&&(b={cx:a,cy:d,rx:k,ry:p});return this.el("ellipse",b)}; w.path=function(a){var d;z(a,"object")&&!z(a,"array")?d=a:a&&(d={d:a});return this.el("path",d)};w.group=w.g=function(a){var d=this.el("g");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.svg=function(a,d,k,p,b,q,e,l){var r={};z(a,"object")&&null==d?r=a:(null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l]));return this.el("svg",r)};w.mask=function(a){var d= this.el("mask");1==arguments.length&&a&&!a.type?d.attr(a):arguments.length&&d.add(Array.prototype.slice.call(arguments,0));return d};w.ptrn=function(a,d,k,p,b,q,e,l){if(z(a,"object"))var r=a;else arguments.length?(r={},null!=a&&(r.x=a),null!=d&&(r.y=d),null!=k&&(r.width=k),null!=p&&(r.height=p),null!=b&&null!=q&&null!=e&&null!=l&&(r.viewBox=[b,q,e,l])):r={patternUnits:"userSpaceOnUse"};return this.el("pattern",r)};w.use=function(a){return null!=a?(make("use",this.node),a instanceof v&&(a.attr("id")|| a.attr({id:ID()}),a=a.attr("id")),this.el("use",{"xlink:href":a})):v.prototype.use.call(this)};w.text=function(a,d,k){var p={};z(a,"object")?p=a:null!=a&&(p={x:a,y:d,text:k||""});return this.el("text",p)};w.line=function(a,d,k,p){var b={};z(a,"object")?b=a:null!=a&&(b={x1:a,x2:k,y1:d,y2:p});return this.el("line",b)};w.polyline=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polyline",d)}; w.polygon=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments,0));var d={};z(a,"object")&&!z(a,"array")?d=a:null!=a&&(d={points:a});return this.el("polygon",d)};(function(){function d(){return this.selectAll("stop")}function n(b,d){var f=e("stop"),k={offset:+d+"%"};b=a.color(b);k["stop-color"]=b.hex;1>b.opacity&amp;&amp;(k["stop-opacity"]=b.opacity);e(f,k);this.node.appendChild(f);return this}function u(){if("linearGradient"==this.type){var b=e(this.node,"x1")||0,d=e(this.node,"x2")|| 1,f=e(this.node,"y1")||0,k=e(this.node,"y2")||0;return a.<em>.box(b,f,math.abs(d-b),math.abs(k-f))}b=this.node.r||0;return a.</em>.box((this.node.cx||0.5)-b,(this.node.cy||0.5)-b,2<em>b,2</em>b)}function p(a,d){function f(a,b){for(var d=(b-u)/(a-w),e=w;e<a;e++)h[e].offset=+(+u+d*(e-w)).toFixed(2);w=a;u=b}var n=k("snap.util.grad.parse",null,d).firstDefined(),p;if(!n)return null;n.params.unshift(a);p="l"==n.type.toLowerCase()?b.apply(0,n.params):q.apply(0,n.params);n.type!=n.type.toLowerCase()&&e(p.node,{gradientUnits:"userSpaceOnUse"}); var h=n.stops,n=h.length,u=0,w=0;n--;for(var v=0;v<n;v++)"offset"in h[v]&&f(v,h[v].offset);h[n].offset=h[n].offset||100;f(n,h[n].offset);for(v=0;v<=n;v++){var y=h[v];p.addStop(y.color,y.offset)}return p}function b(b,k,p,q,w){b=a._.make("linearGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{x1:k,y1:p,x2:q,y2:w});return b}function q(b,k,p,q,w,h){b=a._.make("radialGradient",b);b.stops=d;b.addStop=n;b.getBBox=u;null!=k&&e(b.node,{cx:k,cy:p,r:q});null!=w&&null!=h&&e(b.node,{fx:w,fy:h}); return b}var e=a._.$;w.gradient=function(a){return p(this.defs,a)};w.gradientLinear=function(a,d,e,f){return b(this.defs,a,d,e,f)};w.gradientRadial=function(a,b,d,e,f){return q(this.defs,a,b,d,e,f)};w.toString=function(){var b=this.node.ownerDocument,d=b.createDocumentFragment(),b=b.createElement("div"),e=this.node.cloneNode(!0);d.appendChild(b);b.appendChild(e);a._.$(e,{xmlns:"http://www.w3.org/2000/svg"});b=b.innerHTML;d.removeChild(d.firstChild);return b};w.clear=function(){for(var a=this.node.firstChild, b;a;)b=a.nextSibling,"defs"!=a.tagName?a.parentNode.removeChild(a):w.clear.call({node:a}),a=b}})()});C.plugin(function(a,k,y,M){function A(a){var b=A.ps=A.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b<a href="d">L</a>&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]}function w(a,b,d,e){null==a&&(a=b=d=e=0);null==b&&(b=a.y,d=a.width,e=a.height,a=a.x);return{x:a,y:b,width:d,w:d,height:e,h:e,x2:a+d,y2:b+e,cx:a+d/2,cy:b+e/2,r1:F.min(d,e)/2,r2:F.max(d,e)/2,r0:F.sqrt(d* d+e*e)/2,path:s(a,b,d,e),vb:[a,b,d,e].join(" ")}}function z(){return this.join(",").replace(N,"$1")}function d(a){a=C(a);a.toString=z;return a}function f(a,b,d,h,f,k,l,n,p){if(null==p)return e(a,b,d,h,f,k,l,n);if(0>p||e(a,b,d,h,f,k,l,n)<p)p=void 0;else{var q=0.5,O=1-q,s;for(s=e(a,b,d,h,f,k,l,n,O);0.01<Z(s-p);)q/=2,O+=(s<p?1:-1)*q,s=e(a,b,d,h,f,k,l,n,O);p=O}return u(a,b,d,h,f,k,l,n,p)}function n(b,d){function e(a){return+(+a).toFixed(3)}return a._.cacher(function(a,h,l){a instanceof k&&(a=a.attr("d")); a=I(a);for(var n,p,D,q,O="",s={},c=0,t=0,r=a.length;t<r;t++){D=a[t];if("M"==D[0])n=+D[1],p=+D[2];else{q=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6]);if(c+q>h){if(d&amp;&amp;!s.start){n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c);O+=["C"+e(n.start.x),e(n.start.y),e(n.m.x),e(n.m.y),e(n.x),e(n.y)];if(l)return O;s.start=O;O=["M"+e(n.x),e(n.y)+"C"+e(n.n.x),e(n.n.y),e(n.end.x),e(n.end.y),e(D[5]),e(D[6])].join();c+=q;n=+D[5];p=+D[6];continue}if(!b&amp;&amp;!d)return n=f(n,p,D[1],D[2],D[3],D[4],D[5],D[6],h-c)}c+=q;n=+D[5];p=+D[6]}O+= D.shift()+D}s.end=O;return n=b?c:d?s:u(n,p,D[0],D[1],D[2],D[3],D[4],D[5],1)},null,a.<em>.clone)}function u(a,b,d,e,h,f,k,l,n){var p=1-n,q=ma(p,3),s=ma(p,2),c=n<em>n,t=c</em>n,r=q<em>a+3</em>s<em>n</em>d+3<em>p</em>n<em>n</em>h+t<em>k,q=q</em>b+3<em>s</em>n<em>e+3</em>p<em>n</em>n<em>f+t</em>l,s=a+2<em>n</em>(d-a)+c<em>(h-2</em>d+a),t=b+2<em>n</em>(e-b)+c<em>(f-2</em>e+b),x=d+2<em>n</em>(h-d)+c<em>(k-2</em>h+d),c=e+2<em>n</em>(f-e)+c<em>(l-2</em>f+e);a=p<em>a+n</em>d;b=p<em>b+n</em>e;h=p<em>h+n</em>k;f=p<em>f+n</em>l;l=90-180<em>F.atan2(s-x,t-c)/S;return{x:r,y:q,m:{x:s,y:t},n:{x:x,y:c},start:{x:a,y:b},end:{x:h,y:f},alpha:l}}function p(b,d,e,h,f,n,k,l){a.is(b, "array")||(b=[b,d,e,h,f,n,k,l]);b=U.apply(null,b);return w(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y)}function b(a,b,d){return b&gt;=a.x&amp;&amp;b&lt;=a.x+a.width&amp;&amp;d&gt;=a.y&amp;&amp;d&lt;=a.y+a.height}function q(a,d){a=w(a);d=w(d);return b(d,a.x,a.y)||b(d,a.x2,a.y)||b(d,a.x,a.y2)||b(d,a.x2,a.y2)||b(a,d.x,d.y)||b(a,d.x2,d.y)||b(a,d.x,d.y2)||b(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&amp;&amp;(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)}function e(a,b,d,e,h,f,n,k,l){null==l&amp;&amp;(l=1);l=(1<l?1:0>l?0:l)/2;for(var p=[-0.1252, 0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],q=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],s=0,c=0;12&gt;c;c++)var t=l</em>p[c]+l,r=t<em>(t</em>(-3<em>a+9</em>d-9<em>h+3</em>n)+6<em>a-12</em>d+6<em>h)-3</em>a+3<em>d,t=t</em>(t<em>(-3</em>b+9<em>e-9</em>f+3<em>k)+6</em>b-12<em>e+6</em>f)-3<em>b+3</em>e,s=s+q[c]<em>F.sqrt(r</em>r+t<em>t);return l</em>s}function l(a,b,d){a=I(a);b=I(b);for(var h,f,l,n,k,s,r,O,x,c,t=d?0:[],w=0,v=a.length;w<v;w++)if(x=a[w],"M"==x[0])h=k=x[1],f=s=x[2];else{"C"==x[0]?(x=[h,f].concat(x.slice(1)), h=x[6],f=x[7]):(x=[h,f,h,f,k,s,k,s],h=k,f=s);for(var G=0,y=b.length;G<y;G++)if(c=b[G],"M"==c[0])l=r=c[1],n=O=c[2];else{"C"==c[0]?(c=[l,n].concat(c.slice(1)),l=c[6],n=c[7]):(c=[l,n,l,n,r,O,r,O],l=r,n=O);var z;var K=x,B=c;z=d;var H=p(K),J=p(B);if(q(H,J)){for(var H=e.apply(0,K),J=e.apply(0,B),H=~~(H/8),J=~~(J/8),U=[],A=[],F={},M=z?0:[],P=0;P<H+1;P++){var C=u.apply(0,K.concat(P/H));U.push({x:C.x,y:C.y,t:P/H})}for(P=0;P<J+1;P++)C=u.apply(0,B.concat(P/J)),A.push({x:C.x,y:C.y,t:P/J});for(P=0;P<H;P++)for(K= 0;K<J;K++){var Q=U[P],L=U[P+1],B=A[K],C=A[K+1],N=0.001>Z(L.x-Q.x)?"y":"x",S=0.001&gt;Z(C.x-B.x)?"y":"x",R;R=Q.x;var Y=Q.y,V=L.x,ea=L.y,fa=B.x,ga=B.y,ha=C.x,ia=C.y;if(W(R,V)<X(fa,ha)||X(R,V)>W(fa,ha)||W(Y,ea)<X(ga,ia)||X(Y,ea)>W(ga,ia))R=void 0;else{var $=(R<em>ea-Y</em>V)<em>(fa-ha)-(R-V)</em>(fa<em>ia-ga</em>ha),aa=(R<em>ea-Y</em>V)<em>(ga-ia)-(Y-ea)</em>(fa<em>ia-ga</em>ha),ja=(R-V)<em>(ga-ia)-(Y-ea)</em>(fa-ha);if(ja){var $=$/ja,aa=aa/ja,ja=+$.toFixed(2),ba=+aa.toFixed(2);R=ja&lt;+X(R,V).toFixed(2)||ja&gt;+W(R,V).toFixed(2)||ja&lt;+X(fa,ha).toFixed(2)|| ja&gt;+W(fa,ha).toFixed(2)||ba&lt;+X(Y,ea).toFixed(2)||ba&gt;+W(Y,ea).toFixed(2)||ba&lt;+X(ga,ia).toFixed(2)||ba&gt;+W(ga,ia).toFixed(2)?void 0:{x:$,y:aa}}else R=void 0}R&amp;&amp;F[R.x.toFixed(4)]!=R.y.toFixed(4)&amp;&amp;(F[R.x.toFixed(4)]=R.y.toFixed(4),Q=Q.t+Z((R[N]-Q[N])/(L[N]-Q[N]))<em>(L.t-Q.t),B=B.t+Z((R[S]-B[S])/(C[S]-B[S]))</em>(C.t-B.t),0&lt;=Q&amp;&amp;1&gt;=Q&amp;&amp;0&lt;=B&amp;&amp;1&gt;=B&amp;&amp;(z?M++:M.push({x:R.x,y:R.y,t1:Q,t2:B})))}z=M}else z=z?0:[];if(d)t+=z;else{H=0;for(J=z.length;H<J;H++)z[H].segment1=w,z[H].segment2=G,z[H].bez1=x,z[H].bez2=c;t=t.concat(z)}}}return t} function r(a){var b=A(a);if(b.bbox)return C(b.bbox);if(!a)return w();a=I(a);for(var d=0,e=0,h=[],f=[],l,n=0,k=a.length;n<k;n++)l=a[n],"M"==l[0]?(d=l[1],e=l[2],h.push(d),f.push(e)):(d=U(d,e,l[1],l[2],l[3],l[4],l[5],l[6]),h=h.concat(d.min.x,d.max.x),f=f.concat(d.min.y,d.max.y),d=l[5],e=l[6]);a=X.apply(0,h);l=X.apply(0,f);h=W.apply(0,h);f=W.apply(0,f);f=w(a,l,h-a,f-l);b.bbox=C(f);return f}function s(a,b,d,e,h){if(h)return[["M",+a+ +h,b],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,e-2*h],["a",h,h,0,0,1, -h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-e],["a",h,h,0,0,1,h,-h],["z"] ];a=[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"] ];a.toString=z;return a}function x(a,b,d,e,h){null==h&&null==e&&(e=d);a=+a;b=+b;d=+d;e=+e;if(null!=h){var f=Math.PI/180,l=a+d*Math.cos(-e*f);a+=d*Math.cos(-h*f);var n=b+d*Math.sin(-e*f);b+=d*Math.sin(-h*f);d=[["M",l,n],["A",d,d,0,+(180<h-e),0,a,b] ]}else d=[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"] ];d.toString=z;return d}function G(b){var e= A(b);if(e.abs)return d(e.abs);Q(b,"array")&&Q(b&&b[0],"array")||(b=a.parsePathString(b));if(!b||!b.length)return[["M",0,0] ];var h=[],f=0,l=0,n=0,k=0,p=0;"M"==b[0][0]&&(f=+b[0][1],l=+b[0][2],n=f,k=l,p++,h[0]=["M",f,l]);for(var q=3==b.length&&"M"==b[0][0]&&"R"==b[1][0].toUpperCase()&&"Z"==b[2][0].toUpperCase(),s,r,w=p,c=b.length;w<c;w++){h.push(s=[]);r=b[w];p=r[0];if(p!=p.toUpperCase())switch(s[0]=p.toUpperCase(),s[0]){case "A":s[1]=r[1];s[2]=r[2];s[3]=r[3];s[4]=r[4];s[5]=r[5];s[6]=+r[6]+f;s[7]=+r[7]+ l;break;case "V":s[1]=+r[1]+l;break;case "H":s[1]=+r[1]+f;break;case "R":for(var t=[f,l].concat(r.slice(1)),u=2,v=t.length;u<v;u++)t[u]=+t[u]+f,t[++u]=+t[u]+l;h.pop();h=h.concat(P(t,q));break;case "O":h.pop();t=x(f,l,r[1],r[2]);t.push(t[0]);h=h.concat(t);break;case "U":h.pop();h=h.concat(x(f,l,r[1],r[2],r[3]));s=["U"].concat(h[h.length-1].slice(-2));break;case "M":n=+r[1]+f,k=+r[2]+l;default:for(u=1,v=r.length;u<v;u++)s[u]=+r[u]+(u%2?f:l)}else if("R"==p)t=[f,l].concat(r.slice(1)),h.pop(),h=h.concat(P(t, q)),s=["R"].concat(r.slice(-2));else if("O"==p)h.pop(),t=x(f,l,r[1],r[2]),t.push(t[0]),h=h.concat(t);else if("U"==p)h.pop(),h=h.concat(x(f,l,r[1],r[2],r[3])),s=["U"].concat(h[h.length-1].slice(-2));else for(t=0,u=r.length;t<u;t++)s[t]=r[t];p=p.toUpperCase();if("O"!=p)switch(s[0]){case "Z":f=+n;l=+k;break;case "H":f=s[1];break;case "V":l=s[1];break;case "M":n=s[s.length-2],k=s[s.length-1];default:f=s[s.length-2],l=s[s.length-1]}}h.toString=z;e.abs=d(h);return h}function h(a,b,d,e){return[a,b,d,e,d, e]}function J(a,b,d,e,h,f){var l=1/3,n=2/3;return[l*a+n*d,l*b+n*e,l*h+n*d,l*f+n*e,h,f]}function K(b,d,e,h,f,l,n,k,p,s){var r=120*S/180,q=S/180*(+f||0),c=[],t,x=a._.cacher(function(a,b,c){var d=a*F.cos(c)-b*F.sin(c);a=a*F.sin(c)+b*F.cos(c);return{x:d,y:a}});if(s)v=s[0],t=s[1],l=s[2],u=s[3];else{t=x(b,d,-q);b=t.x;d=t.y;t=x(k,p,-q);k=t.x;p=t.y;F.cos(S/180*f);F.sin(S/180*f);t=(b-k)/2;v=(d-p)/2;u=t*t/(e*e)+v*v/(h*h);1<u&&(u=F.sqrt(u),e*=u,h*=u);var u=e*e,w=h*h,u=(l==n?-1:1)*F.sqrt(Z((u*w-u*v*v-w*t*t)/ (u*v*v+w*t*t)));l=u*e*v/h+(b+k)/2;var u=u*-h*t/e+(d+p)/2,v=F.asin(((d-u)/h).toFixed(9));t=F.asin(((p-u)/h).toFixed(9));v=b<l?S-v:v;t=k<l?S-t:t;0>v&amp;&amp;(v=2<em>S+v);0&gt;t&amp;&amp;(t=2</em>S+t);n&amp;&amp;v&gt;t&amp;&amp;(v-=2<em>S);!n&amp;&amp;t&gt;v&amp;&amp;(t-=2</em>S)}if(Z(t-v)&gt;r){var c=t,w=k,G=p;t=v+r<em>(n&amp;&amp;t&gt;v?1:-1);k=l+e</em>F.cos(t);p=u+h<em>F.sin(t);c=K(k,p,e,h,f,0,n,w,G,[t,c,l,u])}l=t-v;f=F.cos(v);r=F.sin(v);n=F.cos(t);t=F.sin(t);l=F.tan(l/4);e=4/3</em>e<em>l;l</em>=4/3<em>h;h=[b,d];b=[b+e</em>r,d-l<em>f];d=[k+e</em>t,p-l<em>n];k=[k,p];b[0]=2</em>h[0]-b[0];b[1]=2<em>h[1]-b[1];if(s)return[b,d,k].concat(c); c=[b,d,k].concat(c).join().split(",");s=[];k=0;for(p=c.length;k<p;k++)s[k]=k%2?x(c[k-1],c[k],q).y:x(c[k],c[k+1],q).x;return s}function U(a,b,d,e,h,f,l,k){for(var n=[],p=[[],[] ],s,r,c,t,q=0;2>q;++q)0==q?(r=6</em>a-12<em>d+6</em>h,s=-3<em>a+9</em>d-9<em>h+3</em>l,c=3<em>d-3</em>a):(r=6<em>b-12</em>e+6<em>f,s=-3</em>b+9<em>e-9</em>f+3<em>k,c=3</em>e-3<em>b),1E-12&gt;Z(s)?1E-12&gt;Z(r)||(s=-c/r,0<s&&1>s&amp;&amp;n.push(s)):(t=r</em>r-4<em>c</em>s,c=F.sqrt(t),0&gt;t||(t=(-r+c)/(2<em>s),0<t&&1>t&amp;&amp;n.push(t),s=(-r-c)/(2</em>s),0<s&&1>s&amp;&amp;n.push(s)));for(r=q=n.length;q;)s=n[q],c=1-s,p[0][q]=c<em>c</em>c<em>a+3</em> c<em>c</em>s<em>d+3</em>c<em>s</em>s<em>h+s</em>s<em>s</em>l,p[1][q]=c<em>c</em>c<em>b+3</em>c<em>c</em>s<em>e+3</em>c<em>s</em>s<em>f+s</em>s<em>s</em>k;p[0][r]=a;p[1][r]=b;p[0][r+1]=l;p[1][r+1]=k;p[0].length=p[1].length=r+2;return{min:{x:X.apply(0,p[0]),y:X.apply(0,p[1])},max:{x:W.apply(0,p[0]),y:W.apply(0,p[1])}}}function I(a,b){var e=!b&amp;&amp;A(a);if(!b&amp;&amp;e.curve)return d(e.curve);var f=G(a),l=b&amp;&amp;G(b),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},p=function(a,b,c){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null); switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"].concat(K.apply(0,[b.x,b.y].concat(a.slice(1))));break;case "S":"C"==c||"S"==c?(c=2<em>b.x-b.bx,b=2</em>b.y-b.by):(c=b.x,b=b.y);a=["C",c,b].concat(a.slice(1));break;case "T":"Q"==c||"T"==c?(b.qx=2<em>b.x-b.qx,b.qy=2</em>b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"].concat(J(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"].concat(J(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(h(b.x,b.y,a[1],a[2]));break;case "H":a=["C"].concat(h(b.x, b.y,a[1],b.y));break;case "V":a=["C"].concat(h(b.x,b.y,b.x,a[1]));break;case "Z":a=["C"].concat(h(b.x,b.y,b.X,b.Y))}return a},s=function(a,b){if(7<a[b].length){a[b].shift();for(var c=a[b];c.length;)q[b]="A",l&&(u[b]="A"),a.splice(b++,0,["C"].concat(c.splice(0,6)));a.splice(b,1);v=W(f.length,l&&l.length||0)}},r=function(a,b,c,d,e){a&&b&&"M"==a[e][0]&&"M"!=b[e][0]&&(b.splice(e,0,["M",d.x,d.y]),c.bx=0,c.by=0,c.x=a[e][1],c.y=a[e][2],v=W(f.length,l&&l.length||0))},q=[],u=[],c="",t="",x=0,v=W(f.length, l&&l.length||0);for(;x<v;x++){f[x]&&(c=f[x][0]);"C"!=c&&(q[x]=c,x&&(t=q[x-1]));f[x]=p(f[x],n,t);"A"!=q[x]&&"C"==c&&(q[x]="C");s(f,x);l&&(l[x]&&(c=l[x][0]),"C"!=c&&(u[x]=c,x&&(t=u[x-1])),l[x]=p(l[x],k,t),"A"!=u[x]&&"C"==c&&(u[x]="C"),s(l,x));r(f,l,n,k,x);r(l,f,k,n,x);var w=f[x],z=l&&l[x],y=w.length,U=l&&z.length;n.x=w[y-2];n.y=w[y-1];n.bx=$(w[y-4])||n.x;n.by=$(w[y-3])||n.y;k.bx=l&&($(z[U-4])||k.x);k.by=l&&($(z[U-3])||k.y);k.x=l&&z[U-2];k.y=l&&z[U-1]}l||(e.curve=d(f));return l?[f,l]:f}function P(a, b){for(var d=[],e=0,h=a.length;h-2*!b>e;e+=2){var f=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?h-4==e?f[3]={x:+a[0],y:+a[1]}:h-2==e&amp;&amp;(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[h-2],y:+a[h-1]}:h-4==e?f[3]=f[2]:e||(f[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-f[0].x+6<em>f[1].x+f[2].x)/6,(-f[0].y+6</em>f[1].y+f[2].y)/6,(f[1].x+6<em>f[2].x-f[3].x)/6,(f[1].y+6</em>f[2].y-f[3].y)/6,f[2].x,f[2].y])}return d}y=k.prototype;var Q=a.is,C=a.</em>.clone,L="hasOwnProperty", N=/,?([a-z]),?/gi,$=parseFloat,F=Math,S=F.PI,X=F.min,W=F.max,ma=F.pow,Z=F.abs;M=n(1);var na=n(),ba=n(0,1),V=a.<em>unit2px;a.path=A;a.path.getTotalLength=M;a.path.getPointAtLength=na;a.path.getSubpath=function(a,b,d){if(1E-6&gt;this.getTotalLength(a)-d)return ba(a,b).end;a=ba(a,d,1);return b?ba(a,b).end:a};y.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};y.getPointAtLength=function(a){return na(this.attr("d"),a)};y.getSubpath=function(b,d){return a.path.getSubpath(this.attr("d"), b,d)};a.</em>.box=w;a.path.findDotsAtSegment=u;a.path.bezierBBox=p;a.path.isPointInsideBBox=b;a.path.isBBoxIntersect=q;a.path.intersection=function(a,b){return l(a,b)};a.path.intersectionNumber=function(a,b){return l(a,b,1)};a.path.isPointInside=function(a,d,e){var h=r(a);return b(h,d,e)&amp;&amp;1==l(a,[["M",d,e],["H",h.x2+10] ],1)%2};a.path.getBBox=r;a.path.get={path:function(a){return a.attr("path")},circle:function(a){a=V(a);return x(a.cx,a.cy,a.r)},ellipse:function(a){a=V(a);return x(a.cx||0,a.cy||0,a.rx, a.ry)},rect:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height,a.rx,a.ry)},image:function(a){a=V(a);return s(a.x||0,a.y||0,a.width,a.height)},line:function(a){return"M"+[a.attr("x1")||0,a.attr("y1")||0,a.attr("x2"),a.attr("y2")]},polyline:function(a){return"M"+a.attr("points")},polygon:function(a){return"M"+a.attr("points")+"z"},deflt:function(a){a=a.node.getBBox();return s(a.x,a.y,a.width,a.height)}};a.path.toRelative=function(b){var e=A(b),h=String.prototype.toLowerCase;if(e.rel)return d(e.rel); a.is(b,"array")&amp;&amp;a.is(b&amp;&amp;b[0],"array")||(b=a.parsePathString(b));var f=[],l=0,n=0,k=0,p=0,s=0;"M"==b[0][0]&amp;&amp;(l=b[0][1],n=b[0][2],k=l,p=n,s++,f.push(["M",l,n]));for(var r=b.length;s<r;s++){var q=f[s]=[],x=b[s];if(x[0]!=h.call(x[0]))switch(q[0]=h.call(x[0]),q[0]){case "a":q[1]=x[1];q[2]=x[2];q[3]=x[3];q[4]=x[4];q[5]=x[5];q[6]=+(x[6]-l).toFixed(3);q[7]=+(x[7]-n).toFixed(3);break;case "v":q[1]=+(x[1]-n).toFixed(3);break;case "m":k=x[1],p=x[2];default:for(var c=1,t=x.length;c<t;c++)q[c]=+(x[c]-(c%2?l: n)).toFixed(3)}else for(f[s]=[],"m"==x[0]&&(k=x[1]+l,p=x[2]+n),q=0,c=x.length;q<c;q++)f[s][q]=x[q];x=f[s].length;switch(f[s][0]){case "z":l=k;n=p;break;case "h":l+=+f[s][x-1];break;case "v":n+=+f[s][x-1];break;default:l+=+f[s][x-2],n+=+f[s][x-1]}}f.toString=z;e.rel=d(f);return f};a.path.toAbsolute=G;a.path.toCubic=I;a.path.map=function(a,b){if(!b)return a;var d,e,h,f,l,n,k;a=I(a);h=0;for(l=a.length;h<l;h++)for(k=a[h],f=1,n=k.length;f<n;f+=2)d=b.x(k[f],k[f+1]),e=b.y(k[f],k[f+1]),k[f]=d,k[f+1]=e;return a}; a.path.toString=z;a.path.clone=d});C.plugin(function(a,v,y,C){var A=Math.max,w=Math.min,z=function(a){this.items=[];this.bindings={};this.length=0;this.type="set";if(a)for(var f=0,n=a.length;f<n;f++)a[f]&&(this[this.items.length]=this.items[this.items.length]=a[f],this.length++)};v=z.prototype;v.push=function(){for(var a,f,n=0,k=arguments.length;n<k;n++)if(a=arguments[n])f=this.items.length,this[f]=this.items[f]=a,this.length++;return this};v.pop=function(){this.length&&delete this[this.length--]; return this.items.pop()};v.forEach=function(a,f){for(var n=0,k=this.items.length;n<k&&!1!==a.call(f,this.items[n],n);n++);return this};v.animate=function(d,f,n,u){"function"!=typeof n||n.length||(u=n,n=L.linear);d instanceof a._.Animation&&(u=d.callback,n=d.easing,f=n.dur,d=d.attr);var p=arguments;if(a.is(d,"array")&&a.is(p[p.length-1],"array"))var b=!0;var q,e=function(){q?this.b=q:q=this.b},l=0,r=u&&function(){l++==this.length&&u.call(this)};return this.forEach(function(a,l){k.once("snap.animcreated."+ a.id,e);b?p[l]&&a.animate.apply(a,p[l]):a.animate(d,f,n,r)})};v.remove=function(){for(;this.length;)this.pop().remove();return this};v.bind=function(a,f,k){var u={};if("function"==typeof f)this.bindings[a]=f;else{var p=k||a;this.bindings[a]=function(a){u[p]=a;f.attr(u)}}return this};v.attr=function(a){var f={},k;for(k in a)if(this.bindings[k])this.bindings<a href="a[k]">k</a>;else f[k]=a[k];a=0;for(k=this.items.length;a<k;a++)this.items[a].attr(f);return this};v.clear=function(){for(;this.length;)this.pop()}; v.splice=function(a,f,k){a=0>a?A(this.length+a,0):a;f=A(0,w(this.length-a,f));var u=[],p=[],b=[],q;for(q=2;q<arguments.length;q++)b.push(arguments[q]);for(q=0;q<f;q++)p.push(this[a+q]);for(;q<this.length-a;q++)u.push(this[a+q]);var e=b.length;for(q=0;q<e+u.length;q++)this.items[a+q]=this[a+q]=q<e?b[q]:u[q-e];for(q=this.items.length=this.length-=f-e;this[q];)delete this[q++];return new z(p)};v.exclude=function(a){for(var f=0,k=this.length;f<k;f++)if(this[f]==a)return this.splice(f,1),!0;return!1}; v.insertAfter=function(a){for(var f=this.items.length;f--;)this.items[f].insertAfter(a);return this};v.getBBox=function(){for(var a=[],f=[],k=[],u=[],p=this.items.length;p--;)if(!this.items[p].removed){var b=this.items[p].getBBox();a.push(b.x);f.push(b.y);k.push(b.x+b.width);u.push(b.y+b.height)}a=w.apply(0,a);f=w.apply(0,f);k=A.apply(0,k);u=A.apply(0,u);return{x:a,y:f,x2:k,y2:u,width:k-a,height:u-f,cx:a+(k-a)/2,cy:f+(u-f)/2}};v.clone=function(a){a=new z;for(var f=0,k=this.items.length;f<k;f++)a.push(this.items[f].clone()); return a};v.toString=function(){return"Snap\u2018s set"};v.type="set";a.set=function(){var a=new z;arguments.length&&a.push.apply(a,Array.prototype.slice.call(arguments,0));return a}});C.plugin(function(a,v,y,C){function A(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3] ]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4] ]:3==a.length?[b,1,1]:[b,1]}}function w(b,d,f){d=q(d).replace(/\.{3}|\u2026/g,b);b=a.parseTransformString(b)|| [];d=a.parseTransformString(d)||[];for(var k=Math.max(b.length,d.length),p=[],v=[],h=0,w,z,y,I;h<k;h++){y=b[h]||A(d[h]);I=d[h]||A(y);if(y[0]!=I[0]||"r"==y[0].toLowerCase()&&(y[2]!=I[2]||y[3]!=I[3])||"s"==y[0].toLowerCase()&&(y[3]!=I[3]||y[4]!=I[4])){b=a._.transform2matrix(b,f());d=a._.transform2matrix(d,f());p=[["m",b.a,b.b,b.c,b.d,b.e,b.f] ];v=[["m",d.a,d.b,d.c,d.d,d.e,d.f] ];break}p[h]=[];v[h]=[];w=0;for(z=Math.max(y.length,I.length);w<z;w++)w in y&&(p[h][w]=y[w]),w in I&&(v[h][w]=I[w])}return{from:u(p), to:u(v),f:n(p)}}function z(a){return a}function d(a){return function(b){return+b.toFixed(3)+a}}function f(b){return a.rgb(b[0],b[1],b[2])}function n(a){var b=0,d,f,k,n,h,p,q=[];d=0;for(f=a.length;d<f;d++){h="[";p=['"'+a[d][0]+'"'];k=1;for(n=a[d].length;k<n;k++)p[k]="val["+b++ +"]";h+=p+"]";q[d]=h}return Function("val","return Snap.path.toString.call(["+q+"])")}function u(a){for(var b=[],d=0,f=a.length;d<f;d++)for(var k=1,n=a[d].length;k<n;k++)b.push(a[d][k]);return b}var p={},b=/[a-z]+$/i,q=String; p.stroke=p.fill="colour";v.prototype.equal=function(a,b){return k("snap.util.equal",this,a,b).firstDefined()};k.on("snap.util.equal",function(e,k){var r,s;r=q(this.attr(e)||"");var x=this;if(r==+r&&k==+k)return{from:+r,to:+k,f:z};if("colour"==p[e])return r=a.color(r),s=a.color(k),{from:[r.r,r.g,r.b,r.opacity],to:[s.r,s.g,s.b,s.opacity],f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return k instanceof a.Matrix&&(k=k.toTransformString()),a._.rgTransform.test(k)||(k=a._.svgTransform2string(k)), w(r,k,function(){return x.getBBox(1)});if("d"==e||"path"==e)return r=a.path.toCubic(r,k),{from:u(r[0]),to:u(r[1]),f:n(r[0])};if("points"==e)return r=q(r).split(a._.separator),s=q(k).split(a._.separator),{from:r,to:s,f:function(a){return a}};aUnit=r.match(b);s=q(k).match(b);return aUnit&&aUnit==s?{from:parseFloat(r),to:parseFloat(k),f:d(aUnit)}:{from:this.asPX(e),to:this.asPX(e,k),f:z}})});C.plugin(function(a,v,y,C){var A=v.prototype,w="createTouch"in C.doc;v="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "); var z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},d=function(a,b){var d="y"==a?"scrollTop":"scrollLeft",e=b&&b.node?b.node.ownerDocument:C.doc;return e[d in e.documentElement?"documentElement":"body"][d]},f=function(){this.returnValue=!1},n=function(){return this.originalEvent.preventDefault()},u=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},b=function(){if(C.doc.addEventListener)return function(a,b,e,f){var k=w&&z[b]?z[b]:b,l=function(k){var l= d("y",f),q=d("x",f);if(w&&z.hasOwnProperty(b))for(var r=0,u=k.targetTouches&&k.targetTouches.length;r<u;r++)if(k.targetTouches[r].target==a||a.contains(k.targetTouches[r].target)){u=k;k=k.targetTouches[r];k.originalEvent=u;k.preventDefault=n;k.stopPropagation=p;break}return e.call(f,k,k.clientX+q,k.clientY+l)};b!==k&&a.addEventListener(b,l,!1);a.addEventListener(k,l,!1);return function(){b!==k&&a.removeEventListener(b,l,!1);a.removeEventListener(k,l,!1);return!0}};if(C.doc.attachEvent)return function(a, b,e,h){var k=function(a){a=a||h.node.ownerDocument.window.event;var b=d("y",h),k=d("x",h),k=a.clientX+k,b=a.clientY+b;a.preventDefault=a.preventDefault||f;a.stopPropagation=a.stopPropagation||u;return e.call(h,a,k,b)};a.attachEvent("on"+b,k);return function(){a.detachEvent("on"+b,k);return!0}}}(),q=[],e=function(a){for(var b=a.clientX,e=a.clientY,f=d("y"),l=d("x"),n,p=q.length;p;){n=q[p];if(w)for(var r=a.touches&&a.touches.length,u;r;){if(u=a.touches[r],u.identifier==n.el._drag.id||n.el.node.contains(u.target)){b= u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();b+=l;e+=f;k("snap.drag.move."+n.el.id,n.move_scope||n.el,b-n.el._drag.x,e-n.el._drag.y,b,e,a)}},l=function(b){a.unmousemove(e).unmouseup(l);for(var d=q.length,f;d;)f=q[d],f.el._drag={},k("snap.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,b);q=[]};for(y=v.length;y;)(function(d){a[d]=A[d]=function(e,f){a.is(e,"function")&&(this.events=this.events||[],this.events.push({name:d, f:e,unbind:b(this.node||document,d,e,f||this)}));return this};a["un"+d]=A["un"+d]=function(a){for(var b=this.events||[],e=b.length;e;)if(b[e].name==d&&(b[e].f==a||!a)){b[e].unbind();b.splice(e,1);!b.length&&delete this.events;break}return this}})(v[y]);A.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};A.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var r=[];A.drag=function(b,d,f,h,n,p){function u(r,v,w){(r.originalEvent||r).preventDefault();this._drag.x=v; this._drag.y=w;this._drag.id=r.identifier;!q.length&&a.mousemove(e).mouseup(l);q.push({el:this,move_scope:h,start_scope:n,end_scope:p});d&&k.on("snap.drag.start."+this.id,d);b&&k.on("snap.drag.move."+this.id,b);f&&k.on("snap.drag.end."+this.id,f);k("snap.drag.start."+this.id,n||h||this,v,w,r)}if(!arguments.length){var v;return this.drag(function(a,b){this.attr({transform:v+(v?"T":"t")+[a,b]})},function(){v=this.transform().local})}this._drag={};r.push({el:this,start:u});this.mousedown(u);return this}; A.undrag=function(){for(var b=r.length;b;)r[b].el==this&&(this.unmousedown(r[b].start),r.splice(b,1),k.unbind("snap.drag.*."+this.id));!r.length&&a.unmousemove(e).unmouseup(l);return this}});C.plugin(function(a,v,y,C){y=y.prototype;var A=/^\s*url((.+))/,w=String,z=a._.$;a.filter={};y.filter=function(d){var f=this;"svg"!=f.type&&(f=f.paper);d=a.parse(w(d));var k=a._.id(),u=z("filter");z(u,{id:k,filterUnits:"userSpaceOnUse"});u.appendChild(d.node);f.defs.appendChild(u);return new v(u)};k.on("snap.util.getattr.filter", function(){k.stop();var d=z(this.node,"filter");if(d)return(d=w(d).match(A))&&a.select(d[1])});k.on("snap.util.attr.filter",function(d){if(d instanceof v&&"filter"==d.type){k.stop();var f=d.node.id;f||(z(d.node,{id:d.id}),f=d.id);z(this.node,{filter:a.url(f)})}d&&"none"!=d||(k.stop(),this.node.removeAttribute("filter"))});a.filter.blur=function(d,f){null==d&&(d=2);return a.format('<feGaussianBlur stdDeviation="{def}"/>',{def:null==f?d:[d,f]})};a.filter.blur.toString=function(){return this()};a.filter.shadow= function(d,f,k,u,p){"string"==typeof k&amp;&amp;(p=u=k,k=4);"string"!=typeof u&amp;&amp;(p=u,u="#000");null==k&amp;&amp;(k=4);null==p&amp;&amp;(p=1);null==d&amp;&amp;(d=0,f=2);null==f&amp;&amp;(f=d);u=a.color(u||"#000");return a.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>', {color:u,dx:d,dy:f,blur:k,opacity:p})};a.filter.shadow.toString=function(){return this()};a.filter.grayscale=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:0.2126+0.7874<em>(1-d),b:0.7152-0.7152</em>(1-d),c:0.0722-0.0722<em>(1-d),d:0.2126-0.2126</em>(1-d),e:0.7152+0.2848<em>(1-d),f:0.0722-0.0722</em>(1-d),g:0.2126-0.2126<em>(1-d),h:0.0722+0.9278</em>(1-d)})};a.filter.grayscale.toString=function(){return this()};a.filter.sepia= function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:0.393+0.607<em>(1-d),b:0.769-0.769</em>(1-d),c:0.189-0.189<em>(1-d),d:0.349-0.349</em>(1-d),e:0.686+0.314<em>(1-d),f:0.168-0.168</em>(1-d),g:0.272-0.272<em>(1-d),h:0.534-0.534</em>(1-d),i:0.131+0.869*(1-d)})};a.filter.sepia.toString=function(){return this()};a.filter.saturate=function(d){null==d&amp;&amp;(d=1);return a.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1- d})};a.filter.saturate.toString=function(){return this()};a.filter.hueRotate=function(d){return a.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:d||0})};a.filter.hueRotate.toString=function(){return this()};a.filter.invert=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:d, amount2:1-d})};a.filter.invert.toString=function(){return this()};a.filter.brightness=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:d})};a.filter.brightness.toString=function(){return this()};a.filter.contrast=function(d){null==d&amp;&amp;(d=1);return a.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>', {amount:d,amount2:0.5-d/2})};a.filter.contrast.toString=function(){return this()}});return C});</p>
<p>]]&gt; </script> <script> &lt;![CDATA[</p>
<p>(function (glob, factory) {     // AMD support     if (typeof define === "function" &amp;&amp; define.amd) {         // Define as an anonymous module         define("Gadfly", ["Snap.svg"], function (Snap) {             return factory(Snap);         });     } else {         // Browser globals (glob is window)         // Snap adds itself to window         glob.Gadfly = factory(glob.Snap);     } }(this, function (Snap) {</p>
<p>var Gadfly = {};</p>
<p>// Get an x/y coordinate value in pixels var xPX = function(fig, x) {     var client_box = fig.node.getBoundingClientRect();     return x * fig.node.viewBox.baseVal.width / client_box.width; };</p>
<p>var yPX = function(fig, y) {     var client_box = fig.node.getBoundingClientRect();     return y * fig.node.viewBox.baseVal.height / client_box.height; };</p>
<p>Snap.plugin(function (Snap, Element, Paper, global) {     // Traverse upwards from a snap element to find and return the first     // note with the "plotroot" class.     Element.prototype.plotroot = function () {         var element = this;         while (!element.hasClass("plotroot") &amp;&amp; element.parent() != null) {             element = element.parent();         }         return element;     };</p>
<div class="codehilite"><pre><span></span>Element.prototype.svgroot = function () {
    var element = this;
    while (element.node.nodeName != &quot;svg&quot; &amp;&amp; element.parent() != null) {
        element = element.parent();
    }
    return element;
};

Element.prototype.plotbounds = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x0: bbox.x,
        x1: bbox.x + bbox.width,
        y0: bbox.y,
        y1: bbox.y + bbox.height
    };
};

Element.prototype.plotcenter = function () {
    var root = this.plotroot()
    var bbox = root.select(&quot;.guide.background&quot;).node.getBBox();
    return {
        x: bbox.x + bbox.width / 2,
        y: bbox.y + bbox.height / 2
    };
};

// Emulate IE style mouseenter/mouseleave events, since Microsoft always
// does everything right.
// See: http://www.dynamic-tools.net/toolbox/isMouseLeaveOrEnter/
var events = [&quot;mouseenter&quot;, &quot;mouseleave&quot;];

for (i in events) {
    (function (event_name) {
        var event_name = events[i];
        Element.prototype[event_name] = function (fn, scope) {
            if (Snap.is(fn, &quot;function&quot;)) {
                var fn2 = function (event) {
                    if (event.type != &quot;mouseover&quot; &amp;&amp; event.type != &quot;mouseout&quot;) {
                        return;
                    }

                    var reltg = event.relatedTarget ? event.relatedTarget :
                        event.type == &quot;mouseout&quot; ? event.toElement : event.fromElement;
                    while (reltg &amp;&amp; reltg != this.node) reltg = reltg.parentNode;

                    if (reltg != this.node) {
                        return fn.apply(this, event);
                    }
                };

                if (event_name == &quot;mouseenter&quot;) {
                    this.mouseover(fn2, scope);
                } else {
                    this.mouseout(fn2, scope);
                }
            }
            return this;
        };
    })(events[i]);
}


Element.prototype.mousewheel = function (fn, scope) {
    if (Snap.is(fn, &quot;function&quot;)) {
        var el = this;
        var fn2 = function (event) {
            fn.apply(el, [event]);
        };
    }

    this.node.addEventListener(
        /Firefox/i.test(navigator.userAgent) ? &quot;DOMMouseScroll&quot; : &quot;mousewheel&quot;,
        fn2);

    return this;
};


// Snap&#39;s attr function can be too slow for things like panning/zooming.
// This is a function to directly update element attributes without going
// through eve.
Element.prototype.attribute = function(key, val) {
    if (val === undefined) {
        return this.node.getAttribute(key);
    } else {
        this.node.setAttribute(key, val);
        return this;
    }
};

Element.prototype.init_gadfly = function() {
    this.mouseenter(Gadfly.plot_mouseover)
        .mouseleave(Gadfly.plot_mouseout)
        .dblclick(Gadfly.plot_dblclick)
        .mousewheel(Gadfly.guide_background_scroll)
        .drag(Gadfly.guide_background_drag_onmove,
              Gadfly.guide_background_drag_onstart,
              Gadfly.guide_background_drag_onend);
    this.mouseenter(function (event){
        init_pan_zoom(this.plotroot());
    });
    return this;
};
</pre></div>


<p>});</p>
<p>// When the plot is moused over, emphasize the grid lines. Gadfly.plot_mouseover = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">keyboard_zoom</span> <span class="o">=</span> <span class="nt">function</span><span class="o">(</span><span class="nt">event</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">if</span> <span class="err">(event.which</span> <span class="err">==</span> <span class="err">187)</span> <span class="err">{</span> <span class="err">//</span> <span class="err">plus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span> <span class="nt">else</span> <span class="nt">if</span> <span class="o">(</span><span class="nt">event</span><span class="p">.</span><span class="nc">which</span> <span class="o">==</span> <span class="nt">189</span><span class="o">)</span> <span class="p">{</span> <span class="err">//</span> <span class="err">minus</span>
        <span class="err">increase_zoom_by_position(root,</span> <span class="err">-0.1,</span> <span class="err">true)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">;</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>
<span class="nt">window</span><span class="p">.</span><span class="nc">addEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">keyboard_zoom</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">,</span>
                <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">replace</span><span class="o">(/(</span><span class="err">\</span><span class="nt">d</span><span class="o">)(,|$)/</span><span class="nt">g</span><span class="o">,</span> <span class="s2">&quot;$1mm$2&quot;</span><span class="o">));</span>

<span class="o">//</span> <span class="nt">emphasize</span> <span class="nt">grid</span> <span class="nt">lines</span>
<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_xgrid_color&quot;</span><span class="o">);</span>
<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;focused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="s2">&quot;none&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">reveal</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>// Reset pan and zoom on double click Gadfly.plot_dblclick = function(event) {   set_plot_pan_zoom(this.plotroot(), 0.0, 0.0, 1.0); };</p>
<p>// Unemphasize grid lines on mouse out. Gadfly.plot_mouseout = function(event) {     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span><span class="nt">window</span><span class="p">.</span><span class="nc">removeEventListener</span><span class="o">(</span><span class="s2">&quot;keyup&quot;</span><span class="o">,</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">));</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;keyboard_zoom&quot;</span><span class="o">,</span> <span class="nt">undefined</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">),</span>
    <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_xgrid_color&quot;</span><span class="o">);</span>

<span class="nt">xgridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="nt">destcolor</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_ygrid_color&quot;</span><span class="o">);</span>
<span class="nt">ygridlines</span><span class="p">.</span><span class="nc">attribute</span><span class="o">(</span><span class="s2">&quot;stroke-dasharray&quot;</span><span class="o">,</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;unfocused_strokedash&quot;</span><span class="o">))</span>
          <span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
          <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="n">stroke</span><span class="p">:</span> <span class="n">destcolor</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">hide</span> <span class="nt">zoom</span> <span class="nt">slider</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.zoomslider&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">animate</span><span class="o">(</span><span class="p">{</span><span class="k">opacity</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span><span class="o">,</span> <span class="nt">250</span><span class="o">);</span>
</pre></div>


<p>};</p>
<p>var set_geometry_transform = function(root, tx, ty, scale) {     var xscalable = root.hasClass("xscalable"),         yscalable = root.hasClass("yscalable");</p>
<div class="codehilite"><pre><span></span>var old_scale = root.data(&quot;scale&quot;);

var xscale = xscalable ? scale : 1.0,
    yscale = yscalable ? scale : 1.0;

tx = xscalable ? tx : 0.0;
ty = yscalable ? ty : 0.0;

var t = new Snap.Matrix().translate(tx, ty).scale(xscale, yscale);

root.selectAll(&quot;.geometry, image&quot;)
    .forEach(function (element, i) {
        element.transform(t);
    });

bounds = root.plotbounds();

if (yscalable) {
    var xfixed_t = new Snap.Matrix().translate(0, ty).scale(1.0, yscale);
    root.selectAll(&quot;.xfixed&quot;)
        .forEach(function (element, i) {
            element.transform(xfixed_t);
        });

    root.select(&quot;.ylabels&quot;)
        .transform(xfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1, 1/scale, cx, cy).add(st);
                element.transform(unscale_t);

                var y = cy * scale + ty;
                element.attr(&quot;visibility&quot;,
                    bounds.y0 &lt;= y &amp;&amp; y &lt;= bounds.y1 ? &quot;visible&quot; : &quot;hidden&quot;);
            }
        });
}

if (xscalable) {
    var yfixed_t = new Snap.Matrix().translate(tx, 0).scale(xscale, 1.0);
    var xtrans = new Snap.Matrix().translate(tx, 0);
    root.selectAll(&quot;.yfixed&quot;)
        .forEach(function (element, i) {
            element.transform(yfixed_t);
        });

    root.select(&quot;.xlabels&quot;)
        .transform(yfixed_t)
        .selectAll(&quot;text&quot;)
        .forEach(function (element, i) {
            if (element.attribute(&quot;gadfly:inscale&quot;) == &quot;true&quot;) {
                var cx = element.asPX(&quot;x&quot;),
                    cy = element.asPX(&quot;y&quot;);
                var st = element.data(&quot;static_transform&quot;);
                unscale_t = new Snap.Matrix();
                unscale_t.scale(1/scale, 1, cx, cy).add(st);

                element.transform(unscale_t);

                var x = cx * scale + tx;
                element.attr(&quot;visibility&quot;,
                    bounds.x0 &lt;= x &amp;&amp; x &lt;= bounds.x1 ? &quot;visible&quot; : &quot;hidden&quot;);
                }
        });
}

// we must unscale anything that is scale invariance: widths, raiduses, etc.
var size_attribs = [&quot;font-size&quot;];
var unscaled_selection = &quot;.geometry, .geometry *&quot;;
if (xscalable) {
    size_attribs.push(&quot;rx&quot;);
    unscaled_selection += &quot;, .xgridlines&quot;;
}
if (yscalable) {
    size_attribs.push(&quot;ry&quot;);
    unscaled_selection += &quot;, .ygridlines&quot;;
}

root.selectAll(unscaled_selection)
    .forEach(function (element, i) {
        // circle need special help
        if (element.node.nodeName == &quot;circle&quot;) {
            var cx = element.attribute(&quot;cx&quot;),
                cy = element.attribute(&quot;cy&quot;);
            unscale_t = new Snap.Matrix().scale(1/xscale, 1/yscale,
                                                    cx, cy);
            element.transform(unscale_t);
            return;
        }

        for (i in size_attribs) {
            var key = size_attribs[i];
            var val = parseFloat(element.attribute(key));
            if (val !== undefined &amp;&amp; val != 0 &amp;&amp; !isNaN(val)) {
                element.attribute(key, val * old_scale / scale);
            }
        }
    });
</pre></div>


<p>};</p>
<p>// Find the most appropriate tick scale and update label visibility. var update_tickscale = function(root, scale, axis) {     if (!root.hasClass(axis + "scalable")) return;</p>
<div class="codehilite"><pre><span></span><span class="nt">var</span> <span class="nt">tickscales</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscales&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">best_tickscale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">var</span> <span class="nt">best_tickscale_dist</span> <span class="o">=</span> <span class="nt">Infinity</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">tickscale</span> <span class="nt">in</span> <span class="nt">tickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">var</span> <span class="err">dist</span> <span class="err">=</span> <span class="err">Math.abs(Math.log(tickscale)</span> <span class="err">-</span> <span class="err">Math.log(scale))</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(dist</span> <span class="err">&lt;</span> <span class="err">best_tickscale_dist)</span> <span class="err">{</span>
        <span class="err">best_tickscale_dist</span> <span class="err">=</span> <span class="err">dist</span><span class="p">;</span>
        <span class="err">best_tickscale</span> <span class="err">=</span> <span class="err">tickscale</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">best_tickscale</span> <span class="o">!=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="nt">axis</span> <span class="o">+</span> <span class="s2">&quot;tickscale&quot;</span><span class="o">))</span> <span class="p">{</span>
    <span class="err">root.data(axis</span> <span class="err">+</span> <span class="err">&quot;tickscale&quot;,</span> <span class="err">best_tickscale)</span><span class="p">;</span>
    <span class="err">var</span> <span class="err">mark_inscale_gridlines</span> <span class="err">=</span> <span class="err">function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
        <span class="err">var</span> <span class="err">inscale</span> <span class="err">=</span> <span class="err">element.attr(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    var mark_inscale_labels = function (element, i) {</span>
<span class="s2">        var inscale = element.attr(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == best_tickscale;</span>
<span class="s2">        element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;, inscale);</span>
<span class="s2">        element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, inscale ? &quot;</span><span class="kc">visible</span><span class="s2">&quot; : &quot;</span><span class="kc">hidden</span><span class="s2">&quot;);</span>
<span class="s2">    };</span>

<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">gridlines</span><span class="s2">&quot;).selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale_gridlines);</span>
<span class="s2">    root.select(&quot;</span><span class="o">.</span><span class="s2">&quot; + axis + &quot;</span><span class="n">labels</span><span class="s2">&quot;).selectAll(&quot;</span><span class="kc">text</span><span class="err">&quot;</span><span class="p">)</span><span class="o">.</span><span class="nf">forEach</span><span class="p">(</span><span class="n">mark_inscale_labels</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>};</p>
<p>var set_plot_pan_zoom = function(root, tx, ty, scale) {     var old_scale = root.data("scale");     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

// compute the viewport derived from tx, ty, and scale
var x_min = -width * scale - (scale * width - width),
    x_max = width * scale,
    y_min = -height * scale - (scale * height - height),
    y_max = height * scale;

var x0 = bounds.x0 - scale * bounds.x0,
    y0 = bounds.y0 - scale * bounds.y0;

var tx = Math.max(Math.min(tx - x0, x_max), x_min),
    ty = Math.max(Math.min(ty - y0, y_max), y_min);

tx += x0;
ty += y0;

// when the scale change, we may need to alter which set of
// ticks is being displayed
if (scale != old_scale) {
    update_tickscale(root, scale, &quot;x&quot;);
    update_tickscale(root, scale, &quot;y&quot;);
}

set_geometry_transform(root, tx, ty, scale);

root.data(&quot;scale&quot;, scale);
root.data(&quot;tx&quot;, tx);
root.data(&quot;ty&quot;, ty);
</pre></div>


<p>};</p>
<p>var scale_centered_translation = function(root, scale) {     var bounds = root.plotbounds();</p>
<div class="codehilite"><pre><span></span>var width = bounds.x1 - bounds.x0,
    height = bounds.y1 - bounds.y0;

var tx0 = root.data(&quot;tx&quot;),
    ty0 = root.data(&quot;ty&quot;);

var scale0 = root.data(&quot;scale&quot;);

// how off from center the current view is
var xoff = tx0 - (bounds.x0 * (1 - scale0) + (width * (1 - scale0)) / 2),
    yoff = ty0 - (bounds.y0 * (1 - scale0) + (height * (1 - scale0)) / 2);

// rescale offsets
xoff = xoff * scale / scale0;
yoff = yoff * scale / scale0;

// adjust for the panel position being scaled
var x_edge_adjust = bounds.x0 * (1 - scale),
    y_edge_adjust = bounds.y0 * (1 - scale);

return {
    x: xoff + x_edge_adjust + (width - width * scale) / 2,
    y: yoff + y_edge_adjust + (height - height * scale) / 2
};
</pre></div>


<p>};</p>
<p>// Initialize data for panning zooming if it isn't already. var init_pan_zoom = function(root) {     if (root.data("zoompan-ready")) {         return;     }</p>
<div class="codehilite"><pre><span></span><span class="o">//</span> <span class="nt">The</span> <span class="nt">non-scaling-stroke</span> <span class="nt">trick</span><span class="o">.</span> <span class="nt">Rather</span> <span class="nt">than</span> <span class="nt">try</span> <span class="nt">to</span> <span class="nt">correct</span> <span class="nt">for</span> <span class="nt">the</span>
<span class="o">//</span> <span class="nt">stroke-width</span> <span class="nt">when</span> <span class="nt">zooming</span><span class="o">,</span> <span class="nt">we</span> <span class="nt">force</span> <span class="nt">it</span> <span class="nt">to</span> <span class="nt">a</span> <span class="nt">fixed</span> <span class="nt">value</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">px_per_mm</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">node</span><span class="p">.</span><span class="nc">getCTM</span><span class="o">()</span><span class="p">.</span><span class="nc">a</span><span class="o">;</span>

<span class="o">//</span> <span class="nt">Drag</span> <span class="nt">events</span> <span class="nt">report</span> <span class="nt">deltas</span> <span class="nt">in</span> <span class="nt">pixels</span><span class="o">,</span> <span class="nt">which</span> <span class="nt">we</span><span class="err">&#39;</span><span class="nt">d</span> <span class="nt">like</span> <span class="nt">to</span> <span class="nt">convert</span> <span class="nt">to</span>
<span class="o">//</span> <span class="nt">millimeters</span><span class="o">.</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;px_per_mm&quot;</span><span class="o">,</span> <span class="nt">px_per_mm</span><span class="o">);</span>

<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">sw</span> <span class="err">=</span> <span class="err">element.asPX(&quot;stroke-width&quot;)</span> <span class="err">*</span> <span class="err">px_per_mm</span><span class="p">;</span>
    <span class="err">if</span> <span class="err">(sw</span> <span class="err">&gt;</span> <span class="err">0)</span> <span class="err">{</span>
        <span class="err">element.attribute(&quot;stroke-width&quot;,</span> <span class="err">sw)</span><span class="p">;</span>
        <span class="err">element.attribute(&quot;vector-effect&quot;,</span> <span class="err">&quot;non-scaling-stroke&quot;)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">Store</span> <span class="nt">ticks</span> <span class="nt">labels</span> <span class="nt">original</span> <span class="nt">tranformation</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;.xlabels &gt; text, .ylabels &gt; text&quot;</span><span class="o">)</span>
    <span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">var</span> <span class="err">lm</span> <span class="err">=</span> <span class="err">element.transform().localMatrix</span><span class="p">;</span>
        <span class="err">element.data(&quot;static_transform&quot;,</span>
            <span class="err">new</span> <span class="err">Snap.Matrix(lm.a,</span> <span class="err">lm.b,</span> <span class="err">lm.c,</span> <span class="err">lm.d,</span> <span class="err">lm.e,</span> <span class="err">lm.f))</span><span class="p">;</span>
    <span class="p">}</span><span class="o">);</span>

<span class="nt">var</span> <span class="nt">xgridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xgridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ygridlines</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ygridlines&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">xlabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.xlabels&quot;</span><span class="o">);</span>
<span class="nt">var</span> <span class="nt">ylabels</span> <span class="o">=</span> <span class="nt">root</span><span class="p">.</span><span class="nc">select</span><span class="o">(</span><span class="s2">&quot;.ylabels&quot;</span><span class="o">);</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;tx&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ty&quot;</span><span class="o">,</span> <span class="nt">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;scale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">)</span> <span class="o">===</span> <span class="nt">undefined</span><span class="o">)</span> <span class="p">{</span>

    <span class="err">//</span> <span class="err">index</span> <span class="err">all</span> <span class="err">the</span> <span class="err">tick</span> <span class="err">scales</span> <span class="err">that</span> <span class="err">are</span> <span class="err">listed</span>
    <span class="err">var</span> <span class="err">xtickscales</span> <span class="err">=</span> <span class="err">{</span><span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">ytickscales</span> <span class="o">=</span> <span class="p">{}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_x_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">xtickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>
    <span class="nt">var</span> <span class="nt">add_y_tick_scales</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
        <span class="err">ytickscales</span><span class="cp">[</span><span class="nx">element.attribute</span><span class="p">(</span><span class="s2">&quot;gadfly:scale&quot;</span><span class="p">)</span><span class="cp">]</span> <span class="err">=</span> <span class="err">true</span><span class="p">;</span>
    <span class="p">}</span><span class="o">;</span>

    <span class="nt">if</span> <span class="o">(</span><span class="nt">xgridlines</span><span class="o">)</span> <span class="nt">xgridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ygridlines</span><span class="o">)</span> <span class="nt">ygridlines</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;path&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="nt">xlabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_x_tick_scales</span><span class="o">);</span>
    <span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="nt">ylabels</span><span class="p">.</span><span class="nc">selectAll</span><span class="o">(</span><span class="s2">&quot;text&quot;</span><span class="o">)</span><span class="p">.</span><span class="nc">forEach</span><span class="o">(</span><span class="nt">add_y_tick_scales</span><span class="o">);</span>

    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscales&quot;</span><span class="o">,</span> <span class="nt">xtickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;ytickscales&quot;</span><span class="o">,</span> <span class="nt">ytickscales</span><span class="o">);</span>
    <span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;xtickscale&quot;</span><span class="o">,</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">var</span> <span class="nt">min_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">,</span> <span class="nt">max_scale</span> <span class="o">=</span> <span class="nt">1</span><span class="p">.</span><span class="nc">0</span><span class="o">;</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">xtickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">for</span> <span class="o">(</span><span class="nt">scale</span> <span class="nt">in</span> <span class="nt">ytickscales</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">min_scale</span> <span class="err">=</span> <span class="err">Math.min(min_scale,</span> <span class="err">scale)</span><span class="p">;</span>
    <span class="err">max_scale</span> <span class="err">=</span> <span class="err">Math.max(max_scale,</span> <span class="err">scale)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;min_scale&quot;</span><span class="o">,</span> <span class="nt">min_scale</span><span class="o">);</span>
<span class="nt">root</span><span class="p">.</span><span class="nc">data</span><span class="o">(</span><span class="s2">&quot;max_scale&quot;</span><span class="o">,</span> <span class="nt">max_scale</span><span class="o">);</span>

<span class="o">//</span> <span class="nt">store</span> <span class="nt">the</span> <span class="nt">original</span> <span class="nt">positions</span> <span class="nt">of</span> <span class="nt">labels</span>
<span class="nt">if</span> <span class="o">(</span><span class="nt">xlabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">xlabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;x&quot;,</span> <span class="err">element.asPX(&quot;x&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="nt">if</span> <span class="o">(</span><span class="nt">ylabels</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">ylabels.selectAll(&quot;text&quot;)</span>
           <span class="err">.forEach(function</span> <span class="err">(element,</span> <span class="err">i)</span> <span class="err">{</span>
               <span class="err">element.data(&quot;y&quot;,</span> <span class="err">element.asPX(&quot;y&quot;))</span><span class="p">;</span>
           <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>

<span class="o">//</span> <span class="nt">mark</span> <span class="nt">grid</span> <span class="nt">lines</span> <span class="nt">and</span> <span class="nt">ticks</span> <span class="nt">as</span> <span class="nt">in</span> <span class="nt">or</span> <span class="nt">out</span> <span class="nt">of</span> <span class="nt">scale</span><span class="o">.</span>
<span class="nt">var</span> <span class="nt">mark_inscale</span> <span class="o">=</span> <span class="nt">function</span> <span class="o">(</span><span class="nt">element</span><span class="o">,</span> <span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
    <span class="err">element.attribute(&quot;</span><span class="n">gadfly</span><span class="p">:</span><span class="n">inscale</span><span class="s2">&quot;, element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">scale</span><span class="s2">&quot;) == 1.0);</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) xgridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ygridlines) ygridlines.selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (xlabels) xlabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>
<span class="s2">if (ylabels) ylabels.selectAll(&quot;</span><span class="kc">text</span><span class="s2">&quot;).forEach(mark_inscale);</span>

<span class="s2">// figure out the upper ond lower bounds on panning using the maximum</span>
<span class="s2">// and minum grid lines</span>
<span class="s2">var bounds = root.plotbounds();</span>
<span class="s2">var pan_bounds = {</span>
<span class="s2">    x0: 0.0,</span>
<span class="s2">    y0: 0.0,</span>
<span class="s2">    x1: 0.0,</span>
<span class="s2">    y1: 0.0</span>
<span class="s2">};</span>

<span class="s2">if (xgridlines) {</span>
<span class="s2">    xgridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.x1 - bbox.x &lt; pan_bounds.x0) {</span>
<span class="s2">                    pan_bounds.x0 = bounds.x1 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.x0 - bbox.x &gt; pan_bounds.x1) {</span>
<span class="s2">                    pan_bounds.x1 = bounds.x0 - bbox.x;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">if (ygridlines) {</span>
<span class="s2">    ygridlines</span>
<span class="s2">        .selectAll(&quot;</span><span class="n">path</span><span class="s2">&quot;)</span>
<span class="s2">        .forEach(function (element, i) {</span>
<span class="s2">            if (element.attribute(&quot;</span><span class="n">gadfly</span><span class="o">:</span><span class="n">inscale</span><span class="s2">&quot;) == &quot;</span><span class="n">true</span><span class="s2">&quot;) {</span>
<span class="s2">                var bbox = element.node.getBBox();</span>
<span class="s2">                if (bounds.y1 - bbox.y &lt; pan_bounds.y0) {</span>
<span class="s2">                    pan_bounds.y0 = bounds.y1 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                if (bounds.y0 - bbox.y &gt; pan_bounds.y1) {</span>
<span class="s2">                    pan_bounds.y1 = bounds.y0 - bbox.y;</span>
<span class="s2">                }</span>
<span class="s2">                element.attr(&quot;</span><span class="k">visibility</span><span class="s2">&quot;, &quot;</span><span class="kc">visible</span><span class="s2">&quot;);</span>
<span class="s2">            }</span>
<span class="s2">        });</span>
<span class="s2">}</span>

<span class="s2">// nudge these values a little</span>
<span class="s2">pan_bounds.x0 -= 5;</span>
<span class="s2">pan_bounds.x1 += 5;</span>
<span class="s2">pan_bounds.y0 -= 5;</span>
<span class="s2">pan_bounds.y1 += 5;</span>
<span class="s2">root.data(&quot;</span><span class="n">pan_bounds</span><span class="s2">&quot;, pan_bounds);</span>

<span class="s2">root.data(&quot;</span><span class="n">zoompan-ready</span><span class="err">&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>


<p>};</p>
<p>// drag actions, i.e. zooming and panning var pan_action = {     start: function(root, x, y, event) {         root.data("dx", 0);         root.data("dy", 0);         root.data("tx0", root.data("tx"));         root.data("ty0", root.data("ty"));     },     update: function(root, dx, dy, x, y, event) {         var px_per_mm = root.data("px_per_mm");         dx /= px_per_mm;         dy /= px_per_mm;</p>
<div class="codehilite"><pre><span></span>    var tx0 = root.data(&quot;tx&quot;),
        ty0 = root.data(&quot;ty&quot;);

    var dx0 = root.data(&quot;dx&quot;),
        dy0 = root.data(&quot;dy&quot;);

    root.data(&quot;dx&quot;, dx);
    root.data(&quot;dy&quot;, dy);

    dx = dx - dx0;
    dy = dy - dy0;

    var tx = tx0 + dx,
        ty = ty0 + dy;

    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;));
},
end: function(root, event) {

},
cancel: function(root) {
    set_plot_pan_zoom(root, root.data(&quot;tx0&quot;), root.data(&quot;ty0&quot;), root.data(&quot;scale&quot;));
}
</pre></div>


<p>};</p>
<p>var zoom_box; var zoom_action = {     start: function(root, x, y, event) {         var bounds = root.plotbounds();         var width = bounds.x1 - bounds.x0,             height = bounds.y1 - bounds.y0;         var ratio = width / height;         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         x = xscalable ? x / px_per_mm : bounds.x0;         y = yscalable ? y / px_per_mm : bounds.y0;         var w = xscalable ? 0 : width;         var h = yscalable ? 0 : height;         zoom_box = root.rect(x, y, w, h).attr({             "fill": "#000",             "opacity": 0.25         });         zoom_box.data("ratio", ratio);     },     update: function(root, dx, dy, x, y, event) {         var xscalable = root.hasClass("xscalable"),             yscalable = root.hasClass("yscalable");         var px_per_mm = root.data("px_per_mm");         var bounds = root.plotbounds();         if (yscalable) {             y /= px_per_mm;             y = Math.max(bounds.y0, y);             y = Math.min(bounds.y1, y);         } else {             y = bounds.y1;         }         if (xscalable) {             x /= px_per_mm;             x = Math.max(bounds.x0, x);             x = Math.min(bounds.x1, x);         } else {             x = bounds.x1;         }</p>
<div class="codehilite"><pre><span></span>    dx = x - zoom_box.attr(&quot;x&quot;);
    dy = y - zoom_box.attr(&quot;y&quot;);
    if (xscalable &amp;&amp; yscalable) {
        var ratio = zoom_box.data(&quot;ratio&quot;);
        var width = Math.min(Math.abs(dx), ratio * Math.abs(dy));
        var height = Math.min(Math.abs(dy), Math.abs(dx) / ratio);
        dx = width * dx / Math.abs(dx);
        dy = height * dy / Math.abs(dy);
    }
    var xoffset = 0,
        yoffset = 0;
    if (dx &lt; 0) {
        xoffset = dx;
        dx = -1 * dx;
    }
    if (dy &lt; 0) {
        yoffset = dy;
        dy = -1 * dy;
    }
    if (isNaN(dy)) {
        dy = 0.0;
    }
    if (isNaN(dx)) {
        dx = 0.0;
    }
    zoom_box.transform(&quot;T&quot; + xoffset + &quot;,&quot; + yoffset);
    zoom_box.attr(&quot;width&quot;, dx);
    zoom_box.attr(&quot;height&quot;, dy);
},
end: function(root, event) {
    var xscalable = root.hasClass(&quot;xscalable&quot;),
        yscalable = root.hasClass(&quot;yscalable&quot;);
    var zoom_bounds = zoom_box.getBBox();
    if (zoom_bounds.width * zoom_bounds.height &lt;= 0) {
        return;
    }
    var plot_bounds = root.plotbounds();
    var zoom_factor = 1.0;
    if (yscalable) {
        zoom_factor = (plot_bounds.y1 - plot_bounds.y0) / zoom_bounds.height;
    } else {
        zoom_factor = (plot_bounds.x1 - plot_bounds.x0) / zoom_bounds.width;
    }
    var tx = (root.data(&quot;tx&quot;) - zoom_bounds.x) * zoom_factor + plot_bounds.x0,
        ty = (root.data(&quot;ty&quot;) - zoom_bounds.y) * zoom_factor + plot_bounds.y0;
    set_plot_pan_zoom(root, tx, ty, root.data(&quot;scale&quot;) * zoom_factor);
    zoom_box.remove();
},
cancel: function(root) {
    zoom_box.remove();
}
</pre></div>


<p>};</p>
<p>Gadfly.guide_background_drag_onstart = function(x, y, event) {     var root = this.plotroot();     var scalable = root.hasClass("xscalable") || root.hasClass("yscalable");     var zoomable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; scalable;     var panable = !event.altKey &amp;&amp; !event.ctrlKey &amp;&amp; !event.shiftKey &amp;&amp; scalable;     var drag_action = zoomable ? zoom_action :                       panable  ? pan_action :                                  undefined;     root.data("drag_action", drag_action);     if (drag_action) {         var cancel_drag_action = function(event) {             if (event.which == 27) { // esc key                 drag_action.cancel(root);                 root.data("drag_action", undefined);             }         };         window.addEventListener("keyup", cancel_drag_action);         root.data("cancel_drag_action", cancel_drag_action);         drag_action.start(root, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.update(root, dx, dy, x, y, event);     } };</p>
<p>Gadfly.guide_background_drag_onend = function(event) {     var root = this.plotroot();     window.removeEventListener("keyup", root.data("cancel_drag_action"));     root.data("cancel_drag_action", undefined);     var drag_action = root.data("drag_action");     if (drag_action) {         drag_action.end(root, event);     }     root.data("drag_action", undefined); };</p>
<p>Gadfly.guide_background_scroll = function(event) {     if (event.shiftKey) {         increase_zoom_by_position(this.plotroot(), 0.001 * event.wheelDelta);         event.preventDefault();     } };</p>
<p>Gadfly.zoomslider_button_mouseover = function(event) {     this.select(".button_logo")          .animate({fill: this.data("mouseover_color")}, 100); };</p>
<p>Gadfly.zoomslider_button_mouseout = function(event) {      this.select(".button_logo")          .animate({fill: this.data("mouseout_color")}, 100); };</p>
<p>Gadfly.zoomslider_zoomout_click = function(event) {     increase_zoom_by_position(this.plotroot(), -0.1, true); };</p>
<p>Gadfly.zoomslider_zoomin_click = function(event) {     increase_zoom_by_position(this.plotroot(), 0.1, true); };</p>
<p>Gadfly.zoomslider_track_click = function(event) {     // TODO };</p>
<p>// Map slider position x to scale y using the function y = a<em>exp(b</em>x)+c. // The constants a, b, and c are solved using the constraint that the function // should go through the points (0; min_scale), (0.5; 1), and (1; max_scale). var scale_from_slider_position = function(position, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return a * Math.exp(b * position) + c; }</p>
<p>// inverse of scale_from_slider_position var slider_position_from_scale = function(scale, min_scale, max_scale) {     var a = (1 - 2 * min_scale + min_scale * min_scale) / (min_scale + max_scale - 2),         b = 2 * Math.log((max_scale - 1) / (1 - min_scale)),         c = (min_scale * max_scale - 1) / (min_scale + max_scale - 2);     return 1 / b * Math.log((scale - c) / a); }</p>
<p>var increase_zoom_by_position = function(root, delta_position, animate) {     var scale = root.data("scale"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale");     var position = slider_position_from_scale(scale, min_scale, max_scale);     position += delta_position;     scale = scale_from_slider_position(position, min_scale, max_scale);     set_zoom(root, scale, animate); }</p>
<p>var set_zoom = function(root, scale, animate) {     var min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("scale");     var new_scale = Math.max(min_scale, Math.min(scale, max_scale));     if (animate) {         Snap.animate(             old_scale,             new_scale,             function (new_scale) {                 update_plot_scale(root, new_scale);             },             200);     } else {         update_plot_scale(root, new_scale);     } }</p>
<p>var update_plot_scale = function(root, new_scale) {     var trans = scale_centered_translation(root, new_scale);     set_plot_pan_zoom(root, trans.x, trans.y, new_scale);</p>
<div class="codehilite"><pre><span></span>root.selectAll(&quot;.zoomslider_thumb&quot;)
    .forEach(function (element, i) {
        var min_pos = element.data(&quot;min_pos&quot;),
            max_pos = element.data(&quot;max_pos&quot;),
            min_scale = root.data(&quot;min_scale&quot;),
            max_scale = root.data(&quot;max_scale&quot;);
        var xmid = (min_pos + max_pos) / 2;
        var xpos = slider_position_from_scale(new_scale, min_scale, max_scale);
        element.transform(new Snap.Matrix().translate(
            Math.max(min_pos, Math.min(
                     max_pos, min_pos + (max_pos - min_pos) * xpos)) - xmid, 0));
});
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragmove = function(dx, dy, x, y, event) {     var root = this.plotroot();     var min_pos = this.data("min_pos"),         max_pos = this.data("max_pos"),         min_scale = root.data("min_scale"),         max_scale = root.data("max_scale"),         old_scale = root.data("old_scale");</p>
<div class="codehilite"><pre><span></span>var px_per_mm = root.data(&quot;px_per_mm&quot;);
dx /= px_per_mm;
dy /= px_per_mm;

var xmid = (min_pos + max_pos) / 2;
var xpos = slider_position_from_scale(old_scale, min_scale, max_scale) +
               dx / (max_pos - min_pos);

// compute the new scale
var new_scale = scale_from_slider_position(xpos, min_scale, max_scale);
new_scale = Math.min(max_scale, Math.max(min_scale, new_scale));

update_plot_scale(root, new_scale);
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragstart = function(x, y, event) {     this.animate({fill: this.data("mouseover_color")}, 100);     var root = this.plotroot();</p>
<div class="codehilite"><pre><span></span>// keep track of what the scale was when we started dragging
root.data(&quot;old_scale&quot;, root.data(&quot;scale&quot;));
event.stopPropagation();
</pre></div>


<p>};</p>
<p>Gadfly.zoomslider_thumb_dragend = function(event) {     this.animate({fill: this.data("mouseout_color")}, 100);     event.stopPropagation(); };</p>
<p>var toggle_color_class = function(root, color_class, ison) {     var guides = root.selectAll(".guide." + color_class + ",.guide ." + color_class);     var geoms = root.selectAll(".geometry." + color_class + ",.geometry ." + color_class);     if (ison) {         guides.animate({opacity: 0.5}, 250);         geoms.animate({opacity: 0.0}, 250);     } else {         guides.animate({opacity: 1.0}, 250);         geoms.animate({opacity: 1.0}, 250);     } };</p>
<p>Gadfly.colorkey_swatch_click = function(event) {     var root = this.plotroot();     var color_class = this.data("color_class");</p>
<div class="codehilite"><pre><span></span>if (event.shiftKey) {
    root.selectAll(&quot;.colorkey text&quot;)
        .forEach(function (element) {
            var other_color_class = element.data(&quot;color_class&quot;);
            if (other_color_class != color_class) {
                toggle_color_class(root, other_color_class,
                                   element.attr(&quot;opacity&quot;) == 1.0);
            }
        });
} else {
    toggle_color_class(root, color_class, this.attr(&quot;opacity&quot;) == 1.0);
}
</pre></div>


<p>};</p>
<p>return Gadfly;</p>
<p>}));</p>
<p>//@ sourceURL=gadfly.js</p>
<p>(function (glob, factory) {     // AMD support       if (typeof require === "function" &amp;&amp; typeof define === "function" &amp;&amp; define.amd) {         require(["Snap.svg", "Gadfly"], function (Snap, Gadfly) {             factory(Snap, Gadfly);         });       } else {           factory(glob.Snap, glob.Gadfly);       } })(window, function (Snap, Gadfly) {     var fig = Snap("#img-6a5ef53d"); fig.select("#img-6a5ef53d-3")    .init_gadfly(); fig.select("#img-6a5ef53d-5")    .plotroot().data("unfocused_ygrid_color", "#FFFFFF") ; fig.select("#img-6a5ef53d-5")    .plotroot().data("focused_ygrid_color", "#A0A0A0") ; fig.select("#img-6a5ef53d-6")    .plotroot().data("unfocused_xgrid_color", "#FFFFFF") ; fig.select("#img-6a5ef53d-6")    .plotroot().data("focused_xgrid_color", "#A0A0A0") ; fig.select("#img-6a5ef53d-37")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-6a5ef53d-37")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-6a5ef53d-37")    .click(Gadfly.zoomslider_zoomin_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ; fig.select("#img-6a5ef53d-39")    .data("max_pos", 120.42) ; fig.select("#img-6a5ef53d-39")    .data("min_pos", 103.42) ; fig.select("#img-6a5ef53d-39")    .click(Gadfly.zoomslider_track_click); fig.select("#img-6a5ef53d-40")    .data("max_pos", 120.42) ; fig.select("#img-6a5ef53d-40")    .data("min_pos", 103.42) ; fig.select("#img-6a5ef53d-40")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-6a5ef53d-40")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-6a5ef53d-40")    .drag(Gadfly.zoomslider_thumb_dragmove,      Gadfly.zoomslider_thumb_dragstart,      Gadfly.zoomslider_thumb_dragend) ; fig.select("#img-6a5ef53d-41")    .data("mouseover_color", "#CD5C5C") ; fig.select("#img-6a5ef53d-41")    .data("mouseout_color", "#6A6A6A") ; fig.select("#img-6a5ef53d-41")    .click(Gadfly.zoomslider_zoomout_click) .mouseenter(Gadfly.zoomslider_button_mouseover) .mouseleave(Gadfly.zoomslider_button_mouseout) ;     }); ]]&gt; </script> </svg></p>
<p><img alt="" src="../../assets/figures/bootstrap_boot_net_clade_2.png" /></p>
<p>In our best network, the lineage to E is estimated as the origin of gene flow, but this is recovered in only 41% of our bootstrap networks. In another 49%, it is the lineage to A that is estimated as the <em>origin</em> of gene flow: so gene flow is estimated in the opposite direction. In this example, there is support for gene flow between (A,B) and (E,O), but there is much uncertainty about its exact placement and about its direction.</p>
<p>Mapping the support for major sister clades might be interesting too:</p>
<div class="codehilite"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">net1</span><span class="p">,</span> <span class="n">nodeLabel</span><span class="o">=</span><span class="n">BSn</span><span class="p">[</span><span class="n">BSn</span><span class="p">[</span><span class="o">:</span><span class="n">BS_major_sister</span><span class="p">]</span><span class="o">.&gt;</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="o">:</span><span class="n">node</span><span class="p">,</span><span class="o">:</span><span class="n">BS_major_sister</span><span class="p">]])</span>
</pre></div>


<p>The estimated heritability  on hybrid edges in the reference network, when present in a bootstrap network, was also extracted:</p>
<div class="codehilite"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span> <span class="n">BSgam</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span><span class="o">:</span><span class="p">]</span> <span class="c"># first 3 rows only</span>
<span class="mi">3</span><span class="n">2</span> <span class="kt">Array</span><span class="p">{</span><span class="kt">Float64</span><span class="p">,</span><span class="mi">2</span><span class="p">}</span><span class="o">:</span>
 <span class="mf">0.767833</span>  <span class="mf">0.232167</span>
 <span class="mf">0.0</span>       <span class="mf">0.0</span>     
 <span class="mf">0.804412</span>  <span class="mf">0.195588</span>
</pre></div>


<p>=0 values are for bootstrap replicates that did not have the edge in their network. Basic summaries on  values for a given edge, say the minor parent, could be obtained like this:</p>
<div class="codehilite"><pre><span></span><span class="n">minimum</span><span class="p">(</span><span class="n">BSgam</span><span class="p">[</span><span class="o">:</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">maximum</span><span class="p">(</span><span class="n">BSgam</span><span class="p">[</span><span class="o">:</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">mean</span><span class="p">(</span><span class="n">BSgam</span><span class="p">[</span><span class="o">:</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">std</span><span class="p">(</span><span class="n">BSgam</span><span class="p">[</span><span class="o">:</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../expectedCFs/" title="Extract Expected CFs" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Extract Expected CFs
              </span>
            </div>
          </a>
        
        
          <a href="../multiplealleles/" title="Multiple Alleles" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Multiple Alleles
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-07b0fbb49b.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
        <script src="../../assets/mathjaxhelper.js"></script>
      
    
    
      
    
  </body>
</html>